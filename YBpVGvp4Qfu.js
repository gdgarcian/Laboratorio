/*!CK:1474417807!*//*1454709148,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["p26U6"]); }

__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(dk,ek){var fk=dk.split("."),gk=k;fk[0] in gk||!gk.execScript||gk.execScript("var "+fk[0]);for(var hk;fk.length&&(hk=fk.shift());)fk.length||void 0===ek?gk[hk]?gk=gk[hk]:gk=gk[hk]={}:gk[hk]=ek;}function m(dk,ek){function fk(){}fk.prototype=ek.prototype;dk.rb=ek.prototype;dk.prototype=new fk();dk.prototype.constructor=dk;dk.nb=function(gk,hk,ik){return ek.prototype[hk].apply(gk,Array.prototype.slice.call(arguments,2));};}function n(){}function o(dk){var ek=console[dk];ek?ek.bind||(console[dk]=function(){ek.apply(console,arguments);}):console[dk]=function(){};}o("error");o("warn");o("info");o("log");o("debug");function p(dk){t[dk]={aa:s(),end:NaN};}function q(dk){if(dk=t[dk])dk.end=s();}function r(dk){return (dk=t[dk])&&dk.end?dk.end-dk.aa:NaN;}var s=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,t={};function u(){var dk,ek,fk=new Promise(function(gk,hk){dk=gk;ek=hk;});fk.resolve=dk;fk.reject=ek;fk.destroy=u.prototype.destroy;return fk;}u.prototype.destroy=function(){this.catch(function(){});var dk=Error("Destroyed!");dk.type="destroy";this.reject(dk);};var v=0;function w(dk){this.b=dk;this.c=0==x;this.a=0;}var x=1;function y(dk){return dk.a<dk.b.byteLength;}function z(dk){var ek=dk.b.getUint8(dk.a);dk.a+=1;return ek;}function aa(dk){var ek=dk.b.getUint32(dk.a,dk.c);dk.a+=4;return ek;}function ba(dk){var ek,fk;dk.c?(ek=dk.b.getUint32(dk.a,true),fk=dk.b.getUint32(dk.a+4,true)):(fk=dk.b.getUint32(dk.a,false),ek=dk.b.getUint32(dk.a+4,false));if(2097151<fk)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");dk.a+=8;return fk*Math.pow(2,32)+ek;}function ca(dk){if(dk.a+16>dk.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var ek=new Uint8Array(dk.b.buffer,dk.a,16);dk.a+=16;return ek;}function da(dk,ek){if(dk.a+ek>dk.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");dk.a+=ek;}function ea(){this.g=new u();this.f=false;this.a=null;this.b=[];this.c=null;}function fa(dk,ek){if(dk.f)throw Error("Cannot append to a running task!");dk.b.push(ek);}ea.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});ga(this,void 0);};ea.prototype.end=function(){this.b.splice(1);};function ga(dk,ek){var fk=dk.b[0](ek),gk;fk?(gk=fk[0],dk.c=fk[1]):(gk=Promise.resolve(),dk.c=null);gk.then(vb(dk,function(hk){this.a?(this.b=[],this.c=null,ha(this)):(this.b.shift(),this.b.length?ga(this,hk):(this.g.resolve(hk),this.c=null));})).catch(vb(dk,function(hk){this.b=[];this.c=null;this.a?ha(this):this.g.reject(hk);}));}function ha(dk){var ek=Error("Task aborted.");ek.type="aborted";dk.g.reject(ek);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(dk),5);}function ia(dk){var ek=new CustomEvent(dk.type,{detail:dk.detail,bubbles:!!dk.bubbles}),fk;for(fk in dk)fk in ek||(ek[fk]=dk[fk]);return ek;}function ja(dk){return new CustomEvent("error",{detail:dk,bubbles:true});}function ka(dk,ek,fk){na(ek);na(fk);return fk==ek||dk>=la&&fk==ek.split("-")[0]||dk>=ma&&fk.split("-")[0]==ek.split("-")[0]?true:false;}var la=1,ma=2;function na(dk){dk=dk.toLowerCase().split("-");var ek=oa[dk[0]];ek&&(dk[0]=ek);return dk.join("-");}var oa={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function pa(dk){return Object.keys(dk).map(function(ek){return dk[ek];});}function qa(dk,ek){var fk=sa(dk,ek,"number");if(null==fk)return null;if(isNaN(fk)||fk==Number.NEGATIVE_INFINITY||fk==Number.POSITIVE_INFINITY)throw new RangeError("'"+ek+"' must be finite.");if(0>fk)throw new RangeError("'"+ek+"' must be >= 0");return fk;}function ra(dk,ek){return sa(dk,ek,"string");}function sa(dk,ek,fk){dk=dk[ek];if(null==dk)return null;if(typeof dk!=fk)throw new TypeError("'"+ek+"' must be a "+fk+".");return dk;}function ta(dk,ek,fk){dk=dk[ek];if(null==dk)return null;if(!(dk instanceof fk))throw new TypeError("'"+ek+"' must be an instance of "+fk.name+".");return dk;}function ua(dk){dk.split("").reduce(function(ek,fk,gk){return ek+(gk&&0==gk%4?" "+fk:fk);});}function va(dk){this.c=Math.exp(Math.log(.5)/dk);this.a=this.b=0;}va.prototype.sample=function(dk,ek){var fk=Math.pow(this.c,dk);this.b=ek*(1-fk)+fk*this.b;this.a+=dk;};function wa(dk){return dk.b/(1-Math.pow(dk.c,dk.a));}function xa(dk){return String.fromCharCode.apply(null,dk);}l("shaka.util.Uint8ArrayUtils.toString",xa);function ya(dk){for(var ek=new Uint8Array(dk.length),fk=0;fk<dk.length;++fk)ek[fk]=dk.charCodeAt(fk);return ek;}l("shaka.util.Uint8ArrayUtils.fromString",ya);l("shaka.util.Uint8ArrayUtils.toBase64",function(dk,ek){var fk=void 0==ek?true:ek,gk=i.btoa(xa(dk)).replace(/\+/g,"-").replace(/\//g,"_");return fk?gk:gk.replace(/=*$/,"");});function za(dk){return ya(i.atob(dk.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",za);l("shaka.util.Uint8ArrayUtils.fromHex",function(dk){for(var ek=new Uint8Array(dk.length/2),fk=0;fk<dk.length;fk+=2)ek[fk/2]=i.parseInt(dk.substr(fk,2),16);return ek;});function ab(dk){for(var ek="",fk=0;fk<dk.length;++fk){var gk=dk[fk].toString(16);1==gk.length&&(gk="0"+gk);ek+=gk;}return ek;}l("shaka.util.Uint8ArrayUtils.toHex",ab);function bb(dk,ek){if(!dk&&!ek)return true;if(!dk||!ek||dk.length!=ek.length)return false;for(var fk=0;fk<dk.length;++fk)if(dk[fk]!=ek[fk])return false;return true;}function cb(dk){this.b=dk;this.a=new w(dk);db||(db=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var db;function eb(dk){var ek;ek=fb(dk);if(7<ek.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var fk=0,gk=0;gk<ek.length;gk++)fk=256*fk+ek[gk];ek=fk;fk=fb(dk);dk:{for(gk=0;gk<db.length;gk++)if(bb(fk,db[gk])){gk=true;break dk;}gk=false;};if(gk)throw new RangeError("EbmlParser: Element cannot contain dynamically sized data.");if(8==fk.length&&fk[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var gk=fk[0]&(1<<8-fk.length)-1,hk=1;hk<fk.length;hk++)gk=256*gk+fk[hk];fk=gk;fk=dk.a.a+fk<=dk.b.byteLength?fk:dk.b.byteLength-dk.a.a;gk=new DataView(dk.b.buffer,dk.b.byteOffset+dk.a.a,fk);da(dk.a,fk);return new gb(ek,gk);}function fb(dk){var ek=z(dk.a),fk;for(fk=1;8>=fk&&!(ek&1<<8-fk);fk++);if(8<fk)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var gk=new Uint8Array(fk);gk[0]=ek;for(ek=1;ek<fk;ek++)gk[ek]=z(dk.a);return gk;}function gb(dk,ek){this.id=dk;this.a=ek;}function hb(dk){if(8<dk.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==dk.a.byteLength&&dk.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var ek=0,fk=0;fk<dk.a.byteLength;fk++)var gk=dk.a.getUint8(fk),ek=256*ek+gk;return ek;}function ib(){this.a={};}ib.prototype.push=function(dk,ek){this.a.hasOwnProperty(dk)?this.a[dk].push(ek):this.a[dk]=[ek];};ib.prototype.get=function(dk){return (dk=this.a[dk])?dk.slice():null;};function jb(dk){var ek=[],fk;for(fk in dk.a)ek.push.apply(ek,dk.a[fk]);return ek;}function kb(dk,ek,fk){if(dk=dk.a[ek])for(ek=0;ek<dk.length;++ek)dk[ek]==fk&&(dk.splice(ek,1),--ek);}function lb(dk){var ek=[],fk;for(fk in dk.a)ek.push(fk);return ek;}function mb(dk){this.qa=new ib();this.s=dk;}l("shaka.util.FakeEventTarget",mb);mb.prototype.addEventListener=function(dk,ek,fk){fk||this.qa.push(dk,ek);};mb.prototype.removeEventListener=function(dk,ek,fk){fk||kb(this.qa,dk,ek);};mb.prototype.dispatchEvent=function(dk){delete dk.srcElement;delete dk.target;delete dk.currentTarget;Object.defineProperties(dk,{srcElement:{value:null,writable:true},target:{value:this,writable:true},currentTarget:{value:null,writable:true}});return nb(this,dk);};function nb(dk,ek){ek.currentTarget=dk;for(var fk=dk.qa.get(ek.type)||[],gk=0;gk<fk.length;++gk){var hk=fk[gk];try{hk.handleEvent?hk.handleEvent(ek):hk.call(dk,ek);}catch(ik){}}dk.s&&ek.bubbles&&nb(dk.s,ek);return ek.defaultPrevented;}function ob(dk){mb.call(this,null);this.a=new va(3);this.g=new va(10);this.h=dk||500000;this.f=0;}m(ob,mb);l("shaka.util.EWMABandwidthEstimator",ob);ob.prototype.sample=function(dk,ek){if(!(65536>ek)){dk=Math.max(dk,50);var fk=8000*ek/dk,gk=dk/1000;this.a.sample(gk,fk);this.g.sample(gk,fk);this.dispatchEvent(ia({type:"bandwidth"}));this.f=Date.now();}};ob.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(wa(this.a),wa(this.g));};ob.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};ob.prototype.supportsCaching=function(){return false;};function pb(){ob.call(this);}m(pb,ob);l("shaka.util.EWMASignedURLBandwidthEstimator",pb);pb.prototype.supportsCaching=function(){return true;};function qb(dk,ek,fk){ob.call(this,fk);this.c=dk||0;this.b=void 0===ek?Infinity:ek;}m(qb,ob);l("shaka.util.EWMACacheBandwidthEstimator",qb);qb.prototype.sample=function(dk,ek){dk<=this.c&&8000*ek/dk>this.b||ob.prototype.sample.call(this,dk,ek);};qb.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function rb(){this.a=new ib();}rb.prototype.destroy=function(){tb(this);this.a=null;};function sb(dk,ek,fk,gk){ek=new ub(ek,fk,gk);dk.a.push(fk,ek);}rb.prototype.ba=function(dk,ek){for(var fk=this.a.get(ek)||[],gk=0;gk<fk.length;++gk){var hk=fk[gk];hk.target==dk&&(hk.ba(),kb(this.a,ek,hk));}};function tb(dk){for(var ek=jb(dk.a),fk=0;fk<ek.length;++fk)ek[fk].ba();dk.a.a={};}function ub(dk,ek,fk){this.target=dk;this.type=ek;this.a=fk;this.target.addEventListener(ek,fk,false);}ub.prototype.ba=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function vb(dk,ek){return ek.bind(dk);}function wb(dk,ek){for(var fk={},gk=0;gk<dk.length;++gk){var hk=ek?ek(dk[gk]):dk[gk].toString();fk[hk]=dk[gk];}var gk=[],ik;for(ik in fk)gk.push(fk[ik]);return gk;}function xb(dk){this.systemIds=[];this.cencKeyIds=[];dk=new w(new DataView(dk.buffer));try{for(;y(dk);){var fk=dk.a,gk=aa(dk),hk=aa(dk);1==gk?gk=ba(dk):0==gk&&(gk=dk.b.byteLength-fk);if(1886614376!=hk){da(dk,gk-(dk.a-fk));}else{var ik=z(dk);if(1<ik){da(dk,gk-(dk.a-fk));}else{da(dk,3);var jk=ab(ca(dk)),kk=[];if(0<ik)for(var lk=aa(dk),mk=0;mk<lk;++mk){var nk=ab(ca(dk));kk.push(nk);}var ok=aa(dk);da(dk,ok);this.cencKeyIds.push.apply(this.cencKeyIds,kk);this.systemIds.push(jk);dk.a!=fk+gk&&da(dk,gk-(dk.a-fk));}}}}catch(ek){}}var yb={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function zb(){var dk=HTMLVideoElement.prototype;!dk.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in dk&&(dk.getVideoPlaybackQuality=ac);}l("shaka.polyfill.VideoPlaybackQuality.install",zb);function ac(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function bc(){return Promise.reject(Error("The key system specified is not supported."));}function cc(dk){return null==dk?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function dc(){throw new TypeError("Illegal constructor.");}dc.prototype.createSession=function(){};dc.prototype.setServerCertificate=function(){};function ec(){throw new TypeError("Illegal constructor.");}ec.prototype.getConfiguration=function(){};ec.prototype.createMediaKeys=function(){};function fc(){var dk=Element.prototype;dk.requestFullscreen=dk.requestFullscreen||dk.mozRequestFullScreen||dk.msRequestFullscreen||dk.webkitRequestFullscreen;dk=Document.prototype;dk.exitFullscreen=dk.exitFullscreen||dk.mozCancelFullScreen||dk.msExitFullscreen||dk.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",gc);document.addEventListener("webkitfullscreenerror",gc);document.addEventListener("mozfullscreenchange",gc);document.addEventListener("mozfullscreenerror",gc);document.addEventListener("MSFullscreenChange",gc);document.addEventListener("MSFullscreenError",gc);}l("shaka.polyfill.Fullscreen.install",fc);function gc(dk){var ek=dk.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),ek=new Event(ek,dk);dk.target.dispatchEvent(ek);}function hc(dk,ek){try{var gk=new jc(dk,ek);return Promise.resolve(gk);}catch(fk){return Promise.reject(fk);}}function ic(dk){var ek=this.mediaKeys;ek&&ek!=dk&&lc(ek,null);delete this.mediaKeys;(this.mediaKeys=dk)&&lc(dk,this);return Promise.resolve();}function jc(dk,ek){this.a=this.keySystem=dk;var fk=true;"org.w3.clearkey"==dk&&(this.a="webkit-org.w3.clearkey",fk=false);var gk=false,hk;hk=document.getElementsByTagName("video");hk=hk.length?hk[0]:document.createElement("video");for(var ik=0;ik<ek.length;++ik){var jk=ek[ik],kk={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:jk.initDataTypes,sessionTypes:["temporary"]},lk=false;if(jk.audioCapabilities)for(var mk=0;mk<jk.audioCapabilities.length;++mk){var nk=jk.audioCapabilities[mk];nk.contentType&&(lk=true,hk.canPlayType(nk.contentType.split(";")[0],this.a)&&(kk.audioCapabilities.push(nk),gk=true));}if(jk.videoCapabilities)for(mk=0;mk<jk.videoCapabilities.length;++mk)nk=jk.videoCapabilities[mk],nk.contentType&&(lk=true,hk.canPlayType(nk.contentType,this.a)&&(kk.videoCapabilities.push(nk),gk=true));lk||(gk=hk.canPlayType("video/mp4",this.a)||hk.canPlayType("video/webm",this.a));"required"==jk.persistentState&&(fk?(kk.persistentState="required",kk.sessionTypes=["persistent-license"]):gk=false);if(gk){this.b=kk;return;}}throw Error("None of the requested configurations were supported.");}jc.prototype.createMediaKeys=function(){var dk=new kc(this.a);return Promise.resolve(dk);};jc.prototype.getConfiguration=function(){return this.b;};function kc(dk){this.g=dk;this.b=null;this.a=new rb();this.c=[];this.f={};}function lc(dk,ek){dk.b=ek;tb(dk.a);ek&&(sb(dk.a,ek,"webkitneedkey",dk.cb.bind(dk)),sb(dk.a,ek,"webkitkeymessage",dk.bb.bind(dk)),sb(dk.a,ek,"webkitkeyadded",dk.$a.bind(dk)),sb(dk.a,ek,"webkitkeyerror",dk.ab.bind(dk)));}j=kc.prototype;j.createSession=function(dk){var ek=dk||"temporary";if("temporary"!=ek&&"persistent-license"!=ek)throw new TypeError("Session type "+dk+" is unsupported on this platform.");dk=this.b||document.createElement("video");dk.src||(dk.src="about:blank");ek=new nc(dk,this.g,ek);this.c.push(ek);return ek;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.cb=function(dk){dk=ia({type:"encrypted",initDataType:"webm",initData:dk.initData});this.b.dispatchEvent(dk);};j.bb=function(dk){var ek=mc(this,dk.sessionId);ek&&(dk=ia({type:"message",messageType:void 0==ek.keyStatuses.a?"licenserequest":"licenserenewal",message:dk.message}),ek.b&&(ek.b.resolve(),ek.b=null),ek.dispatchEvent(dk));};j.$a=function(dk){if(dk=mc(this,dk.sessionId))pc(dk,"usable"),dk.a&&dk.a.resolve(),dk.a=null;};j.ab=function(dk){var ek=mc(this,dk.sessionId);if(ek){var fk=Error("EME v0.1b key error");fk.errorCode=dk.errorCode;fk.errorCode.systemCode=dk.systemCode;!dk.sessionId&&ek.b?(fk.method="generateRequest",45==dk.systemCode&&(fk.message="Unsupported session type."),ek.b.reject(fk),ek.b=null):dk.sessionId&&ek.a?(fk.method="update",ek.a.reject(fk),ek.a=null):(fk=dk.systemCode,dk.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?pc(ek,"output-restricted"):1==fk?pc(ek,"expired"):pc(ek,"internal-error"));}};function mc(dk,ek){var fk=dk.f[ek];return fk?fk:(fk=dk.c.shift())?(fk.sessionId=ek,dk.f[ek]=fk):null;}function nc(dk,ek,fk){mb.call(this,null);this.f=dk;this.h=false;this.a=this.b=null;this.c=ek;this.g=fk;this.sessionId="";this.expiration=NaN;this.closed=new u();this.keyStatuses=new rc();}m(nc,mb);function oc(dk,ek,fk){if(dk.h)return Promise.reject(Error("The session is already initialized."));dk.h=true;var gk;try{if("persistent-license"==dk.g){if(fk){gk=ya("LOAD_SESSION|"+fk);}else{var ik=new Uint8Array(ek);gk=ya("PERSISTENT|"+xa(ik));}}else gk=new Uint8Array(ek);}catch(hk){return Promise.reject(hk);}dk.b=new u();try{dk.f.webkitGenerateKeyRequest(dk.c,gk);}catch(jk){if("InvalidStateError"!=jk.name)return dk.b=null,Promise.reject(jk);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,gk);}catch(kk){this.b.reject(kk),this.b=null;}}.bind(dk),10);}return dk.b;}j=nc.prototype;j.wa=function(dk,ek){if(this.a){this.a.then(this.wa.bind(this,dk,ek)).catch(this.wa.bind(this,dk,ek));}else{this.a=dk;var fk,gk;"webkit-org.w3.clearkey"==this.c?(fk=xa(new Uint8Array(ek)),gk=JSON.parse(fk),"oct"!=gk.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),fk=za(gk.keys[0].k),gk=za(gk.keys[0].kid)):(fk=new Uint8Array(ek),gk=null);try{this.f.webkitAddKey(this.c,fk,gk,this.sessionId);}catch(hk){this.a.reject(hk),this.a=null;}}};function pc(dk,ek){var fk=dk.keyStatuses;fk.size=void 0==ek?0:1;fk.a=ek;fk=ia({type:"keystatuseschange"});dk.dispatchEvent(fk);}j.generateRequest=function(dk,ek){return oc(this,ek,null);};j.load=function(dk){return "persistent-license"==this.g?oc(this,null,dk):Promise.reject(Error("Not a persistent session."));};j.update=function(dk){var ek=new u();this.wa(ek,dk);return ek;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function qc(dk){this.b=dk;this.a=0;}qc.prototype.next=function(){return this.a>=this.b.length?{value:void 0,done:true}:{value:this.b[this.a++],done:false};};function rc(){this.size=0;this.a=void 0;}var sc;j=rc.prototype;j.entries=function(){var dk=sc,ek=[];this.a&&ek.push([dk,this.a]);return new qc(ek);};j.forEach=function(dk){this.a&&dk(this.a);};j.get=function(dk){if(this.has(dk))return this.a;};j.has=function(dk){var ek=sc;return this.a&&bb(new Uint8Array(dk),ek)?true:false;};j.keys=function(){var dk=sc,ek=[];this.a&&ek.push(dk);return new qc(ek);};j.values=function(){var dk=[];this.a&&dk.push(this.a);return new qc(dk);};function tc(){var dk="CustomEvent" in i;if(dk)try{new CustomEvent("");}catch(ek){dk=false;}dk||(i.CustomEvent=uc);}l("shaka.polyfill.CustomEvent.install",tc);function uc(dk,ek){var fk=document.createEvent("CustomEvent"),gk=ek||{bubbles:false,cancelable:false,detail:null};fk.initCustomEvent(dk,!!gk.bubbles,!!gk.cancelable,gk.detail);return fk;}function vc(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(sc=new Uint8Array([0]),Navigator.prototype.requestMediaKeySystemAccess=hc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ic,i.MediaKeys=kc,i.MediaKeySystemAccess=jc):(Navigator.prototype.requestMediaKeySystemAccess=bc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=cc,i.MediaKeys=dc,i.MediaKeySystemAccess=ec));}l("shaka.polyfill.MediaKeys.install",vc);l("shaka.polyfill.installAll",function(){tc();fc();vc();zb();});function wc(){this.j=this.a="";this.o=false;this.g=this.f=null;this.l=this.i=false;this.s=this.h="";this.c=null;this.b=[];}function xc(dk,ek){var fk=dk.b.concat(ek.map(function(gk){return {initData:new Uint8Array(gk.initData.buffer),initDataType:gk.initDataType};}));dk.b=wb(fk,function(gk){return Array.prototype.join.apply(gk.initData)+","+gk.initDataType;});}function yc(dk,ek,fk){MediaSource.isTypeSupported(ek);ek=dk.addSourceBuffer(ek);this.j=dk;this.c=ek;this.l=fk;this.h=new rb();this.b=[];this.o=0;this.f=this.a=null;this.s=0;sb(this.h,this.c,"updateend",this.u.bind(this));}var zc=1/60;yc.prototype.destroy=function(){fd(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.h.destroy();this.j=this.c=this.h=null;};function ad(dk,ek){for(var fk=dk.c.buffered,gk=0;gk<fk.length;++gk){var hk=fk.start(gk)-zc,ik=fk.end(gk)+zc;if(ek>=hk&&ek<=ik)return fk.end(gk)-ek;}return 0;}function bd(dk,ek){var fk=ek.a?ek.a-ek.b:1,gk=new oe();gk.a=3;gk.g=1000*fk;gk.c=1000*dk.s;return gk;}function cd(dk,ek,fk,gk){if(dk.a)return dk=Error("Cannot fetch ("+dk.i+"): previous operation not complete."),dk.type="stream",Promise.reject(dk);dk.a=new ea();fk!=dk.c.timestampOffset&&(dk.c.timestampOffset=fk);fk=bd(dk,ek);var hk=ve(ek.url,fk,dk.l),ik=te.prototype.h.bind(ek.url),jk=0;gk&&fa(dk.a,function(){return [gk.then(function(mk){mk.W>jk&&(jk=mk.W);return hd(this,mk);}.bind(this)),this.g.bind(this)];}.bind(dk));fa(dk.a,vb(dk,function(){return [hk.then(function(mk){mk.W>jk&&(jk=mk.W);this.l.getBandwidth();return hd(this,mk);}.bind(this)),function(){ik();this.g();}.bind(this)];}));var kk=0==dk.c.buffered.length&&0==dk.b.length,lk=null;fa(dk.a,function(){if(0==this.c.buffered.length){var mk=Error("Failed to buffer segment ("+this.i+").");mk.type="stream";return [Promise.reject(mk)];}kk&&(mk=ek.b,lk=this.c.buffered.start(0)-mk);mk=ye(this.b,ek.b);0<=mk?this.b.splice(mk+1,0,ek):this.b.push(ek);}.bind(dk));return gd(dk).then(function(){return Promise.resolve({pa:lk,Ka:jk});}.bind(dk));}function dd(dk){if(dk.a)return dk=Error("Cannot clear ("+dk.i+"): previous operation not complete."),dk.type="stream",Promise.reject(dk);dk.a=new ea();fa(dk.a,function(){var ek;ek:if(0==this.c.buffered.length){ek=Promise.resolve();}else{try{this.c.remove(0,Number.POSITIVE_INFINITY);}catch(fk){ek=Promise.reject(fk);break ek;}this.b=[];ek=this.f=new u();};return [ek,this.g.bind(this)];}.bind(dk));return gd(dk);}function ed(dk,ek){if(dk.a){var fk=Error("Cannot clearAfter ("+dk.i+"): previous operation not complete.");fk.type="stream";return Promise.reject(fk);}dk.a=new ea();fa(dk.a,function(){return [id(this,ek),this.g.bind(this)];}.bind(dk));return gd(dk);}function fd(dk){dk.a?(dk=dk.a,dk.a?dk=dk.a:dk.f?(dk.c&&dk.c(),dk.a=new u(),dk=dk.a):(dk.f=true,dk=Promise.resolve())):dk=Promise.resolve();return dk;}function gd(dk){dk.a.start();return dk.a.g.then(vb(dk,function(){this.a=null;})).catch(vb(dk,function(ek){this.a=null;return Promise.reject(ek);}));}function hd(dk,ek){try{dk.c.appendBuffer(ek);}catch(fk){return Promise.reject(fk);}dk.f=new u();return dk.f;}function id(dk,ek){if(0==dk.c.buffered.length)return Promise.resolve();var fk=ye(dk.b,ek);if(-1==fk||fk==dk.b.length-1)return Promise.resolve();try{dk.c.remove(dk.b[fk+1].b,Number.POSITIVE_INFINITY);}catch(gk){return Promise.reject(gk);}dk.b=dk.b.slice(0,fk+1);dk.f=new u();return dk.f;}yc.prototype.g=function(){"open"==this.j.readyState&&this.c.abort();};yc.prototype.u=function(){this.f.resolve();this.f=null;};function jd(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.maxHeight=null;}jd.prototype.clone=function(){var dk=new jd();dk.maxHeight=this.maxHeight;dk.maxWidth=this.maxWidth;dk.maxBandwidth=this.maxBandwidth;dk.minBandwidth=this.minBandwidth;return dk;};function kd(dk,ek,fk,gk){this.id=dk;this.bandwidth=ek||0;this.width=fk||0;this.height=gk||0;this.active=false;}function ld(dk,ek){var fk=dk.width*dk.height,gk=ek.width*ek.height;return fk<gk?-1:fk>gk?1:dk.bandwidth<ek.bandwidth?-1:dk.bandwidth>ek.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",ld);function md(dk,ek,fk){this.id=dk;this.bandwidth=ek||0;this.lang=fk||"unknown";this.active=false;}l("shaka.player.AudioTrack.compare",function(dk,ek){return dk.lang<ek.lang?-1:dk.lang>ek.lang?1:dk.bandwidth<ek.bandwidth?-1:dk.bandwidth>ek.bandwidth?1:0;});function nd(){this.fontSize="100%";this.fontColor=qd;this.fontOpacity=sd;this.backgroundColor=rd;this.backgroundOpacity=sd;this.fontEdge=td;}l("shaka.player.TextStyle",nd);nd.prototype.a=function(){var dk=i.localStorage.getItem("ShakaPlayerTextStyle");if(dk){var ek;try{ek=JSON.parse(dk);}catch(fk){return;}if(ek&&"object"==typeof ek){var dk=ek,gk;for(gk in dk)gk in this&&(this[gk]=dk[gk]);}}};nd.prototype.load=nd.prototype.a;nd.prototype.b=function(){i.localStorage.setItem("ShakaPlayerTextStyle",JSON.stringify(this));};nd.prototype.store=nd.prototype.b;function od(dk){var ek=[];ek.push("font-size: "+dk.fontSize);ek.push("color: "+pd(dk.fontColor,dk.fontOpacity));ek.push("background-color: "+pd(dk.backgroundColor,dk.backgroundOpacity));for(var fk=[],gk=0;gk<dk.fontEdge.length;++gk){var hk=dk.fontEdge[gk].slice(3,6);fk.push(pd(dk.fontEdge[gk].slice(0,3),dk.fontOpacity)+" "+hk.join("px ")+"px");}ek.push("text-shadow: "+fk.join(","));return ek.join("; ");}function pd(dk,ek){return "rgba("+dk.concat(ek).join(",")+")";}var qd=[255,255,255],rd=[0,0,0];nd.StandardColors={WHITE:qd,BLACK:rd,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var sd=1;nd.StandardOpacities={OPAQUE:sd,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var td=[];nd.EdgeStyles={NONE:td,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function ud(dk,ek,fk,gk,hk,ik,jk,kk,lk,mk,nk){this.g=dk;this.j=ek;this.o=fk;this.a=[];this.h=hk||null;this.i=ik||null;this.f=jk==vd;this.l=kk==wd;this.c=lk||"";this.s=mk||"";this.b=nk||null;gk&&this.a.push(gk);}l("shaka.player.DrmSchemeInfo",ud);var vd=1;ud.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:vd};var wd=1;ud.PersistentState={OPTIONAL:0,REQUIRED:wd};ud.createUnencrypted=function(){return new ud("","",false,null);};function xd(dk,ek){this.id=dk;this.lang=ek||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(dk,ek){return dk.lang<ek.lang?-1:dk.lang>ek.lang?1:0;});var yd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function zd(dk){var ek;dk instanceof zd?(ae(this,dk.K),this.O=dk.O,this.H=dk.H,be(this,dk.V),this.I=dk.I,ce(this,dk.a.clone()),this.N=dk.N):dk&&(ek=String(dk).match(yd))?(ae(this,ek[1]||"",true),this.O=de(ek[2]||""),this.H=de(ek[3]||"",true),be(this,ek[4]),this.I=de(ek[5]||"",true),ce(this,ek[6]||"",true),this.N=de(ek[7]||"")):this.a=new le(null);}j=zd.prototype;j.K="";j.O="";j.H="";j.V=null;j.I="";j.N="";j.toString=function(){var dk=[],ek=this.K;ek&&dk.push(ee(ek,ge,true),":");if(ek=this.H){dk.push("//");var fk=this.O;fk&&dk.push(ee(fk,ge,true),"@");dk.push(encodeURIComponent(ek).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));ek=this.V;null!=ek&&dk.push(":",String(ek));}if(ek=this.I)this.H&&"/"!=ek.charAt(0)&&dk.push("/"),dk.push(ee(ek,"/"==ek.charAt(0)?ie:he,true));(ek=this.a.toString())&&dk.push("?",ek);(ek=this.N)&&dk.push("#",ee(ek,ke));return dk.join("");};j.resolve=function(dk){var ek=this.clone();"data"===ek.K&&(ek=new zd());var fk=!!dk.K;fk?ae(ek,dk.K):fk=!!dk.O;fk?ek.O=dk.O:fk=!!dk.H;fk?ek.H=dk.H:fk=null!=dk.V;var gk=dk.I;if(fk){be(ek,dk.V);}else if(fk=!!dk.I){if("/"!=gk.charAt(0))if(this.H&&!this.I){gk="/"+gk;}else{var hk=ek.I.lastIndexOf("/");-1!=hk&&(gk=ek.I.substr(0,hk+1)+gk);}if(".."==gk||"."==gk){gk="";}else if(-1!=gk.indexOf("./")||-1!=gk.indexOf("/.")){for(var hk=0==gk.lastIndexOf("/",0),gk=gk.split("/"),ik=[],jk=0;jk<gk.length;){var kk=gk[jk++];"."==kk?hk&&jk==gk.length&&ik.push(""):".."==kk?((1<ik.length||1==ik.length&&""!=ik[0])&&ik.pop(),hk&&jk==gk.length&&ik.push("")):(ik.push(kk),hk=true);}gk=ik.join("/");}}fk?ek.I=gk:fk=""!==dk.a.toString();fk?ce(ek,dk.a.clone()):fk=!!dk.N;fk&&(ek.N=dk.N);return ek;};j.clone=function(){return new zd(this);};function ae(dk,ek,fk){dk.K=fk?de(ek,true):ek;dk.K&&(dk.K=dk.K.replace(/:$/,""));}function be(dk,ek){if(ek){ek=Number(ek);if(isNaN(ek)||0>ek)throw Error("Bad port number "+ek);dk.V=ek;}else dk.V=null;}function ce(dk,ek,fk){ek instanceof le?dk.a=ek:(fk||(ek=ee(ek,je)),dk.a=new le(ek));}function de(dk,ek){return dk?ek?decodeURI(dk):decodeURIComponent(dk):"";}function ee(dk,ek,fk){return "string"==typeof dk?(dk=encodeURI(dk).replace(ek,fe),fk&&(dk=dk.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),dk):null;}function fe(dk){dk=dk.charCodeAt(0);return "%"+(dk>>4&15).toString(16)+(dk&15).toString(16);}var ge=/[#\/\?@]/g,he=/[\#\?:]/g,ie=/[\#\?]/g,je=/[\#\?@]/g,ke=/#/g;function le(dk){this.b=dk||null;}le.prototype.a=null;le.prototype.c=null;function me(dk,ek,fk){if(!dk.a&&(dk.a={},dk.c=0,dk.b))for(var gk=dk.b.split("&"),hk=0;hk<gk.length;hk++){var ik=gk[hk].indexOf("="),jk=null,kk=null;0<=ik?(jk=gk[hk].substring(0,ik),kk=gk[hk].substring(ik+1)):jk=gk[hk];jk=decodeURIComponent(jk.replace(/\+/g," "));kk=kk||"";me(dk,jk,decodeURIComponent(kk.replace(/\+/g," ")));}dk.b=null;(gk=dk.a.hasOwnProperty(ek)&&dk.a[ek])||(dk.a[ek]=gk=[]);gk.push(fk);dk.c++;}le.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var dk=[],ek;for(ek in this.a)for(var fk=encodeURIComponent(ek),gk=this.a[ek],hk=0;hk<gk.length;hk++){var ik=fk;""!==gk[hk]&&(ik+="="+encodeURIComponent(gk[hk]));dk.push(ik);}return this.b=dk.join("&");};le.prototype.clone=function(){var dk=new le();dk.b=this.b;if(this.a){var ek={},fk;for(fk in this.a)ek[fk]=this.a[fk].concat();dk.a=ek;dk.c=this.c;}return dk;};function ne(dk,ek){this.url=dk;this.b=ek||new oe();this.g=this.i=this.h=0;this.a=null;this.c=new u();this.f=null;}function oe(){this.body=null;this.a=1;this.g=1000;this.c=0;this.method="GET";this.f="arraybuffer";this.b={};this.i=this.h=false;}function pe(dk){qe(dk);dk.b.body=null;dk.c.destroy();dk.c=null;dk.f=null;}function qe(dk){dk.a&&(dk.a.onload=null,dk.a.onreadystatechange=null,dk.a.onerror=null,dk.a.ontimeout=null);dk.a=null;}j=ne.prototype;j.Fa=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var dk=this.url.split(":")[1].split(";").pop().split(","),ek=dk.pop(),ek="base64"==dk.pop()?i.atob(ek.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(ek);"arraybuffer"==this.b.f&&(ek=ya(ek).buffer);dk=JSON.parse(JSON.stringify(new XMLHttpRequest()));dk.response=ek;dk.responseText=ek.toString();ek=this.c;ek.resolve(dk);pe(this);return ek;}if(0==this.url.lastIndexOf("idb:",0))return this.j();this.h++;this.i=Date.now();this.g||(this.g=this.b.g);this.a=new XMLHttpRequest();dk=this.url;this.f&&!this.f.supportsCaching()&&(dk=new zd(dk),me(dk.a,"_",Date.now()),dk=dk.toString());this.a.open(this.b.method,dk,true);this.a.responseType=this.b.f;this.a.timeout=this.b.c;this.a.withCredentials=this.b.h;this.a.onload=this.Oa.bind(this);this.a.onreadystatechange=this.Sa.bind(this);this.a.onerror=this.jb.bind(this);this.a.ontimeout=this.Xa.bind(this);for(ek in this.b.b)this.a.setRequestHeader(ek,this.b.b[ek]);this.a.send(this.b.body);return this.c;};function re(dk,ek,fk){ek=Error(ek);ek.type=fk;ek.status=dk.a.status;ek.url=dk.url;ek.method=dk.b.method;ek.body=dk.b.body;ek.mb=dk.a;return ek;}j.Oa=function(dk){this.f&&this.f.sample(Date.now()-this.i,dk.loaded);dk=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),pe(this)):this.h<this.b.a&&-1===dk.indexOf(this.a.status)?se(this):(dk=re(this,"HTTP error.","net"),this.c.reject(dk),pe(this));};j.Sa=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.W=Date.now()-this.i,this.b.i)){var dk=Date.parse(this.a.getResponseHeader("Date"));dk&&(v=dk-Date.now());}};j.jb=function(){var dk=re(this,"Network failure.","net");this.c.reject(dk);pe(this);};j.Xa=function(){if(this.h<this.b.a){se(this);}else{var dk=re(this,"Request timed out.","net");this.c.reject(dk);pe(this);}};function se(dk){qe(dk);i.setTimeout(dk.Fa.bind(dk),dk.g*(1+.5*(2*Math.random()-1)));dk.g*=2;}function te(dk,ek,fk,gk){this.b=ek;this.g=fk||0;this.f=null!=gk?gk:null;this.c=this.a=null;this.i=dk;}function ue(dk,ek){return dk&&0!==dk.length?dk.map(function(fk){return fk.resolve(ek);}):[ek];}function ve(dk,ek,fk){if(dk.a)return dk.a;dk.a=we(dk,0,ek||new oe(),fk);return dk.a;}te.prototype.h=function(){if(this.c){this.a=null;var dk=this.c;if(dk.a&&dk.a.readyState!=XMLHttpRequest.DONE){dk.a.abort();var ek=re(dk,"Request aborted.","aborted");dk.c.reject(ek);pe(dk);}this.c=null;}};function we(dk,ek,fk,gk){var hk=dk.b[ek].toString();if(dk.g||dk.f){var ik=dk.b[ek].H;!ik.endsWith("fbcdn.net")||ik.startsWith("interncache")||ik.endsWith("ak.fbcdn.net")?fk.b.Range="bytes="+(dk.g+"-"+(null!=dk.f?dk.f:"")):hk+="&bytestart="+dk.g+"&byteend="+dk.f;}dk.i&&(hk=dk.i(hk,fk.b)||hk);dk.c=new ne(hk,fk);gk&&(dk.c.f=gk);hk=dk.c.Fa().then(vb(dk,function(jk){this.c=this.a=null;jk.response.W=jk.W;return Promise.resolve(jk.response);}));return hk=hk.catch(vb(dk,function(jk){if(this.a&&ek+1<this.b.length)return this.a=we(this,ek+1,fk,gk);this.a=this.c=null;return Promise.reject(jk);}));}te.prototype.clone=function(){return new te(this.i,this.b.map(function(dk){return dk.clone();}),this.g,this.f);};te.prototype.toString=function(){return this.b[0].toString();};function xe(dk,ek,fk){this.b=dk;this.a=ek;this.url=fk;}function ye(dk,ek){for(var fk=dk.length-1;0<=fk;--fk){var gk=dk[fk];if(ek>=gk.b&&(null==gk.a||ek<gk.a))return fk;}return -1;}function ze(dk,ek){return dk.map(function(fk){return new xe(fk.b+ek,null!=fk.a?fk.a+ek:null,fk.url);});}function af(){}af.prototype.parse=function(dk,ek,fk,gk){var hk=null;try{var jk,kk=new cb(ek);if(440786851!=eb(kk).id){jk=null;}else{var lk=eb(kk);if(408125543!=lk.id){jk=null;}else{var mk=lk.a.byteOffset,nk,ok=new cb(lk.a);for(ek=null;y(ok.a);){var pk=eb(ok);if(357149030==pk.id){ek=pk;break;}}if(ek){for(var qk=new cb(ek.a),ok=1e+06;y(qk.a);){var rk=eb(qk);if(2807729==rk.id){ok=hb(rk);break;}}nk=ok/1e+09;}else nk=null;jk=nk?{fb:mk,kb:nk}:null;}}if(jk){var sk=eb(new cb(dk));if(475249515!=sk.id){hk=null;}else{var tk=jk.fb,uk=jk.kb;dk=[];var vk=new cb(sk.a);for(jk=sk=-1;y(vk.a);){var wk=eb(vk);if(187==wk.id){var xk,yk=new cb(wk.a),zk=eb(yk);if(179!=zk.id){xk=null;}else{var al=hb(zk),bl=eb(yk);if(183!=bl.id){xk=null;}else{for(var cl=new cb(bl.a),mk=0;y(cl.a);){var dl=eb(cl);if(241==dl.id){mk=hb(dl);break;}}xk={lb:al,eb:mk};}}if(xk){var el=uk*xk.lb,fl=tk+xk.eb;if(0<=sk){var gl=new te(gk,fk,jk,fl-1);dk.push(new xe(sk,el,gl));}sk=el;jk=fl;}}}0<=sk&&(gl=new te(gk,fk,jk,null),dk.push(new xe(sk,null,gl)));hk=dk;}}else hk=null;}catch(ik){if(!(ik instanceof RangeError))throw ik;}return hk;};function bf(dk){this.a=dk;}bf.prototype.destroy=function(){this.a&&(this.a.h(),this.a=null);};bf.prototype.create=function(){return this.a?ve(this.a):Promise.resolve(null);};function cf(dk){this.a=dk;this.pa=0;}cf.prototype.destroy=function(){this.a=null;};cf.prototype.length=function(){return this.a.length;};function df(dk){if(0==dk.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return dk.a[0];}function ef(dk){if(0==dk.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return dk.a[dk.a.length-1];}cf.prototype.get=function(dk){if(0>dk||dk>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[dk];};function ff(dk,ek){var fk=ye(dk.a,ek);return 0<=fk?dk.a[fk]:null;}function gf(dk,ek){var fk=ek-dk.pa;0!=fk&&(dk.a=ze(dk.a,fk),dk.pa=ek);}function hf(){this.b=jf++;this.id=this.L=this.F=null;this.h=0;this.height=this.width=this.bandwidth=null;this.f=this.c="";this.g=[];this.J=false;this.a=true;}var jf=0;hf.prototype.destroy=function(){this.F&&(this.F.destroy(),this.F=null);this.L&&(this.L.destroy(),this.L=null);};function kf(dk){var ek=dk.c||"";dk.f&&(ek+='; codecs="'+dk.f+'"');return ek;}function lf(){this.b=mf++;this.id=null;this.contentType=this.lang="";this.f=false;this.a=[];this.c=[];}var mf=0;lf.prototype.destroy=function(){for(var dk=0;dk<this.a.length;++dk)this.a[dk].destroy();this.c=this.a=null;};function nf(dk){for(var ek=[],fk=0;fk<dk.c.length;++fk){var gk=new qf();gk.id=dk.b;gk.a=dk.c[fk];gk.contentType=dk.contentType;gk.b=dk.a.length?kf(dk.a[0]):"";ek.push(gk);}return ek;}function of(){this.id=null;this.start=0;this.b=null;this.a=[];}of.prototype.destroy=function(){for(var dk=0;dk<this.a.length;++dk)this.a[dk].destroy();this.a=null;};function pf(){this.b=false;this.g=this.h=this.f=null;this.c=0;this.a=[];}pf.prototype.destroy=function(){for(var dk=0;dk<this.a.length;++dk)this.a[dk].destroy();this.a=null;};function qf(){this.id=0;this.a=null;this.b=this.contentType="";}function rf(){}rf.prototype.parse=function(dk,ek,fk,gk){var hk=null;try{dk:{var jk=[],kk=new w(dk),lk=aa(kk);if(1936286840!=aa(kk)){hk=null;}else{1==lk&&(lk=ba(kk));var mk=z(kk);da(kk,3);da(kk,4);var nk=aa(kk);if(0==nk){hk=null;}else{var ok,pk;0==mk?(ok=aa(kk),pk=aa(kk)):(ok=ba(kk),pk=ba(kk));da(kk,2);var qk=kk.b.getUint16(kk.a,kk.c);kk.a+=2;dk=ok;ek=ek+lk+pk;for(lk=0;lk<qk;lk++){var rk=aa(kk);pk=(rk&2147483648)>>>31;var mk=rk&2147483647,sk=aa(kk);aa(kk);if(1==pk){hk=null;break dk;}var tk=new te(gk,fk,ek,ek+mk-1);jk.push(new xe(dk/nk,(dk+sk)/nk,tk));dk+=sk;ek+=mk;}hk=jk;}}};}catch(ik){if(!(ik instanceof RangeError))throw ik;}return hk;};function sf(dk){this.b=dk;this.a=null;}sf.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};sf.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var dk=new xe(0,null,this.b);this.a=new cf([dk]);return Promise.resolve(this.a);};function tf(dk,ek){mb.call(this,dk);this.b=ek;this.h=true;this.g=this.f=null;this.c=new u();this.a=null;}m(tf,mb);tf.prototype.A=function(){};tf.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.s=this.b=this.f=this.g=this.a=this.c=null;};j=tf.prototype;j.ma=function(){return this.f;};j.za=function(){return this.g;};j.Ga=function(){return this.c;};j.Aa=function(){return true;};j.oa=function(dk){dk.F.create().then(vb(this,function(ek){if(this.b){if(0==ek.length())return Promise.reject(Error("No subtitles URL available."));var fk=this.f;this.f=dk;this.g=ek;ek=df(ek).url.b[0].toString();var gk=this.ta();this.a&&(this.na(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=ek;this.na(gk);ek=ia({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:dk.bandwidth});this.dispatchEvent(ek);fk||this.c.resolve(0);}}));};j.Ca=function(){};j.Da=function(){return true;};j.na=function(dk){this.h=dk;this.a&&(this.a.track.mode=dk?"showing":"disabled");};j.ta=function(){return this.h;};j.va=function(){return 0;};function uf(dk,ek,fk,gk,hk){mb.call(this,dk);this.c=ek;this.a=new yc(fk,gk,hk);this.G=0;this.v=this.B=this.b=null;this.C=false;this.g=null;this.o=false;this.j=null;this.i=false;this.h=new u();this.l=this.f=false;this.D=0;this.u=15;this.w=false;}m(uf,mb);uf.prototype.A=function(dk){null!=dk.initialStreamBufferSize&&(this.D=Number(dk.initialStreamBufferSize));null!=dk.streamBufferSize&&(this.u=Number(dk.streamBufferSize));null!=dk.segmentRequestTimeout&&(this.a.s=Number(dk.segmentRequestTimeout));};uf.prototype.destroy=function(){bg(this);this.h.destroy();this.b=this.h=null;this.a.destroy();this.s=this.c=this.a=null;};j=uf.prototype;j.ma=function(){return this.b;};j.za=function(){return this.B;};j.Ga=function(dk){this.f||dk.then(function(){this.f=true;this.g||ag(this,0);}.bind(this)).catch(function(){});return this.h;};j.Aa=function(){return this.l;};j.oa=function(dk,ek,fk){dk!=this.b&&(this.v=dk.L.create(),dk.F.create().then(vb(this,function(gk){if(this.c){var hk=this.b;this.b=dk;this.B=gk;this.C=true;this.o||(hk?ek&&vf(this,true,fk):ag(this,0));}})).catch(vb(this,function(gk){"aborted"!=gk.type&&(this.f?(gk=ja(gk),this.dispatchEvent(gk)):this.h.reject(gk));})));};j.Ca=function(){return vf(this,false);};function vf(dk,ek,fk){dk.b&&!dk.o&&(dk.o=true,bg(dk),fd(dk.a).then(vb(dk,function(){var gk=this.c.currentTime;if(!ek&&0<ad(this.a,gk)&&0<=ye(this.a.b,gk))return Promise.resolve();if(fk)return ed(this.a,this.c.currentTime+fk);this.w=true;return dd(this.a);})).then(vb(dk,function(){this.o=false;ag(this,0);})).catch(vb(dk,function(gk){this.o=false;this.f?(gk=ja(gk),this.dispatchEvent(gk)):this.h.reject(gk);})));}j.Da=function(dk){return 0<ad(this.a,dk)&&0<=ye(this.a.b,dk);};j.na=function(){};j.ta=function(){return true;};j.va=function(){return this.i?this.u:Math.min(this.D,this.u);};j.Za=function(){if(this.i&&!this.f){this.g=null;}else{var dk;if(dk=this.f&&!this.l)dk=1<this.a.c.buffered.length?true:false;if(dk){vf(this,true);}else{this.g=null;dk=this.b;var ek=this.B,fk=this.c.currentTime;ad(this.a,this.i?fk:fk+(this.j||0))>=this.va()?(xf(this),ag(this,1000/(5*(Math.abs(this.c.playbackRate)||1)))):(ek=wf(this,fk,ek))?(ek=cd(this.a,ek,dk.h,this.v),this.v=null,this.C&&(this.C=false,yf(this,dk)),this.l=false,ek.then(vb(this,function(gk){var hk=gk.pa;gk=gk.Ka;this.i||(this.G=gk);null==this.j&&(this.j=hk);this.w&&0<ad(this.a,fk)&&(this.w=false,this.c.currentTime+=.001);ag(this,0);})).catch(vb(this,function(gk){if("aborted"!=gk.type){var hk=[0,404,410];"net"==gk.type&&-1!=hk.indexOf(gk.mb.status)&&this.b&&ag(this,1000);gk=ja(gk);this.dispatchEvent(gk);}}))):(xf(this),this.f&&!this.l&&(this.l=true,zf(this)),ag(this,200));}}};function wf(dk,ek,fk){dk=dk.a;var gk=dk.b.length;dk=0<gk?dk.b[gk-1]:null;return null!=dk?null!=dk.a?ff(fk,dk.a):null:ff(fk,ek)||(fk.length()?ef(fk):null);}function xf(dk){if(!dk.i&&null!=dk.j){dk.i=true;var ek=dk.a,fk=dk.j,gk=fk-ek.o;0!=gk&&(ek.b=ze(ek.b,gk),ek.o=fk);dk.h.resolve(dk.j);}}function yf(dk,ek){var fk;fk=ek.c.split("/")[0];fk=ia({type:"adaptation",bubbles:true,contentType:fk,size:"video"!=fk?null:{width:ek.width,height:ek.height},bandwidth:ek.bandwidth});dk.dispatchEvent(fk);}function zf(dk){var ek=ia({type:"ended"});dk.dispatchEvent(ek);}function ag(dk,ek){dk.g=i.setTimeout(dk.Za.bind(dk),ek);}function bg(dk){null!=dk.g&&(i.clearTimeout(dk.g),dk.g=null);}j.ua=function(){return this.G;};function cg(dk,ek,fk,gk,hk){this.b=new te(null,[new zd(dk)]);this.a=new oe();this.a.body=ek;this.a.method=fk;this.a.a=3;this.a.h=gk;this.a.c=0;dk=hk||{};for(var ik in dk)this.a.b[ik]=dk[ik];}function dg(dk){return ve(dk.b,dk.a).then(function(ek){return Promise.resolve(new Uint8Array(ek));});}function eg(dk,ek,fk){mb.call(this,dk);this.b=ek;this.j=fk;this.a=this.f=null;this.i=new rb();this.g={};this.h=[];this.o=0;this.c=new u();this.l=null;}m(eg,mb);eg.prototype.destroy=function(){this.s=null;for(var dk=0;dk<this.h.length;++dk)this.h[dk].close().catch(function(){});this.h=[];this.g=this.a=this.f=null;this.c.destroy();this.c=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.b=this.j=null;};eg.prototype.initialize=function(){var dk=new ib(),ek;ek=this.j;if(ek.w){ek=ek.a.a[0];for(var fk=[],gk=0;gk<ek.a.length;++gk)fk.push.apply(fk,nf(ek.a[gk]));ek=fk;}else ek=[];for(fk=0;fk<ek.length;++fk)gk=ek[fk],gk.a.a||gk.b&&!vi(gk.b)||dk.push(gk.contentType,gk);for(var fk={},gk=false,hk=0;hk<ek.length;++hk){var ik=ek[hk];if(ik.a.a&&!dk.a.hasOwnProperty(ik.contentType)){var jk=ik.a.a,kk=fk[jk];kk||(kk=ik.a,kk={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:kk.i?"required":"optional",persistentState:kk.l?"required":"optional",sessionTypes:["temporary"]},fk[jk]=kk);if(ik.b&&(jk=ik.contentType+"Capabilities",jk in kk)){gk=true;kk[jk]||(kk[jk]=[]);var lk;"audio"==ik.contentType?lk=ik.a.h:"video"==ik.contentType&&(lk=ik.a.s);kk[jk].push({contentType:ik.b,robustness:lk});}}}if(!gk)if(ek.length){this.a=ek[0].a;}else throw dk=Error("No DrmInfo exists!"),dk.type="drm",dk;if(0==Object.keys(fk).length)return ij(this.j,dk),this.c.resolve(),Promise.resolve();lk=new u();fk=fg(fk,lk);fk=fk.then(this.Ja.bind(this,ek,dk));fk=fk.then(this.gb.bind(this));lk.reject(null);return fk;};function fg(dk,ek){for(var fk in dk)ek=ek.catch(function(gk,hk){return navigator.requestMediaKeySystemAccess(gk,[hk]);}.bind(null,fk,dk[fk]));return ek;}j=eg.prototype;j.Ja=function(dk,ek,fk){if(!this.b)return gg();for(var gk=fk.keySystem,hk=fk.getConfiguration(),ik=["audio","video"],jk=0;jk<ik.length;++jk){var kk=ik[jk];if(!ek.a.hasOwnProperty(kk)){var lk=hk[kk+"Capabilities"];if(lk&&lk.length){for(var lk=lk[0],mk=[],nk={},ok=0;ok<dk.length;++ok){var pk=dk[ok];if(pk.a.a==gk&&pk.b==lk.contentType&&!(pk.id in nk)){mk.push(pk);nk[pk.id]=true;var qk;if(this.a){qk=this.a;var pk=pk.a,rk=new wc();rk.a=qk.a;rk.j=qk.j;rk.o=qk.o;rk.f=qk.f;rk.g=qk.g;rk.i=qk.i;rk.l=qk.l;rk.h=qk.h;rk.s=qk.s;rk.c=qk.c?new Uint8Array(qk.c.buffer):null;xc(rk,qk.b);xc(rk,pk.b);qk=rk;}else qk=pk.a;this.a=qk;}}ek.a[kk]=mk;}}}ij(this.j,ek);return fk.createMediaKeys();};j.gb=function(dk){if(!this.b)return gg();this.f=dk;return this.b.setMediaKeys(this.f).then(vb(this,function(){return this.b?this.a.c?this.f.setServerCertificate(this.a.c):Promise.resolve():gg();})).then(vb(this,function(){if(!this.b)return gg();for(var ek=0;ek<this.a.b.length;++ek){var fk=this.a.b[ek];this.Ba({type:"encrypted",initDataType:fk.initDataType,initData:fk.initData});}0==this.a.b.length&&sb(this.i,this.b,"encrypted",this.Ba.bind(this));}));};function gg(){var dk=Error("EmeManager destroyed");dk.type="destroy";return Promise.reject(dk);}j.Ba=function(dk){var ek=new Uint8Array(dk.initData),fk=Array.prototype.join.apply(ek);if(!this.g[fk]){try{var hk=hg(this);}catch(gk){hk=ja(gk);this.dispatchEvent(hk);this.c.reject(gk);return;}dk=hk.generateRequest(dk.initDataType,dk.initData);this.g[fk]=true;dk.catch(vb(this,function(ik){if(this.g){this.g[fk]=false;var jk=ja(ik);this.dispatchEvent(jk);this.c.reject(ik);}}));this.h.push(hk);}};function hg(dk){var ek=null,ek=dk.f.createSession();sb(dk.i,ek,"message",dk.Va.bind(dk));sb(dk.i,ek,"keystatuseschange",dk.Na.bind(dk));return ek;}j.Va=function(dk){ig(this,dk.target,this.a,dk.message);};j.Na=function(dk){dk=dk.target.keyStatuses;for(var ek={},fk=dk.keys(),gk=fk.next();!gk.done;gk=fk.next()){var hk=ab(new Uint8Array(gk.value)),gk=dk.get(gk.value);ek[hk]=gk;}lj(this.j,ek);};function ig(dk,ek,fk,gk){gk=jg(fk,gk);dg(new cg(gk.url,gk.body,gk.method,fk.o,gk.headers)).then(vb(dk,function(hk){fk.f&&(hk=fk.f(hk));return ek.update(hk);})).then(vb(dk,function(){var hk=ia({type:"sessionReady",detail:ek});this.dispatchEvent(hk);this.o++;this.o>=this.h.length&&this.c.resolve();})).catch(vb(dk,function(hk){hk.qb=ek;hk=ja(hk);this.dispatchEvent(hk);}));}function jg(dk,ek){var fk={url:dk.j,body:ek.slice(0),method:"POST",headers:{}};if(!dk.g)return fk;dk.g(fk);fk.url=ra(fk,"url");if(null==fk.url)throw Error("'url' cannot be null.");if(!(fk.body instanceof ArrayBuffer||"string"==typeof fk.body||null==fk.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");fk.method=ra(fk,"method");if("GET"!=fk.method&&"POST"!=fk.method)throw Error("'method' must be either 'GET' or 'POST'.");fk.headers=ta(fk,"headers",Object);if(null==fk.headers)throw Error("'headers' cannot be null.");return fk;}function kg(dk,ek){var fk=(new DOMParser()).parseFromString(dk,"text/xml");if(!fk)return null;ek||(ek=[new zd("")]);return ih({m:ek},fk,lg);}l("shaka.dash.mpd.parseMpd",kg);function lg(){this.id=this.url=null;this.type="static";this.b=this.j=this.m=null;this.g=5;this.i=this.c=this.f=null;this.h=1;this.a=[];}function mg(){this.g=this.f=this.c=this.m=this.a=this.start=this.id=null;this.b=[];}function ng(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.m=null;this.j=[];this.a=[];}function og(){this.value=null;}function pg(){this.contentType=this.lang=this.id=null;}function qg(){this.a=this.b=this.g=this.m=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function rg(){this.value=this.schemeIdUri=this.b=null;this.children=[];this.a=this.pssh=null;}function sg(){this.parsedPssh=this.psshBox=null;}function tg(){this.url=null;}function ug(){this.url=null;}function vg(){this.m=null;this.g=1;this.c=this.b=this.a=this.f=null;}vg.prototype.clone=function(){var dk=new vg();dk.m=mh(this.m);dk.g=this.g;dk.f=this.f;dk.a=nh(this.a);dk.b=nh(this.b);dk.c=nh(this.c);return dk;};function wg(){this.a=this.url=null;}wg.prototype.clone=function(){var dk=new wg();dk.url=mh(this.url);dk.a=nh(this.a);return dk;};function xg(){this.a=this.url=null;}xg.prototype.clone=function(){var dk=new xg();dk.url=mh(this.url);dk.a=nh(this.a);return dk;};function yg(){this.m=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}yg.prototype.clone=function(){var dk=new yg();dk.m=mh(this.m);dk.a=this.a;dk.g=this.g;dk.c=this.c;dk.i=this.i;dk.h=nh(this.h);dk.b=mh(this.b)||[];dk.f=nh(this.f);return dk;};function zg(){this.a=this.b=null;}zg.prototype.clone=function(){var dk=new zg();dk.b=mh(this.b);dk.a=nh(this.a);return dk;};function ah(){this.b=1;this.a=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}ah.prototype.clone=function(){var dk=new ah();dk.b=this.b;dk.i=this.i;dk.a=this.a;dk.j=this.j;dk.h=this.h;dk.f=this.f;dk.g=this.g;dk.c=nh(this.c);return dk;};function bh(){this.a=[];}bh.prototype.clone=function(){var dk=new bh();dk.a=mh(this.a)||[];return dk;};function ch(){this.c=this.a=this.b=null;}ch.prototype.clone=function(){var dk=new ch();dk.b=this.b;dk.a=this.a;dk.c=this.c;return dk;};function dh(dk,ek){this.aa=dk;this.end=ek;}dh.prototype.clone=function(){return new dh(this.aa,this.end);};lg.TAG_NAME="MPD";mg.TAG_NAME="Period";ng.TAG_NAME="AdaptationSet";og.TAG_NAME="Role";pg.TAG_NAME="ContentComponent";qg.TAG_NAME="Representation";rg.TAG_NAME="ContentProtection";sg.TAG_NAME="cenc:pssh";tg.TAG_NAME="BaseURL";ug.TAG_NAME="Location";vg.TAG_NAME="SegmentBase";wg.TAG_NAME="RepresentationIndex";xg.TAG_NAME="Initialization";yg.TAG_NAME="SegmentList";zg.TAG_NAME="SegmentURL";ah.TAG_NAME="SegmentTemplate";bh.TAG_NAME="SegmentTimeline";ch.TAG_NAME="S";lg.prototype.parse=function(dk,ek){this.url=dk.m;this.id=oh(ek,"id",vh);this.type=oh(ek,"type",vh)||"static";this.b=oh(ek,"mediaPresentationDuration",qh);this.g=oh(ek,"minBufferTime",qh,this.g);this.f=oh(ek,"minimumUpdatePeriod",qh,this.f);this.c=oh(ek,"availabilityStartTime",ph,this.c);this.i=oh(ek,"timeShiftBufferDepth",qh,this.i);this.h=oh(ek,"suggestedPresentationDelay",qh,this.h);var fk=dk.m,gk=kh(this,ek,tg);this.m=fh(fk,gk);if(gk=ih(this,ek,ug))this.j=gh(fk,gk.url);this.a=kh(this,ek,mg);};mg.prototype.parse=function(dk,ek){this.id=oh(ek,"id",vh);this.start=oh(ek,"start",qh);this.a=oh(ek,"duration",qh);var fk=kh(this,ek,tg);this.m=fh(dk.m,fk);this.c=ih(this,ek,vg);this.f=ih(this,ek,yg);this.g=ih(this,ek,ah);this.b=kh(this,ek,ng);eh(this);};function eh(dk){for(var ek=[],fk=0;fk<dk.b.length;++fk){var gk=dk.b[fk];null!=gk.group&&(ek[gk.group]=true);}for(fk=0;fk<dk.b.length;++fk)if(gk=dk.b[fk],null==gk.group){for(var hk=1;1==ek[hk];)++hk;ek[hk]=true;gk.group=hk;}}ng.prototype.parse=function(dk,ek){var fk=ih(this,ek,pg)||{},gk=ih(this,ek,og);this.id=oh(ek,"id",vh);this.group=oh(ek,"group",uh);this.lang=oh(ek,"lang",vh,fk.lang);this.contentType=oh(ek,"contentType",vh,fk.contentType);this.width=oh(ek,"width",th);this.height=oh(ek,"height",th);this.b=oh(ek,"mimeType",vh);this.i=oh(ek,"codecs",vh);this.c=gk&&"main"==gk.value;this.lang&&(this.lang=na(this.lang));fk=kh(this,ek,tg);this.m=fh(dk.m,fk);this.j=kh(this,ek,rg);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=dk.c?hh(this,ek,dk.c):ih(this,ek,vg);this.g=dk.f?hh(this,ek,dk.f):ih(this,ek,yg);this.h=dk.g?hh(this,ek,dk.g):ih(this,ek,ah);this.a=kh(this,ek,qg);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};og.prototype.parse=function(dk,ek){this.value=oh(ek,"value",vh);};pg.prototype.parse=function(dk,ek){this.id=oh(ek,"id",vh);this.lang=oh(ek,"lang",vh);this.contentType=oh(ek,"contentType",vh);this.lang&&(this.lang=na(this.lang));};qg.prototype.parse=function(dk,ek){this.id=oh(ek,"id",vh);this.bandwidth=oh(ek,"bandwidth",th);this.width=oh(ek,"width",th,dk.width);this.height=oh(ek,"height",th,dk.height);this.f=oh(ek,"mimeType",vh,dk.b);this.h=oh(ek,"codecs",vh,dk.i);this.lang=dk.lang;var fk=kh(this,ek,tg);this.m=fh(dk.m,fk);this.c=kh(this,ek,rg);this.g=dk.f?hh(this,ek,dk.f):ih(this,ek,vg);this.b=dk.g?hh(this,ek,dk.g):ih(this,ek,yg);this.a=dk.h?hh(this,ek,dk.h):ih(this,ek,ah);0==this.c.length&&(this.c=dk.j);};rg.prototype.parse=function(dk,ek){this.b=ek;this.schemeIdUri=oh(ek,"schemeIdUri",vh);this.value=oh(ek,"value",vh);var fk=oh(ek,"cenc:default_KID",vh);fk&&(this.a=fk.replace(/[-]/g,""));this.pssh=ih(this,ek,sg);this.children=Array.prototype.slice.call(ek.childNodes);};sg.prototype.parse=function(dk,ek){var fk=lh(ek);if(fk){this.psshBox=za(fk);try{this.parsedPssh=new xb(this.psshBox);}catch(gk){if(!(gk instanceof RangeError))throw gk;}}};tg.prototype.parse=function(dk,ek){this.url=lh(ek);};ug.prototype.parse=function(dk,ek){this.url=lh(ek);};vg.prototype.parse=function(dk,ek){this.m=dk.m||this.m;this.g=oh(ek,"timescale",th,this.g);this.f=oh(ek,"presentationTimeOffset",uh,this.f);this.a=oh(ek,"indexRange",rh,this.a);this.b=ih(this,ek,wg)||this.b;this.c=ih(this,ek,xg)||this.c;};wg.prototype.parse=function(dk,ek){var fk=oh(ek,"sourceURL",vh);this.url=gh(dk.m,fk);this.a=oh(ek,"range",rh,nh(dk.a));};xg.prototype.parse=function(dk,ek){var fk=oh(ek,"sourceURL",vh);this.url=gh(dk.m,fk);this.a=oh(ek,"range",rh);};yg.prototype.parse=function(dk,ek){this.m=dk.m||this.m;this.a=oh(ek,"timescale",th,this.a);this.g=oh(ek,"presentationTimeOffset",uh,this.g);this.c=oh(ek,"duration",th,this.c);this.i=oh(ek,"startNumber",uh,this.i);this.h=ih(this,ek,xg)||this.h;var fk=kh(this,ek,zg);this.b=fk&&0<fk.length?fk:this.b;this.f=ih(this,ek,bh)||this.f;};zg.prototype.parse=function(dk,ek){var fk=oh(ek,"media",vh);this.b=gh(dk.m,fk);this.a=oh(ek,"mediaRange",rh);};ah.prototype.parse=function(dk,ek){this.b=oh(ek,"timescale",th,this.b);this.i=oh(ek,"presentationTimeOffset",uh,this.i);this.a=oh(ek,"duration",th,this.a);this.j=oh(ek,"startNumber",uh,this.j);this.h=oh(ek,"media",vh,this.h);this.f=oh(ek,"index",vh,this.f);this.g=oh(ek,"initialization",vh,this.g);this.c=ih(this,ek,bh)||this.c;};bh.prototype.parse=function(dk,ek){this.a=kh(this,ek,ch);};ch.prototype.parse=function(dk,ek){this.b=oh(ek,"t",uh);this.a=oh(ek,"d",uh);this.c=oh(ek,"r",sh);};function fh(dk,ek){if(!ek||0===ek.length)return dk;for(var fk=[],gk=0;gk<ek.length;gk++){var hk=ek[gk].url;null==dk||0===dk.length?fk.push(new zd(hk)):(hk=gh(dk.slice(0,1),hk),fk.push(hk[0]));}return fk;}function gh(dk,ek){if(!ek)return dk;var fk=new zd(ek);return dk?dk.map(function(gk){return gk.resolve(fk);}):[fk];}function hh(dk,ek,fk){var gk=nh(fk);(ek=jh(ek,fk.constructor.TAG_NAME))&&gk.parse(dk,ek);return gk;}function ih(dk,ek,fk){var gk=null;if(ek=jh(ek,fk.TAG_NAME))gk=new fk(),gk.parse(dk,ek);return gk;}function jh(dk,ek){for(var fk=null,gk=0;gk<dk.childNodes.length;gk++)if(dk.childNodes[gk].tagName==ek){if(fk)return null;fk=dk.childNodes[gk];}return fk;}function kh(dk,ek,fk){for(var gk=[],hk=0;hk<ek.childNodes.length;hk++)if(ek.childNodes[hk].tagName==fk.TAG_NAME){var ik=new fk();ik.parse.call(ik,dk,ek.childNodes[hk]);gk.push(ik);}return gk;}function lh(dk){dk=dk.firstChild;return dk.nodeType!=Node.TEXT_NODE?null:dk.nodeValue;}function mh(dk){return dk?dk.map(function(ek){return ek.clone();}):null;}function nh(dk){return dk?dk.clone():null;}function oh(dk,ek,fk,gk){dk=fk(dk.getAttribute(ek));return null!=dk?dk:void 0!==gk?gk:null;}function ph(dk){if(!dk)return null;dk=Date.parse(dk);return isNaN(dk)?null:Math.floor(dk/1000);}function qh(dk){if(!dk)return null;var ek=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(dk);if(!ek)return null;dk=0;var fk=uh(ek[1]);fk&&(dk+=31536000*fk);(fk=uh(ek[2]))&&(dk+=2592000*fk);(fk=uh(ek[3]))&&(dk+=86400*fk);(fk=uh(ek[4]))&&(dk+=3600*fk);(fk=uh(ek[5]))&&(dk+=60*fk);ek=i.parseFloat(ek[6]);(ek=isNaN(ek)?null:ek)&&(dk+=ek);return dk;}function rh(dk){var ek=/([0-9]+)-([0-9]+)/.exec(dk);if(!ek)return null;dk=uh(ek[1]);if(null==dk)return null;ek=uh(ek[2]);return null==ek?null:new dh(dk,ek);}function sh(dk){dk=i.parseInt(dk,10);return isNaN(dk)?null:dk;}function th(dk){dk=i.parseInt(dk,10);return 0<dk?dk:null;}function uh(dk){dk=i.parseInt(dk,10);return 0<=dk?dk:null;}function vh(dk){return dk;}function wh(dk,ek){this.a=new oe();this.a.f="text";this.a.a=3;this.a.c=1000*(null!=ek?ek:0);this.a.i=true;this.b=dk;}function xh(dk){var ek=dk.b;return ve(ek,dk.a).then(function(fk){if(fk=kg(fk,ek.b))return Promise.resolve(fk);fk=Error("MPD parse failure.");fk.type="mpd";return Promise.reject(fk);});}function yh(dk,ek,fk,gk){if(!ek.a)return null;var hk=ek.a.h;if(!hk)return ek.m?new te(dk,ek.m,0,null):null;fk=zh(hk,ek.id,fk,ek.bandwidth,gk);if(!fk)return null;ek=ue(ek.m,fk);return new te(dk,ek,0,null);}function zh(dk,ek,fk,gk,hk){var ik={RepresentationID:ek,Number:fk,Bandwidth:gk,Time:hk};dk=dk.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(kk,lk,mk){if("$$"==kk)return "$";var nk=ik[lk];if(null==nk)return kk;"RepresentationID"==lk&&mk&&(mk=void 0);kk=nk.toString();mk=i.parseInt(mk,10)||1;mk=Math.max(0,mk-kk.length);return Array(mk+1).join("0")+kk;});try{return new zd(dk);}catch(jk){if(jk instanceof URIError)return null;throw jk;}}function ai(dk,ek,fk){var gk=0;ek*=fk;dk=dk.a;fk=[];for(var hk=0;hk<dk.length&&dk[hk].a;++hk){var ik=dk[hk].b,ik=null!=ik?ik:gk,jk=dk[hk].c||0;0>jk&&(jk=dk[hk].a,jk=hk+1===dk.length?Math.ceil((dk[0].b+ek-ik)/jk)-1:Math.ceil((dk[hk+1].b-ik)/jk)-1);0<fk.length&&ik!=gk&&(fk[fk.length-1].end=ik);for(var kk=0;kk<=jk;++kk)gk=ik+dk[hk].a,fk.push({start:ik,end:gk}),ik=gk;}return fk;}function bi(dk,ek,fk,gk,hk){this.f=ek;this.b=fk;this.a=null;this.c=hk;}bi.prototype.destroy=function(){this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};bi.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var dk=this.b.a,ek=ai(dk.c,dk.b||1,this.f.a||0),fk=[],gk=0;gk<ek.length;++gk){var hk=ek[gk].start,ik=hk/dk.b,jk=ek[gk].end/dk.b,hk=yh(this.c,this.b,gk+dk.j,hk);if(!hk)return dk=Error("Failed to generate media URL."),dk.type="dash",Promise.reject(dk);var kk=(dk.i||0)/dk.b;fk.push(new xe(ik-kk,jk-kk,hk));}this.a=new cf(fk);return Promise.resolve(this.a);};function ci(dk,ek,fk,gk,hk){this.b=ek;this.f=fk;this.a=null;this.c=hk;}ci.prototype.destroy=function(){this.c=this.f=this.b=null;this.a&&(this.a.destroy(),this.a=null);};ci.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var dk=this.f.b,ek=[];dk.f&&(ek=ai(dk.f,dk.a||1,this.b.a||0));var fk=0;dk.c&&dk.i?fk=dk.c*dk.i:0<ek.length&&(fk=ek[0].start-(dk.g||0));var gk=fk,hk=dk.b.length;0<ek.length&&ek.length!=dk.b.length&&(hk=Math.min(ek.length,dk.b.length));for(var ik=[],jk=0;jk<hk;++jk){var kk=dk.b[jk],lk=fk/dk.a,mk=null,nk=null;dk.c?(mk=fk+dk.c,nk=mk/dk.a):0<ek.length?(mk=ek[jk].end-(dk.g||0),nk=mk/dk.a):(nk=lk+this.b.a,mk=nk*dk.a);var fk=mk,mk=0,ok=null;kk.a&&(mk=kk.a.aa,ok=kk.a.end);nk=Math.min(this.b.a+gk/dk.a,nk);ik.push(new xe(lk,nk,new te(this.c,kk.b,mk,ok)));}this.a=new cf(ik);return Promise.resolve(this.a);};function di(dk,ek,fk,gk,hk,ik,jk){this.f=fk;this.a=gk;this.c=hk;this.h=this.b=null;this.g=jk;}di.prototype.destroy=function(){this.g=null;this.a.h();this.a=null;this.c&&(this.c.h(),this.c=null);this.h&&(this.h.destroy(),this.h=null);this.b=null;};di.prototype.create=function(){if(this.b)return this.b;var dk=[ve(this.a)];"webm"==this.f&&dk.push(ve(this.c));return this.b=Promise.all(dk).then(vb(this,function(ek){var fk=ek[0];ek=ek[1]||null;var gk=null;"mp4"==this.f?(gk=new rf(),gk=gk.parse(new DataView(fk),this.a.g,this.a.b,this.g)):"webm"==this.f&&(gk=new af(),gk=gk.parse(new DataView(fk),new DataView(ek),this.a.b,this.g));return gk?Promise.resolve(new cf(gk)):(fk=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),fk.type="stream",Promise.reject(fk));}));};function ei(dk,ek,fk,gk,hk){this.b=ek;this.c=fk;this.a=null;this.f=hk;}ei.prototype.destroy=function(){this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};ei.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var dk,ek=this.c.a;ek:{dk=this.f;for(var fk=this.c,ek=Math.ceil(this.b.a/(ek.a/ek.b)),gk=fk.a,hk=[],ik=0;ik<ek;++ik){var jk=ik+1,kk=(jk-1)*gk.a,lk=kk/gk.b,kk=(kk+gk.a)/gk.b,jk=yh(dk,fk,jk-1+gk.j,(jk-1)*gk.a);if(!jk){dk=null;break ek;}hk.push(new xe(lk,kk,jk));}dk=hk;};dk?(0<dk.length&&(fk=dk[dk.length-1],dk[dk.length-1]=new xe(fk.b,this.b.a,fk.url)),dk=new cf(dk)):dk=null;this.a=dk;return this.a?Promise.resolve(this.a):(dk=Error("Failed to generate SegmentReferences"),dk.type="stream",Promise.reject(dk));};function fi(dk){this.a=dk;}function gi(dk){if(dk.a.length){null==dk.a[0].start&&(dk.a[0].start=0);var ek=function(lk){return 0==lk||!!lk;};"dynamic"==dk.type&&(dk.b=null);ek(dk.b)&&1==dk.a.length&&!ek(dk.a[0].a)&&(dk.a[0].a=dk.b);for(var fk=0,gk=true,hk=0;hk<dk.a.length;++hk){var ik=dk.a[hk-1],jk=dk.a[hk],kk=dk.a[hk+1]||{start:dk.b};!ek(jk.start)&&ik&&ek(ik.start)&&ek(ik.a)&&(jk.start=ik.start+ik.a);!ek(jk.a)&&ek(kk.start)&&(jk.a=kk.start-jk.start);null!=jk.start&&null!=jk.a?fk+=jk.a:gk=false;}ek(dk.b)||(hk=dk.a[dk.a.length-1],gk?dk.b=fk:ek(hk.start)&&ek(hk.a)?dk.b=hk.start+hk.a:"dynamic"!=dk.type&&(dk.b=fk));}}function hi(dk,ek,fk,gk){var hk=new of();hk.id=fk.id;hk.start=fk.start;hk.b=fk.a;var ik=new ib();fk.b.forEach(function(sk){ik.push(sk.contentType||"",sk);});for(var jk=lb(ik),kk=0;kk<jk.length;++kk){var lk=new ib();ik.get(jk[kk]).forEach(function(sk){lk.push(sk.group,sk);});for(var mk=lb(lk),nk=0;nk<mk.length;++nk){var ok=new ib();lk.get(mk[nk]).forEach(function(sk){ok.push(sk.lang,sk);});for(var pk=lb(ok),qk=0;qk<pk.length;++qk){var rk=ok.get(pk[qk]),rk=ii(dk,ek,fk,rk,gk);hk.a.push(rk);}}}return hk;}function ii(dk,ek,fk,gk,hk){n(gk.every(function(qk){return qk.group==gk[0].group&&(qk.lang||"")==(gk[0].lang||"")&&(qk.contentType||"")==(gk[0].contentType||"");}));var ik=new lf(),jk=gk.filter(function(qk){return null!=qk.id;});jk.length==gk.length&&(ik.id=jk.map(function(qk){return qk.id;}).sort().reduce(function(qk,rk){return qk+","+rk;}));ik.lang=gk[0].lang||"";ik.contentType=gk[0].contentType||"";ik.f=gk.some(function(qk){return qk.c;});for(var jk={},kk=0;kk<gk.length;++kk)for(var lk=gk[kk],mk=0;mk<lk.a.length;++mk){var nk=lk.a[mk],ok=li(dk,nk),pk=ik.c.slice(0);ki(ok,pk);0==pk.length&&0<ik.c.length||!(nk=ni(ek,fk,nk,hk))||(ik.a.push(nk),ik.c=pk,jk[nk.b]=lk);}if(ik.c.some(function(qk){return ""==qk.a;}))return ik.a.forEach(function(qk){qk.J=true;}),ik;dk=ji(gk);for(kk=0;kk<ik.a.length;++kk)nk=ik.a[kk],lk=jk[nk.b],lk==dk&&(nk.J=true);return ik;}function ji(dk){for(var ek=null,fk=null,gk=0;gk<dk.length;++gk)for(var hk=dk[gk],ik=0;ik<hk.a.length;++ik){var jk=hk.a[ik],jk=(jk.width||1)*(jk.height||1)*(jk.bandwidth||1);if(null==ek||jk<ek)ek=jk,fk=hk;}return fk;}function ki(dk,ek){if(0==ek.length){Array.prototype.push.apply(ek,dk);}else for(var fk=0;fk<ek.length;++fk){for(var gk=false,hk=0;hk<dk.length;++hk){var ik=ek[fk],jk=dk[hk];if(ik.a==jk.a&&ik.j==jk.j&&ik.o==jk.o&&ik.f==jk.f&&ik.g==jk.g&&ik.i==jk.i&&ik.l==jk.l&&ik.h==jk.h&&ik.s==jk.s&&bb(ik.c,jk.c)){gk=true;break;}}gk||(ek.splice(fk,1),--fk);}}function li(dk,ek){var fk=[];if(0==ek.c.length){fk.push(new wc());}else if(dk.a)for(var gk=0;gk<ek.c.length;++gk)fk.push.apply(fk,mi(dk,ek.c[gk]));return fk;}function mi(dk,ek){var fk=[];if(2==dk.a.length){var gk=dk.a(ek.schemeIdUri,ek.b);if(!(gk&&gk instanceof Array))return [];for(var hk=0;hk<gk.length;++hk){var ik,jk=gk[hk];ik=new wc();if(jk){var kk=ra(jk,"keySystem");if(null!=kk){ik.a=kk;}else throw Error("'keySystem' cannot be null.");var lk=ra(jk,"licenseServerUrl");if(null!=lk){ik.j=lk;}else if(kk)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");kk=sa(jk,"withCredentials","boolean");null!=kk&&(ik.o=kk);kk=ta(jk,"licensePostProcessor",Function);null!=kk&&(ik.f=kk);kk=ta(jk,"licensePreProcessor",Function);null!=kk&&(ik.g=kk);kk=sa(jk,"distinctiveIdentifierRequired","boolean");null!=kk&&(ik.i=kk);kk=sa(jk,"persistentStateRequired","boolean");null!=kk&&(ik.l=kk);kk=ra(jk,"audioRobustness");null!=kk&&(ik.h=kk);kk=ra(jk,"videoRobustness");null!=kk&&(ik.s=kk);kk=ta(jk,"serverCertificate",Uint8Array);null!=kk&&(ik.c=kk);if(kk=ta(jk,"initData",Object)){jk=ta(kk,"initData",Uint8Array);if(null==jk)throw Error("'initData.initData' cannot be null.");kk=ra(kk,"initDataType");if(null==kk)throw Error("'initData.initDataType' cannot be null.");ik.b.push({initData:new Uint8Array(jk.buffer),initDataType:kk});}}0==ik.b.length&&ek.pssh&&ek.pssh.psshBox&&xc(ik,[{initData:ek.pssh.psshBox,initDataType:"cenc"}]);fk.push(ik);}}else{gk=dk.a(ek);if(!(gk&&gk instanceof ud))return [];hk=new wc();hk.a=gk.g;hk.j=gk.j;hk.o=gk.o;hk.f=gk.h;hk.g=gk.i;hk.i=gk.f;hk.l=gk.l;hk.h=gk.c;hk.s=gk.s;hk.c=gk.b?new Uint8Array(gk.b.buffer):null;xc(hk,gk.a);fk.push(hk);}return fk;}function ni(dk,ek,fk,gk){if(!fk.m||0===fk.m.length)return null;var hk=null,ik=1,jk=0;if(fk.g){ek=fk.f.split("/")[1],"mp4"!=ek&&"webm"!=ek?hk=null:(dk=fk.g,"webm"!=ek||dk.c?dk.a||dk.b&&dk.b.a?(hk=dk.b,hk||(hk=new wg(),hk.url=fk.m,hk.a=dk.a?dk.a.clone():null),hk=pi(hk,gk),dk=dk.c?pi(dk.c,gk):null,gk=new di(0,0,ek,hk,dk,0,gk),ek=new bf(dk),dk=new hf(),dk.F=gk,dk.L=ek,hk=dk):hk=null:hk=null),ik=fk.g.g,jk=fk.g.f;}else if(fk.b){dk=fk.b,!dk.c&&!dk.f&&1<dk.b.length?hk=null:dk.c||ek.a||dk.f||1!=dk.b.length?dk.f&&0===dk.f.a.length?hk=null:(dk=dk.h?pi(dk.h,gk):null,gk=new ci(0,ek,fk,0,gk),ek=new bf(dk),dk=new hf(),dk.F=gk,dk.L=ek,hk=dk):hk=null,ik=fk.b.a,jk=fk.b.g;}else if(fk.a){dk:if(hk=fk.a,ik=0+(hk.f?1:0),ik+=hk.c?1:0,ik+=hk.a?1:0,0==ik?ik=false:(1!=ik&&(hk.f?(hk.c=null,hk.a=null):hk.c&&(hk.a=null)),ik=true),ik){ik=null;if(hk.g&&(ik=(hk=fk.a.g)?oi(fk,hk,xg):null,!ik)){hk=null;break dk;}hk=ik?pi(ik,gk):null;ik=fk.a;ik.f?(ek=fk.f.split("/")[1],"mp4"!=ek&&"webm"!=ek?gk=null:"webm"!=ek||hk?yh(gk,fk,1,0)?(dk=(dk=fk.a.f)?oi(fk,dk,wg):null)?(dk=pi(dk,gk),gk=new di(0,0,ek,dk,hk,0,gk)):gk=null:gk=null:gk=null):gk=ik.h?ik.c?new bi(0,ek,fk,0,gk):ik.a?"dynamic"!=dk.type&&null==ek.a?null:new ei(0,ek,fk,0,gk):null:null;gk?(ek=new bf(hk),dk=new hf(),dk.F=gk,dk.L=ek,hk=dk):hk=null;}else hk=null;;ik=fk.a.b;jk=fk.a.i;}else "text"==fk.f.split("/")[0]&&(hk=new hf(),hk.F=new sf(new te(gk,fk.m)));if(!hk)return null;hk.id=fk.id;jk&&(hk.h=-1*jk/ik);hk.bandwidth=fk.bandwidth;hk.width=fk.width;hk.height=fk.height;hk.c=fk.f||"";hk.f=fk.h||"";for(gk=0;gk<fk.c.length;++gk)ek=fk.c[gk],ek.a&&hk.g.push(ek.a);return hk;}function oi(dk,ek,fk){ek=zh(ek,dk.id,null,dk.bandwidth,null);if(!ek)return null;fk=new fk();fk.url=ue(dk.m,ek);return fk;}function pi(dk,ek){var fk=dk.url,gk=0,hk=null;dk.a&&(gk=dk.a.aa,hk=dk.a.end);return new te(ek,fk,gk,hk);}function qi(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function ri(dk,ek){var fk=new si(ek);dk.streamHistory.push(new ti(fk));if(fk.videoHeight||!dk.streamStats)dk.streamStats=fk;}function si(dk){this.videoWidth=dk.width;this.videoHeight=dk.height;this.videoMimeType=dk.c;this.videoBandwidth=dk.bandwidth;}function ti(dk){this.timestamp=(Date.now()+v)/1000;this.value=dk;}function ui(dk){mb.call(this,null);this.a=dk;this.b=null;this.f=new rb();this.j=this.l=null;this.A=0;this.v=null;this.i=false;this.C=true;this.g=new qi();this.c={enableAdaptation:true,streamBufferSize:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new jd()};this.o=1;this.B=null;}m(ui,mb);l("shaka.player.Player",ui);ui.version="";ui.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};ui.prototype.da=function(dk){this.C=dk;};ui.prototype.setResumeAfterBuffering=ui.prototype.da;function vi(dk){return "text/vtt"==dk?!!i.VTTCue:MediaSource.isTypeSupported(dk);}ui.isTypeSupported=vi;ui.setTextStyle=function(dk){var ek=document.getElementById("ShakaPlayerTextStyle");ek||(ek=document.createElement("style"),ek.id="ShakaPlayerTextStyle",document.head.appendChild(ek));for(ek=ek.sheet;ek.cssRules.length;)ek.deleteRule(0);ek.insertRule("::cue { "+od(dk)+" }",0);};ui.prototype.destroy=function(){return this.u().then(vb(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};ui.prototype.destroy=ui.prototype.destroy;ui.prototype.u=function(){if(!this.b)return Promise.resolve();this.i&&aj(this);this.a.pause();tb(this.f);zi(this);xi(this);this.l&&(this.l.destroy(),this.l=null);this.a.src="";var dk=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.i=false;this.g=new qi();return dk;};ui.prototype.unload=ui.prototype.u;ui.prototype.ka=function(dk){gj(dk,this.a);var ek=this.u();this.a.autoplay&&(p("load"),sb(this.f,this.a,"timeupdate",this.Ma.bind(this)));dk.ka(this.c);dk.G=this.B;this.B=null;ek=ek.then(vb(this,function(){return dk.Y();}));ek.catch(vb(this,function(fk){dk.destroy();return Promise.reject(fk);}));return ek.then(vb(this,function(){if(!this.a)return wi();this.b=dk;sb(this.f,this.b,"seekrangechanged",this.Ta.bind(this));this.l=new eg(this,this.a,this.b);return this.l.initialize();})).then(vb(this,function(){if(!this.a)return wi();sb(this.f,this.a,"error",this.hb.bind(this));sb(this.f,this.a,"playing",this.Ra.bind(this));sb(this.f,this.a,"pause",this.Qa.bind(this));return hj(this.b,this,this.a);})).then(vb(this,function(){if(!this.a)return wi();yi(this);})).catch(vb(this,function(fk){if(!this.a)return wi();if("destroy"!=fk.type){var gk=ja(fk);this.dispatchEvent(gk);}return this.u().then(function(){return Promise.reject(fk);});}));};ui.prototype.load=ui.prototype.ka;function wi(){var dk=Error("Player destroyed");dk.type="destroy";return Promise.reject(dk);}j=ui.prototype;j.Ma=function(){q("load");this.g.playbackLatency=r("load")/1000;this.f.ba(this.a,"timeupdate");};j.hb=function(){if(this.a.error){var dk=this.a.error.code;dk!=MediaError.MEDIA_ERR_ABORTED&&(dk=Error(bj[dk]||"Unknown playback error."),dk.type="playback",dk=ja(dk),this.dispatchEvent(dk));}};j.Ra=function(){p("playing");!this.j&&0>this.o&&(this.a.playbackRate=0,this.w(this.a.currentTime,Date.now(),this.o));this.i&&aj(this);};j.Qa=function(){q("playing");var dk=r("playing");if(!isNaN(dk)){var ek=this.g;ek.playTime+=dk/1000;}xi(this);};j.Ta=function(dk){this.A=dk.start;};j.Ea=function(){if(!this.a.paused){q("playing");var dk=r("playing");if(!isNaN(dk)){var ek=this.g;ek.playTime+=dk/1000;p("playing");}}dk=this.g;ek=this.a;ek.getVideoPlaybackQuality&&(ek=ek.getVideoPlaybackQuality(),dk.decodedFrames=ek.totalVideoFrames,dk.droppedFrames=ek.droppedVideoFrames);return this.g;};ui.prototype.getStats=ui.prototype.Ea;ui.prototype.ja=function(){return this.b?this.b.D():[];};ui.prototype.getVideoTracks=ui.prototype.ja;ui.prototype.ga=function(){return this.b?this.b.S():[];};ui.prototype.getAudioTracks=ui.prototype.ga;ui.prototype.ia=function(){return this.b?this.b.la():[];};ui.prototype.getTextTracks=ui.prototype.ia;ui.prototype.selectVideoTrack=function(dk,ek){return this.b?this.b.selectVideoTrack(dk,void 0==ek?true:ek):false;};ui.prototype.selectVideoTrack=ui.prototype.selectVideoTrack;ui.prototype.la=function(dk,ek){return this.b?nj(this.b,"audio",dk,void 0==ek?true:ek):false;};ui.prototype.selectAudioTrack=ui.prototype.la;ui.prototype.ca=function(dk){return this.b?nj(this.b,"text",dk,false):false;};ui.prototype.selectTextTrack=ui.prototype.ca;ui.prototype.fa=function(dk){this.b&&jj(this.b,dk);};ui.prototype.enableTextTrack=ui.prototype.fa;ui.prototype.G=function(dk){this.h({enableAdaptation:dk});};ui.prototype.enableAdaptation=ui.prototype.G;ui.prototype.M=function(){return this.c.enableAdaptation;};ui.prototype.getAdaptationEnabled=ui.prototype.M;ui.prototype.ea=function(dk){this.h({streamBufferSize:dk});};ui.prototype.setStreamBufferSize=ui.prototype.ea;ui.prototype.S=function(){return Number(this.c.streamBufferSize);};ui.prototype.getStreamBufferSize=ui.prototype.S;ui.prototype.ra=function(dk){this.h({licenseRequestTimeout:dk/1000});};ui.prototype.setLicenseRequestTimeout=ui.prototype.ra;ui.prototype.U=function(dk){this.h({mpdRequestTimeout:dk/1000});};ui.prototype.setMpdRequestTimeout=ui.prototype.U;ui.prototype.Z=function(dk){this.h({segmentRequestTimeout:dk/1000});};ui.prototype.setRangeRequestTimeout=ui.prototype.Z;ui.prototype.Y=function(dk){this.h({preferredLanguage:dk});};ui.prototype.setPreferredLanguage=ui.prototype.Y;ui.prototype.X=function(dk){xi(this);0<=dk?this.a.playbackRate=dk:this.a.paused||(this.a.playbackRate=0,this.w(this.a.currentTime,Date.now(),dk));this.o=dk;};ui.prototype.setPlaybackRate=ui.prototype.X;ui.prototype.P=function(){return this.o;};ui.prototype.getPlaybackRate=ui.prototype.P;ui.prototype.$=function(dk){this.h({restrictions:dk});};ui.prototype.setRestrictions=ui.prototype.$;ui.prototype.R=function(){return this.c.restrictions.clone();};ui.prototype.getRestrictions=ui.prototype.R;ui.prototype.sa=function(dk){this.B=dk;};ui.prototype.setPlaybackStartTime=ui.prototype.sa;ui.prototype.D=function(){var dk;this.b?(dk=this.b,dk=dk.a?dk.a.b:false):dk=false;return dk;};ui.prototype.isLive=ui.prototype.D;ui.prototype.h=function(dk){if(dk){var ek=sa(dk,"enableAdaptation","boolean");null!=ek&&(this.c.enableAdaptation=ek);ek=qa(dk,"streamBufferSize");null!=ek&&(this.c.streamBufferSize=ek);ek=qa(dk,"licenseRequestTimeout");null!=ek&&(this.c.licenseRequestTimeout=ek);ek=qa(dk,"mpdRequestTimeout");null!=ek&&(this.c.mpdRequestTimeout=ek);ek=qa(dk,"segmentRequestTimeout");null!=ek&&(this.c.segmentRequestTimeout=ek);ek=ra(dk,"preferredLanguage");null!=ek&&(this.c.preferredLanguage=ek);dk=ta(dk,"restrictions",jd);null!=dk&&(this.c.restrictions=dk.clone());this.b&&this.b.ka(this.c);}};ui.prototype.configure=ui.prototype.h;ui.prototype.ha=function(){return this.c;};ui.prototype.getConfiguration=ui.prototype.ha;function xi(dk){dk.j&&(i.clearTimeout(dk.j),dk.j=null);}function yi(dk){zi(dk);dk.v=i.setTimeout(dk.T.bind(dk),100);}function zi(dk){dk.v&&(i.clearTimeout(dk.v),dk.v=null);}ui.prototype.w=function(dk,ek,fk){this.j=null;var gk=(Date.now()-ek)/1000*fk;this.a.currentTime<this.A+(this.D()?1:.05)?this.a.pause():(gk=Math.max(this.A,dk+gk),this.a.currentTime=gk,this.j=i.setTimeout(this.w.bind(this,dk,ek,fk),250));};function aj(dk){q("buffering");var ek=dk.g;ek.bufferingTime+=r("buffering")/1000;dk.i=false;dk.dispatchEvent(ia({type:"bufferingEnd"}));}ui.prototype.T=function(){yi(this);if(!this.a.ended&&!this.a.seeking){var dk=this.a.buffered,ek=dk.length?dk.end(dk.length-1):0,dk=Math.max(ek-this.a.currentTime,0),fk=this.a.duration,gk=this.a.currentTime;if(this.i){var hk,ek=this.b,ik=null;for(hk in ek.c){var jk=ek.c[hk].va();0<jk&&(ik=null!=ik?Math.min(ik,jk):jk);}hk=ik||0;fk=Math.max(fk-gk-.05,0);if(dk>hk||dk>fk)aj(this),this.C&&this.a.play();}else fk=isNaN(fk)?0:Math.max(fk-.05,0),!(this.a.paused||ek>=fk||gk>=fk)&&.2>dk&&(this.i=true,this.a.pause(),this.g.bufferingHistory.push((Date.now()+v)/1000),p("buffering"),this.dispatchEvent(ia({type:"bufferingStart"})));}};var bj={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function cj(dk,ek){var fk=dk.bandwidth||Number.MAX_VALUE,gk=ek.bandwidth||Number.MAX_VALUE;return fk<gk?-1:fk>gk?1:0;}function dj(){this.a=this.b=null;this.f=new rb();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",dj);dj.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};dj.prototype.initialize=function(dk,ek){this.b||this.a||(this.b=dk,this.a=ek);};dj.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,sb(this.f,this.b,"bandwidth",this.l.bind(this)),sb(this.f,this.a,"adaptation",this.j.bind(this)),sb(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};dj.prototype.enable=function(dk){this.i=dk;};dj.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var dk=ej(this);return dk?dk.id:null;};dj.prototype.selectVideoTrack=function(dk,ek,fk){this.g&&this.a.selectVideoTrack(dk.id,ek,fk);};dj.prototype.l=function(){Date.now()<this.c||this.h();};dj.prototype.h=function(){if(this.i){var dk=ej(this);if(dk){if(dk.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(dk,false);}this.c=Number.POSITIVE_INFINITY;}};dj.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function ej(dk){var ek=dk.a.D();if(0==ek.length)return null;ek.sort(ld);var fk;dk:{fk=dk.a.S();for(var gk=0;gk<fk.length;++gk)if(fk[gk].active){fk=fk[gk];break dk;}fk=null;};fk=fk?fk.bandwidth:0;dk=dk.b.getBandwidth();for(var gk=ek[0],hk=0;hk<ek.length;++hk){var ik=ek[hk],jk=hk+1<ek.length?ek[hk+1]:{bandwidth:Number.POSITIVE_INFINITY};if(ik.bandwidth&&(jk=(jk.bandwidth+fk)/.85,dk>=(ik.bandwidth+fk)/.95&&dk<=jk&&(gk=ik,gk.active)))break;}return gk;}function fj(dk,ek,fk){mb.call(this,null);this.a=dk;this.T=ek;this.j=new rb();this.g=new MediaSource();this.f=null;this.ga=this.Z=0;this.b=new ib();this.o=fk;this.o.initialize(ek,this);this.w=false;this.v="en";this.U=false;this.A=null;this.i=new u();this.ca=new u();this.h=new jd();this.l=null;this.ha=1;this.c={};this.P=new u();this.B=0;this.da=false;this.u={};this.G=this.C=this.$=null;this.M={};}m(fj,mb);l("shaka.player.StreamVideoSource",fj);fj.prototype.ka=function(dk){null!=dk.streamBufferSize&&(this.M.streamBufferSize=dk.streamBufferSize);null!=dk.segmentRequestTimeout&&(this.M.segmentRequestTimeout=dk.segmentRequestTimeout);bk(this);null!=dk.enableAdaptation&&this.o.enable(Boolean(dk.enableAdaptation));null!=dk.mpdRequestTimeout&&(this.ga=Number(dk.mpdRequestTimeout));null!=dk.preferredLanguage&&(this.v=na(String(dk.preferredLanguage)));null!=dk.restrictions&&(this.h=dk.restrictions,this.w&&kj(this));};fj.prototype.destroy=function(){this.i.destroy();this.P.destroy();this.P=this.i=null;this.C&&(i.clearTimeout(this.C),this.C=null);this.$&&(i.clearTimeout(this.$),this.$=null);this.u=null;this.j.destroy();this.j=null;pa(this.c).forEach(function(dk){dk.destroy();});this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);this.o.destroy();this.s=this.h=this.A=this.f=this.g=this.T=this.o=null;};function gj(dk,ek){sb(dk.j,dk.g,"sourceopen",dk.Pa.bind(dk));ek.src=i.URL.createObjectURL(dk.g);}function hj(dk,ek,fk){if(!dk.w)return dk=Error("Cannot call attach() right now."),dk.type="stream",Promise.reject(dk);dk.s=ek;dk.f=fk;dk.A=ek.Ea();sb(dk.j,dk.T,"bandwidth",dk.ib.bind(dk));ek=dk.f.setMediaKeys(dk.f.mediaKeys);dk.ca.then(vb(dk,function(){pj(this).then(vb(this,function(){this.i&&this.i.resolve();})).catch(vb(this,function(gk){this.i&&this.i.reject(gk);}));}));return Promise.all([dk.i,ek]);}fj.prototype.Y=function(){if(this.w){var dk=Error("Cannot call load() right now.");dk.type="stream";return Promise.reject(dk);}if(!this.a||0==this.a.a.length)return dk=Error("The manifest does not specify any content."),dk.type="stream",Promise.reject(dk);if(this.a.b)return dk=Error("Live manifest support not enabled."),dk.type="stream",Promise.reject(dk);for(var dk=this.a.a,ek=0;ek<dk.length;++ek)for(var fk=dk[ek],gk=0;gk<fk.a.length;++gk){for(var hk=fk.a[gk],ik=hk,jk=0;jk<ik.a.length;++jk)vi(kf(ik.a[jk]))||(ik.a.splice(jk,1),--jk);0==hk.a.length&&(fk.a.splice(gk,1),--gk);}for(ek=0;ek<dk.length;++ek)for(fk=dk[ek],gk=0;gk<fk.a.length;++gk)fk.a[gk].a.sort(cj);if(0==this.a.a.length||0==this.a.a[0].a.length)return dk=Error("The manifest specifies content that cannot be displayed on this browser/platform."),dk.type="stream",Promise.reject(dk);this.w=true;this.M.initialStreamBufferSize=this.a.c;bk(this);kj(this);return Promise.resolve();};fj.prototype.D=function(){if(!this.b.a.hasOwnProperty("video"))return [];for(var dk=this.c.video,dk=(dk=dk?dk.ma():null)?dk.b:0,ek=[],fk=this.b.get("video"),gk=0;gk<fk.length;++gk)for(var hk=fk[gk],ik=0;ik<hk.a.length;++ik){var jk=hk.a[ik];if(jk.J&&jk.a){var kk=jk.b,jk=new kd(kk,jk.bandwidth,jk.width,jk.height);kk==dk&&(jk.active=true);ek.push(jk);}}return ek;};fj.prototype.getVideoTracks=fj.prototype.D;fj.prototype.S=function(){if(!this.b.a.hasOwnProperty("audio"))return [];for(var dk=this.c.audio,dk=(dk=dk?dk.ma():null)?dk.b:0,ek=[],fk=this.b.get("audio"),gk=0;gk<fk.length;++gk)for(var hk=fk[gk],ik=hk.lang,jk=0;jk<hk.a.length;++jk){var kk=hk.a[jk];if(kk.J&&kk.a){var lk=kk.b,kk=new md(lk,kk.bandwidth,ik);lk==dk&&(kk.active=true);ek.push(kk);}}return ek;};fj.prototype.getAudioTracks=fj.prototype.S;fj.prototype.la=function(){if(!this.b.a.hasOwnProperty("text"))return [];for(var dk=this.c.text,ek=dk?dk.ma():null,ek=ek?ek.b:0,fk=[],gk=this.b.get("text"),hk=0;hk<gk.length;++hk)for(var ik=gk[hk],jk=ik.lang,kk=0;kk<ik.a.length;++kk){var lk=ik.a[kk].b,mk=new xd(lk,jk);lk==ek&&(mk.active=true,mk.enabled=dk.ta());fk.push(mk);}return fk;};fj.prototype.getTextTracks=fj.prototype.la;function ij(dk,ek){if(dk.w){for(var fk={},gk=dk.a.a[0],hk=0;hk<gk.a.length;++hk){var ik=gk.a[hk];fk[ik.b]=ik;}dk.b.a={};gk=lb(ek);for(hk=0;hk<gk.length;++hk){var ik=gk[hk],jk=ek.get(ik);if("video"==ik){var kk=jk[0].id;dk.b.push(ik,fk[kk]);}else if("audio"==ik){for(var kk=jk[0].b.split(";")[0],lk=0;lk<jk.length;++lk){var mk=jk[lk];mk.b.split(";")[0]==kk&&dk.b.push(ik,fk[mk.id]);}}else for(lk=0;lk<jk.length;++lk)kk=jk[lk].id,dk.b.push(ik,fk[kk]);}dk.U=true;if(fk=dk.b.get("audio"))oj(dk,fk),dk.b.a.audio=fk,fk=fk[0].lang||dk.v,ka(2,dk.v,fk)&&(dk.U=false);if(fk=dk.b.get("text"))oj(dk,fk),dk.b.a.text=fk,fk=fk[0].lang||dk.v,ka(2,dk.v,fk)||(dk.U=false);}}fj.prototype.selectVideoTrack=function(dk,ek,fk){return nj(this,"video",dk,ek,fk);};function jj(dk,ek){var fk=dk.c.text;fk&&fk.na(ek);}function kj(dk){if(dk.h){for(var ek=false,fk=0;fk<dk.a.a.length;++fk)for(var gk=dk.a.a[fk],hk=0;hk<gk.a.length;++hk){var ik=gk.a[hk];if("video"==ik.contentType)for(var jk=0;jk<ik.a.length;++jk){var kk=ik.a[jk],lk=kk.a;kk.a=true;dk.h.maxWidth&&kk.width>dk.h.maxWidth&&(kk.a=false);dk.h.maxHeight&&kk.height>dk.h.maxHeight&&(kk.a=false);dk.h.maxBandwidth&&kk.bandwidth>dk.h.maxBandwidth&&(kk.a=false);dk.h.minBandwidth&&kk.bandwidth<dk.h.minBandwidth&&(kk.a=false);lk!=kk.a&&(ek=true);}}0!=jb(dk.b).length&&ek&&(mj(dk),0<dk.D().length||(ek=Error("The applicaion has restricted all video tracks!"),ek.type="stream",ek=ja(ek),dk.dispatchEvent(ek)));}}function lj(dk,ek){for(var fk,gk=false,hk=new ib(),ik=jb(dk.b),jk=0;jk<ik.length;++jk)for(var kk=ik[jk],lk=0;lk<kk.a.length;++lk){var mk=kk.a[lk];mk.g.forEach(function(nk){hk.push(nk,mk);});}for(fk in ek)if(ik=yb[ek[fk]]||null,kk=hk.get(fk)){for(jk=0;jk<kk.length;++jk)mk=kk[jk],lk=mk.J,mk.J=!ik,lk!=mk.J&&(gk=true);}else ua(fk);gk&&(mj(dk),gk=dk.S(),fk=dk.D(),gk=dk.b.a.hasOwnProperty("audio")&&0==gk.length,fk=dk.b.a.hasOwnProperty("video")&&0==fk.length,gk||fk)&&(fk=Error("The key system has restricted all "+(gk&&fk?"audio and video tracks.":gk?"audio tracks.":"video tracks.")),fk.type="drm",fk=ja(fk),dk.dispatchEvent(fk));}function mj(dk){var ek=ia({type:"trackschanged",bubbles:true});dk.dispatchEvent(ek);}function nj(dk,ek,fk,gk,hk){if(!dk.b.a.hasOwnProperty(ek)||!dk.c[ek])return false;for(var ik=dk.b.get(ek),jk=0;jk<ik.length;++jk)for(var kk=ik[jk],lk=0;lk<kk.a.length;++lk){var mk=kk.a[lk];if(mk.b==fk){if(!mk.J||!mk.a)return false;if("text"!=ek&&!dk.da)return fk=dk.u[ek],dk.u[ek]={Ha:mk,xa:null!=fk&&fk.xa||gk,ya:null!=fk&&fk.ya||hk},true;ri(dk.A,mk);dk.c[ek].oa(mk,gk,hk);return true;}}return false;}function oj(dk,ek){for(var fk=0;2>=fk;++fk)for(var gk=0;gk<ek.length;++gk){var hk=ek[gk];if(ka(fk,dk.v,hk.lang)){ek.splice(gk,1);ek.splice(0,0,hk);return;}}for(gk=0;gk<ek.length;++gk)if(hk=ek[gk],hk.f){ek.splice(gk,1);ek.splice(0,0,hk);break;}}j=fj.prototype;j.Pa=function(){this.j.ba(this.g,"sourceopen");this.ca.resolve();};function pj(dk){for(var ek=[],fk=["audio","video","text"],gk=0;gk<fk.length;++gk){var hk=fk[gk];dk.b.a.hasOwnProperty(hk)&&ek.push(dk.b.get(hk)[0]);}for(var ik=qj(dk,ek),gk=0;gk<fk.length;++gk)if(hk=fk[gk],dk.b.a.hasOwnProperty(hk)&&!ik[hk])return dk=Error("Unable to select an initial "+hk+" stream: all "+hk+" streams have been restricted (by the application or by the key system)."),dk.type="stream",Promise.reject(dk);ek=pa(ik).map(function(jk){return jk.F.create();});return Promise.all(ek).then(vb(dk,function(jk){if(!jk.every(function(kk){return kk.length();}))return jk=Error("Some streams are not available."),jk.type="stream",Promise.reject(jk);jk=zj(this,jk);if(!jk)return jk=Error("Some streams are not available."),jk.type="stream",Promise.reject(jk);if(!rj(this,ik))return jk=Error("Failed to create Stream objects."),jk.type="stream",Promise.reject(jk);this.o.start();tj(this,ik,jk);return Promise.resolve();})).catch(vb(dk,function(jk){if("aborted"!=jk.type)return Object.keys(this.c),this.a.b?(this.ob(),Promise.resolve()):Promise.reject(jk);}));}function qj(dk,ek){for(var fk={},gk=0;gk<ek.length;++gk){var hk=ek[gk],ik=null;if("video"==hk.contentType){var jk=dk.o.getInitialVideoTrackId();if(null==jk)continue;ik=hk.a.filter(function(kk){return kk.b==jk;});if(0==ik.length)continue;ik=ik[0];}else if("audio"==hk.contentType){ik=hk.a.filter(function(kk){return kk.J&&kk.a;});if(0==ik.length)continue;ik=hk.a[Math.floor(ik.length/2)];}else 0<hk.a.length&&(ik=hk.a[0]);fk[hk.contentType]=ik;}return fk;}function rj(dk,ek){var fk={},gk;for(gk in ek){var hk=ek[gk],hk="text"==gk?new tf(dk,dk.f):sj(dk,hk);if(!hk)return pa(fk).forEach(function(ik){ik.destroy();}),false;fk[gk]=hk;}dk.c=fk;return true;}function sj(dk,ek){var fk=new uf(dk,dk.f,dk.g,kf(ek),dk.T);fk.A(dk.M);return fk;}function tj(dk,ek,fk){dk.ha=dk.f.playbackRate;dk.f.playbackRate=0;vj(dk,fk);var gk;gk=dk.a.b?fk.end:dk.G&&dk.G<=fk.end&&dk.G>=fk.start?dk.G:fk.start;sb(dk.j,dk.f,"seeking",dk.Ua.bind(dk));dk.f.currentTime!=gk&&(dk.f.currentTime=gk,dk.l=gk);wj(dk,fk.start,fk.end);var hk=[],ik;for(ik in dk.c)fk=dk.c[ik],vb(dk,function(jk){hk.push(jk.Ga(this.P).then(vb(this,function(kk){var lk=jk.ua();lk>this.Z&&(this.Z=lk);return kk;})));})(fk),sb(dk.j,fk,"ended",dk.Wa.bind(dk)),gk=ek[ik],ri(dk.A,gk),fk.oa(gk,false);Promise.all(hk).then(dk.La.bind(dk)).catch(vb(dk,function(jk){"destroy"!=jk.type&&(jk=ja(jk),this.dispatchEvent(jk));}));jj(dk,dk.U);}j.La=function(dk){n(dk&&dk.length==Object.keys(this.c).length);for(var ek=Number.POSITIVE_INFINITY,fk=Number.NEGATIVE_INFINITY,gk=0;gk<dk.length;++gk)var hk=dk[gk],ek=Math.min(ek,hk),fk=Math.max(fk,hk);dk=yj(this);for(gk=0;gk<dk.length;++gk)gf(dk[gk],fk);uj(this,dk,fk);gk=jb(this.b).map(function(ik){return ik.a;}).reduce(function(ik,jk){return ik.concat(jk);},[]).map(function(ik){var jk=[ik.F.create()];ik.L&&jk.push(ik.L.create());return Promise.all(jk);});Promise.all(gk).then(vb(this,function(ik){for(var jk=0;jk<ik.length;++jk)gf(ik[jk][0],fk);this.da=true;for(var kk in this.u)ik=this.u[kk],jk=this.c[kk],ri(this.A,ik.Ha),jk.oa(ik.Ha,ik.xa,ik.ya);this.u={};})).catch(vb(this,function(ik){"aborted"!=ik.type&&(ik=ja(ik),this.dispatchEvent(ik));}));};function uj(dk,ek,fk){if(ek=zj(dk,ek))vj(dk,ek),wj(dk,ek.start,ek.end);0!=fk?(fk=dk.f.currentTime+fk,dk.f.currentTime=fk,dk.l=fk):fk=dk.f.currentTime;dk.a.b&&ek&&(dk.B=ek.end-fk,dk.B=Math.max(dk.B,0));dk.f.playbackRate=dk.ha;dk.a.b&&null!=dk.a.f&&dk.pb(dk.B);ak(dk);dk.P.resolve();}function vj(dk,ek){if(dk.a.b){isNaN(dk.g.duration)&&(dk.g.duration=ek.end+2592000);}else if(isNaN(dk.g.duration)||ek.end>dk.g.duration){dk.g.duration=ek.end;for(var fk=0;fk<dk.g.sourceBuffers.length;++fk)dk.g.sourceBuffers[fk].appendWindowEnd=ek.end;}}j.Ya=function(){this.C=null;ak(this);var dk=zj(this,yj(this));dk&&(wj(this,dk.start,dk.end),this.f.paused||xj(this,this.f.currentTime,dk.start,dk.end));};function wj(dk,ek,fk){ek=ia({type:"seekrangechanged",bubbles:true,start:ek,end:fk});dk.dispatchEvent(ek);}j.Ua=function(){var dk=this.f.currentTime;if(null!=this.l){if(dk>=this.l-.01&&dk<=this.l+.01){this.l=null;return;}this.l=null;}var ek=zj(this,yj(this));if(ek){var fk=ek.end;(ek=xj(this,dk,ek.start,fk))||(dk<=fk+.01?ek=false:(this.f.currentTime=fk,ek=true));if(!ek)for(var gk in this.c)this.c[gk].Ca();}};function xj(dk,ek,fk,gk){if(ek>=fk-.01)return false;ek=0;if(dk.a.b){ek=.5;for(var hk in dk.c)if(!dk.c[hk].Da(fk+ek)){ek=dk.a.c;break;}}dk.f.currentTime=Math.min(fk+ek,gk);return true;}j.Wa=function(){if(!this.a.b){for(var dk in this.c)if(!this.c[dk].Aa())return;this.g.endOfStream();}};j.ib=function(){var dk=this.A,ek=this.T.getBandwidth();dk.estimatedBandwidth=ek;dk.bandwidthHistory.push(new ti(ek));};function yj(dk){return pa(dk.c).map(function(ek){return ek.za();}).filter(function(ek){return null!=ek;});}function zj(dk,ek){for(var fk=0,gk=Number.POSITIVE_INFINITY,hk=0;hk<ek.length;++hk){var ik;ik=ek[hk];ik=0<ik.length()?{start:df(ik).b,end:ef(ik).a}:{start:0,end:0};fk=Math.max(fk,ik.start);null!=ik.end&&(gk=Math.min(gk,ik.end));}if(gk==Number.POSITIVE_INFINITY)if(gk=dk.a.a[0],gk.b){gk=(gk.start||0)+gk.b;}else return null;dk.a.b&&(gk=Math.max(gk-(dk.a.c+dk.B),fk));if(fk>gk)return null;gk=Math.floor(100000*gk)/100000;return {start:fk,end:gk};}function ak(dk){dk.a.b&&(dk.C=i.setTimeout(dk.Ya.bind(dk),1000));}function bk(dk){for(var ek in dk.c)dk.c[ek].A(dk.M);}j.ua=function(){return this.Z;};fj.prototype.getLongestInitResponseTime=fj.prototype.ua;function ck(dk,ek,fk,gk){fk||(fk=new ob());gk||(gk=new dj());fj.call(this,null,fk,gk);"string"===typeof dk?this.ra=dk:this.ja=dk;this.ia=ek;this.X=[];this.ea=[];this.fa=[];this.R=null;}m(ck,fj);l("shaka.player.DashVideoSource",ck);ck.prototype.sa=function(dk,ek,fk){this.X.push(dk);this.ea.push(ek||"");this.fa.push(fk||"");};ck.prototype.addExternalCaptions=ck.prototype.sa;ck.prototype.Ia=function(dk){this.R=dk;};ck.prototype.setNetworkCallback=ck.prototype.Ia;ck.prototype.destroy=function(){this.R=this.ia=null;fj.prototype.destroy.call(this);};ck.prototype.Y=function(){var dk=vb(this,function(fk){for(var gk=0;gk<this.X.length;gk++){var hk=fk,ik=this.X[gk],jk=this.ea[gk],kk=this.fa[gk];if(0!==hk.a.length){var lk=new ng();lk.contentType="text";lk.lang=jk||"en";lk.c=true;jk=new qg();jk.bandwidth=0;jk.f=kk||"text/vtt";jk.m=[new zd(ik)];lk.a.push(jk);hk.a[0].b.push(lk);eh(hk.a[0]);}}if("dynamic"==fk.type)return fk=Error("Live manifest support not enabled."),fk.type="stream",Promise.reject(fk);gk=new fi(this.ia);hk=this.R;ik=(Date.now()+v)/1000;for(kk=0;kk<fk.a.length;++kk)for(lk=fk.a[kk],jk=0;jk<lk.b.length;++jk){var mk=lk.b[jk];if("text"!=mk.contentType)for(var nk=0;nk<mk.a.length;++nk){var ok=mk.a[nk],pk=0,pk=pk+(ok.g?1:0),pk=pk+(ok.b?1:0),pk=pk+(ok.a?1:0);0==pk?(mk.a.splice(nk,1),--nk):1!=pk&&(ok.g?(ok.b=null,ok.a=null):ok.b&&(ok.a=null));}}gi(fk);for(kk=0;kk<fk.a.length;++kk)for(lk=fk.a[kk],jk=0;jk<lk.b.length;++jk){nk=mk=lk.b[jk];ok=null;for(pk=0;pk<nk.a.length;++pk){var qk=nk.a[pk].f||"";ok?qk!=ok&&(nk.a.splice(pk,1),--pk):ok=qk;}0==mk.a.length&&(lk.b.splice(jk,1),--jk);}"dynamic"==fk.type&&null==fk.c&&(fk.c=ik);ik=new pf();"dynamic"==fk.type&&(ik.b=true,ik.f=fk.f,ik.h=new te(hk,fk.j||fk.url),ik.g=fk.c);ik.c=fk.g||5;for(kk=0;kk<fk.a.length;++kk){lk=fk.a[kk];if(null==lk.start)break;lk=hi(gk,fk,lk,hk);ik.a.push(lk);}this.a=ik;return fj.prototype.Y.call(this);});if(this.ja)return dk(this.ja);var ek=[new zd(this.ra)],ek=new te(this.R,ek);return xh(new wh(ek,this.ga)).then(dk);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','VideoPlayerShakaExperiments','Shaka'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player.VideoTrack;l.FIRST_SWITCH_INTERVAL=j.firstSwitchInterval||4000;l.MIN_SWITCH_INTERVAL=j.minSwitchInterval||30000;l.MIN_EVAL_INTERVAL=j.minEvalInterval||3000;l.BANDWIDTH_UPGRADE_TARGET=j.bandwidthUpgradeTarget||.85;l.BANDWIDTH_DOWNGRADE_TARGET=j.bandwidthDowngradeTarget||.95;function l(m){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new i();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=m.forceHighQualityDefault;}l.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;};l.prototype.initialize=function(m,n){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=m;this.$CustomAbrManager2=n;};l.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+l.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(h.listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager8.bind(this)),h.listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager9.bind(this)),h.listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager10.bind(this)));this.$CustomAbrManager6=true;};l.prototype.forceHighQuality=function(m){'use strict';this.$CustomAbrManager7=m;if(!this.$CustomAbrManager6)return;if(m){var n=this.$CustomAbrManager11();if(n)this.selectVideoTrack(n,true);}else this.$CustomAbrManager10();};l.prototype.enable=function(m){'use strict';this.$CustomAbrManager5=m;};l.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var m=this.$CustomAbrManager11();return m?m.id:null;};l.prototype.selectVideoTrack=function(m,n,o){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(m.id,n,o);};l.$CustomAbrManager12=function(m){'use strict';for(var n=0;n<m.length;++n)if(m[n].active)return m[n];return null;};l.prototype.$CustomAbrManager8=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager10(event);};l.prototype.$CustomAbrManager10=function(event){'use strict';if(!this.$CustomAbrManager5)return;var m=this.$CustomAbrManager11();if(m){if(m.active){this.$CustomAbrManager4=Date.now()+l.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(m,false);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};l.prototype.$CustomAbrManager9=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+l.MIN_SWITCH_INTERVAL;};l.prototype.$CustomAbrManager11=function(){'use strict';var m=this.$CustomAbrManager2.getVideoTracks();if(m.length==0)return null;m.sort(k.compare);if(this.$CustomAbrManager7)return m.pop();var n=l.$CustomAbrManager12(this.$CustomAbrManager2.getAudioTracks()),o=n?n.bandwidth:0,p=this.$CustomAbrManager1.getBandwidth(),q=m[0];for(var r=0;r<m.length;r++){var s=m[r],t=r+1<m.length?m[r+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!s.bandwidth)continue;var u=(s.bandwidth+o)/l.BANDWIDTH_DOWNGRADE_TARGET,v=(t.bandwidth+o)/l.BANDWIDTH_UPGRADE_TARGET;if(p>=u&&p<=v){q=s;if(q.active)break;}}return q;};f.exports=l;},null);
__d('VideoPlayerHTML5Shaka',['BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','Run','VideoPlayerShakaExperiments','dispatchEvent','Shaka'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=c('Shaka').player,t=s.Player,u=s.DashVideoSource,v=s.VideoTrack,w=c('Shaka').dash.mpd.parseMpd,x=c('Shaka').util,y=x.EWMACacheBandwidthEstimator,z=x.EWMASignedURLBandwidthEstimator,aa=new i('localstorage','_video_'),ba=o.enableAdaptation?new y(o.cacheDelay,o.cacheBandwidth,o.useStoredBandwidthEstimate?aa.get('bandwidthEstimate'):undefined):new z();n.onUnload(function(){return aa.set('bandwidthEstimate',ba.getBandwidth());});c('Shaka').polyfill.Fullscreen.install();function ca(ia){var ja=ia.getVideoTracks();ja.sort(v.compare);return ja.pop().id;}function da(ia){var ja=ia.getVideoTracks();ja.sort(v.compare);return ja.shift().id;}function ea(ia){var ja=h.getBlob([ia]);return URL.createObjectURL(ja);}function fa(ia,event){var ja=l.capture(ia.parentNode,event,function(ka){if(ka.target!=ia)return;ja.remove();m.kill(ka);});}function ga(ia,ja){'use strict';this.$DisabledAbrManager1=ia;this.$DisabledAbrManager2=ja;}ga.prototype.initialize=function(ia,ja){'use strict';this.$DisabledAbrManager3=ja;};ga.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(ca(this.$DisabledAbrManager3),false);};ga.prototype.enable=function(){'use strict';};ga.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return da(this.$DisabledAbrManager3);var ia=this.$DisabledAbrManager1?ca(this.$DisabledAbrManager3):da(this.$DisabledAbrManager3);return ia;};ga.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};q=babelHelpers.inherits(ha,k);r=q&&q.prototype;function ha(ia,ja,ka){'use strict';var la=ka.playHighQualityTrack;r.constructor.call(this);this.$VideoPlayerHTML5Shaka1=true;var ma=l.listen(ia,'playing',(function(){this.$VideoPlayerHTML5Shaka1=false;ma.remove();}).bind(this));this.$VideoPlayerHTML5Shaka2=new t(ia);this.$VideoPlayerHTML5Shaka2.addEventListener('bufferingStart',(function(){return this.$VideoPlayerHTML5Shaka3();}).bind(this));this.$VideoPlayerHTML5Shaka2.addEventListener('bufferingEnd',(function(){return this.$VideoPlayerHTML5Shaka4();}).bind(this));this.$VideoPlayerHTML5Shaka2.addEventListener('error',(function(pa){return this.$VideoPlayerHTML5Shaka5(pa);}).bind(this));var na=o.enableAdaptation?new j({forceHighQualityDefault:la}):new ga(la,o.switchFromLowQuality);this.$VideoPlayerHTML5Shaka6=na;this.$VideoPlayerHTML5Shaka7=w(ja);var oa=new u(this.$VideoPlayerHTML5Shaka7,null,ba,this.$VideoPlayerHTML5Shaka6);this.$VideoPlayerHTML5Shaka8=oa;this.$VideoPlayerHTML5Shaka9=ia;this.$VideoPlayerHTML5Shaka2.configure({enableAdaptation:o.enableAdaptation,streamBufferSize:o.streamBufferSize,initialStreamBufferSize:o.initialStreamBufferSize});this.$VideoPlayerHTML5Shaka2.load(oa);}ha.prototype.selectHighestQualityTrack=function(){'use strict';if(o.enableAdaptation){this.$VideoPlayerHTML5Shaka6.forceHighQuality(true);return;}this.$VideoPlayerHTML5Shaka2.selectVideoTrack(ca(this.$VideoPlayerHTML5Shaka2),true);};ha.prototype.selectLowestQualityTrack=function(){'use strict';if(o.enableAdaptation){this.$VideoPlayerHTML5Shaka6.forceHighQuality(false);return;}this.$VideoPlayerHTML5Shaka2.selectVideoTrack(da(this.$VideoPlayerHTML5Shaka2),false);};ha.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka10){this.$VideoPlayerHTML5Shaka11=true;this.$VideoPlayerHTML5Shaka12=true;p(this.$VideoPlayerHTML5Shaka9,'pause');this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka9.pause();};ha.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka10){this.$VideoPlayerHTML5Shaka11=false;this.$VideoPlayerHTML5Shaka12=true;p(this.$VideoPlayerHTML5Shaka9,'play');p(this.$VideoPlayerHTML5Shaka9,'waiting');this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(true);}else this.$VideoPlayerHTML5Shaka9.play();};ha.prototype.$VideoPlayerHTML5Shaka3=function(){'use strict';fa(this.$VideoPlayerHTML5Shaka9,'pause');this.$VideoPlayerHTML5Shaka10=true;this.$VideoPlayerHTML5Shaka11=false;this.$VideoPlayerHTML5Shaka12=false;this.$VideoPlayerHTML5Shaka2.setResumeAfterBuffering(true);this.emit('bufferingStart');};ha.prototype.$VideoPlayerHTML5Shaka4=function(){'use strict';var ia=this;if(!this.$VideoPlayerHTML5Shaka11)fa(this.$VideoPlayerHTML5Shaka9,'play');if(!this.$VideoPlayerHTML5Shaka12)(function(){var ja=l.capture(ia.$VideoPlayerHTML5Shaka9.parentNode,'playing',(function(ka){if(ka.target!=this.$VideoPlayerHTML5Shaka9)return;ja.remove();if(this.$VideoPlayerHTML5Shaka1){this.$VideoPlayerHTML5Shaka1=false;return;}m.kill(ka);}).bind(ia));})();this.$VideoPlayerHTML5Shaka10=false;this.emit('bufferingEnd');};ha.prototype.$VideoPlayerHTML5Shaka5=function(ia){'use strict';var ja=ia.detail||{},ka=ja.type||'undefined',la=ja.message;this.emit('error',{error:'SHAKA_'+ka.toUpperCase(),message:la});};ha.prototype.hasSelectableVideoTracks=function(){'use strict';var ia=this.$VideoPlayerHTML5Shaka2.getVideoTracks();return ia.length>1;};ha.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka2.unload();};ha.prototype.reload=function(ia){'use strict';var ja=new u(this.$VideoPlayerHTML5Shaka7,null,ba,this.$VideoPlayerHTML5Shaka6);this.$VideoPlayerHTML5Shaka8=ja;return this.$VideoPlayerHTML5Shaka2.load(this.$VideoPlayerHTML5Shaka8).then((function(){return this.$VideoPlayerHTML5Shaka9.currentTime=ia;}).bind(this));};ha.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka8.getLongestInitResponseTime();};ha.isSupported=function(){'use strict';return t.isBrowserSupported();};f.exports=ha;},null);