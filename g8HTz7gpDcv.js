/*!CK:2543969784!*//*1449521549,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["dxUDc"]); }

__d('EgoLineClamp.react',['DOMContainer.react','LineClamp.react','Link.react','React'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m,n=k.PropTypes;l=babelHelpers.inherits(o,k.Component);m=l&&l.prototype;function o(p,q){'use strict';m.constructor.call(this,p,q);}o.prototype.render=function(){'use strict';var p=this.props.seeMoreLink&&this.props.seeMoreText?k.createElement(j,{href:this.props.seeMoreLink},this.props.seeMoreText):'\u2026';return (k.createElement(i,{lines:this.props.lines,disableNative:true,lineHeight:this.props.lineHeight,customEllipsis:p},k.createElement(h,null,this.props.content)));};o.propTypes={content:n.object.isRequired,lines:n.number.isRequired,lineHeight:n.number.isRequired,seeMoreLink:n.string,seeMoreText:n.string};f.exports=o;},null);
__d('FeedEgoCarousel.react',['AsyncRequest','CSS','DOM','DOMContainer.react','Image.react','ImageBlock.react','InlineBlock.react','LitestandEllipsis','React','ReactDOM','Style','XFeedEgoImpressionLoggingController','XUICarousel.react','XUICarouselAnimator','XUICarouselArrow.react','XUICarouselItem.react','XUICloseButton.react','csx','cx','emptyFunction','requestAnimationFrame','xuiglyph','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){if(c.__markCompiled)c.__markCompiled();var ea,fa,ga=p.PropTypes;ea=babelHelpers.inherits(ha,p.Component);fa=ea&&ea.prototype;function ha(ia,ja){'use strict';fa.constructor.call(this,ia,ja);}ha.prototype.componentWillMount=function(){'use strict';this.loggedItems=new Array(this.props.items.length);this.setState({items:this.props.items,hidden:false});};ha.prototype.componentDidMount=function(){'use strict';this.$FeedEgoCarousel1();var ia=this.state.items[this.props.initialIndex];this.$FeedEgoCarousel2(ia);this.$FeedEgoCarousel3(this.props.initialIndex);this.$FeedEgoCarousel4();};ha.prototype.componentDidUpdate=function(){'use strict';this.$FeedEgoCarousel4();this.$FeedEgoCarousel1();};ha.prototype.componentWillUnmount=function(){'use strict';this.$FeedEgoCarousel5();};ha.prototype.render=function(){'use strict';if(this.refs.carosel)this.$FeedEgoCarousel5();if(this.state.hidden)return null;var ia=new u({type:'horizontal',centered:this.props.centered,firstAndLastAligned:this.state.items.length>1}),ja=null;if(this.state.items.length>1)ja=[p.createElement(v,{disabled:false},p.createElement('div',{className:"_4idl"},p.createElement('div',{className:"_4idm"}),p.createElement('div',{className:"_4idn"},p.createElement(l,{src:ca({name:'chevron-left',shade:'dark',size:'small'})})))),p.createElement(v,{disabled:false},p.createElement('div',{className:"_4idl"},p.createElement('div',{className:"_4idm"}),p.createElement('div',{className:"_4idn"},p.createElement(l,{src:ca({name:'chevron-right',shade:'dark',size:'small'})}))))];var ka=null;if(!!this.props.iconSrc&&!!this.props.title)ka=p.createElement(m,{className:"_1t3m",spacing:'medium'},p.createElement(l,{src:this.props.iconSrc,width:40}),p.createElement(n,{alignv:'middle',height:40},p.createElement('div',{className:"fwb _d_q"},this.props.title)));var la=this.props.showXout?p.createElement(x,{className:"_qnz",size:'medium',onClick:this.setState.bind(this,{hidden:true})}):null;return (p.createElement('div',{className:"_1t3l"},ka,la,p.createElement('div',{className:"_1mv9"},p.createElement(t,{ref:'carousel',animator:ia,arrows:ja,resizeViewport:'disabled',initialAutoplay:false,initialIndex:this.props.initialIndex,viewportWidth:this.props.viewportWidth,viewportHeight:this.props.viewportHeight,wrapAround:this.props.wrapAround,onItemClick:function(){return aa;}},this.$FeedEgoCarousel6(this.state.items)))));};ha.prototype.$FeedEgoCarousel1=function(){'use strict';this.arbiterToken=this.refs.carousel.subscribe(['animationEnd'],(function(ia,ja){if(ia==='animationEnd'){var ka=this.state.items[ja];this.$FeedEgoCarousel2(ka);this.$FeedEgoCarousel3(ja);}}).bind(this));};ha.prototype.$FeedEgoCarousel5=function(){'use strict';if(this.refs.carousel)this.refs.carousel.unsubscribe(this.arbiterToken);};ha.prototype.$FeedEgoCarousel6=function(ia){'use strict';var ja=[];for(var ka=0;ka<ia.length;ka++)ja.push(p.createElement(w,{key:ka},p.createElement(k,null,ia[ka])));return ja;};ha.prototype.$FeedEgoCarousel4=function(){'use strict';var ia=q.findDOMNode(this.refs.carousel);ba(function(){if(ia){var ja=j.scry(ia,"._559r");if(ja.length){var ka=r.getFloat(ja[0],'lineHeight'),la;for(var ma=0;ma<ja.length;ma++){la=j.scry(ja[ma],'.nameText')[0];o.add(la,ka,ja[ma]);}}}});};ha.prototype.$FeedEgoCarousel2=function(ia){'use strict';ia=j.scry(ia,'[data-ft]')[0];var ja=JSON.parse(ia.getAttribute('data-ft'));if(!ja||!ja.ego_id||this.loggedItems[ja.ego_id])return;var ka=s.getURIBuilder().setInt('ego_id',ja.ego_id).setInt('qid',ja.qid).setInt('mf_story_key',ja.mf_story_key).getURI();new h().setURI(ka).send();this.loggedItems[ja.ego_id]=true;};ha.prototype.$FeedEgoCarousel3=function(ia){'use strict';var ja=q.findDOMNode(this.refs.carousel);if(ia===0||ia===this.state.items.length-1){if(!i.hasClass(ja,"_4ji6"))i.addClass(ja,"_4ji6");}else if(i.hasClass(ja,"_4ji6"))i.removeClass(ja,"_4ji6");};ha.propTypes={initialIndex:ga.number,viewportWidth:ga.number.isRequired,viewportHeight:ga.number.isRequired,centered:ga.bool.isRequired,wrapAround:ga.bool.isRequired,showXout:ga.bool.isRequired,items:ga.arrayOf(ga.object),iconSrc:ga.string,title:ga.string};f.exports=ha;},null);