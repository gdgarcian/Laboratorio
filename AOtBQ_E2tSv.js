/*!CK:1467439680!*//*1458765585,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["AfMcH"]); }

__d("VideoChannelRequestStatus",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUCCEEDED:"succeeded",FAILED:"failed",ABORTED:"aborted"};},null);
__d('VideoChannelProgressCircle.react',['cx','Image.react','React','ReactDOM','Style'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'VideoChannelProgressCircle',_interval:0,_circlePerimeter:0,componentDidMount:function(){this.drawProgressCircle();},componentDidUpdate:function(){this.drawProgressCircle();},componentWillUnmount:function(){clearInterval(this._interval);},drawProgressCircle:function(){var k=c('ReactDOM').findDOMNode(this.refs.progressCircle),l=this._circlePerimeter,m=l/100;c('Style').set(k,'stroke-dashoffset',l+'px');clearInterval(this._interval);if(this.props.makeProgress)this._interval=setInterval(function(){l-=m;c('Style').set(k,'stroke-dashoffset',l+'px');if(l<=0){clearInterval(this._interval);this.props.onProgressDone();}}.bind(this),this.props.timeoutSec*10);},propTypes:{circleSize:i.oneOf(['small','medium',undefined]),makeProgress:i.bool.isRequired,onProgressDone:i.func.isRequired,timeoutSec:i.number.isRequired},render:function(){var k={small:40,medium:80},l={small:2,medium:4},m=k[this.props.circleSize||'medium'],n=l[this.props.circleSize||'medium'],o=m/2,p=o-n/2;this._circlePerimeter=p*2*Math.PI;return (c('React').createElement('div',null,c('React').createElement('svg',{className:"_20_8"},c('React').createElement('circle',{cx:o,cy:o,r:p,stroke:'#ffffff',strokeWidth:n,strokeDasharray:this._circlePerimeter,fill:'transparent'}),c('React').createElement('circle',{ref:'progressCircle',cx:o,cy:o,r:p,stroke:'#5890ff',strokeWidth:n,strokeDasharray:this._circlePerimeter,fill:'transparent'})),c('React').createElement(c('Image.react'),{className:"_3uya",src:'/images/video/channel_view/replay.svg'})));}});f.exports=j;},null);
__d('VideoChannelEndScreen',['cx','invariant','CSS','DOM','Event','React','ReactDOM','VideoChannelProgressCircle.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this.$VideoChannelEndScreen1=c('DOM').create('div',{className:"_1szy"});this.$VideoChannelEndScreen2=c('DOM').create('div',{className:"_1szz"},this.$VideoChannelEndScreen1);var l=["_1szy","_20_8","_3uya"];c('Event').listen(this.$VideoChannelEndScreen2,'click',function(m){if(m.target){var n=false;l.forEach(function(o){if(c('CSS').hasClass(m.target,o))n=true;});n&&k();}});}j.prototype.showEndScreen=function(k,l,m,n){'use strict';!k?i(0):void 0;c('CSS').addClass(k,"_1s-2");k.appendChild(this.$VideoChannelEndScreen2);c('CSS').conditionClass(this.$VideoChannelEndScreen1,"_2err",n==='small');c('ReactDOM').render(c('React').createElement(c('VideoChannelProgressCircle.react'),{makeProgress:l,onProgressDone:m,timeoutSec:3,circleSize:n}),this.$VideoChannelEndScreen1);};j.prototype.endCountdown=function(k){'use strict';!k?i(0):void 0;c('CSS').removeClass(k,"_1s-2");c('ReactDOM').unmountComponentAtNode(this.$VideoChannelEndScreen1);};j.prototype.getContainer=function(){'use strict';return this.$VideoChannelEndScreen2;};f.exports=j;},null);
__d("XVideoChannelViewAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/channel\/view\/async\/{id}\/",{id:{type:"String",required:true},original_video_id:{type:"String",required:true},cursor:{type:"String"},story_count:{type:"Int",defaultValue:3},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1},is_watch_and_scroll:{type:"Bool",defaultValue:false}});},null);
__d("XVideoChannelViewStoryAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/channel\/view\/story\/async\/{root_video_id}\/",{root_video_id:{type:"String",required:true},video_ids:{type:"StringVector",defaultValue:[]},use_video_placeholder:{type:"Bool",defaultValue:false},setup_interactions:{type:"Bool",defaultValue:false},is_first_story:{type:"Bool",defaultValue:false},feed_tracking_data:{type:"StringVector",defaultValue:[]},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1},channel_id:{type:"String"},ad_impression_token:{type:"String"},is_watch_and_scroll:{type:"Bool",defaultValue:false}});},null);
__d('VideoChannelStoryFetcher',['AsyncRequest','HTML','VideoChainingCaller','VideoChannelLogger','VideoChannelLoggerEvents','VideoChannelLoggerFields','VideoChannelRequestStatus','VideoChannelViewVariables','XVideoChannelViewAsyncController','XVideoChannelViewStoryAsyncController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m){'use strict';this.$VideoChannelStoryFetcher7=i;this.$VideoChannelStoryFetcher8=j;this.$VideoChannelStoryFetcher4=k;this.$VideoChannelStoryFetcher10=0;this.$VideoChannelStoryFetcher12=false;this.$VideoChannelStoryFetcher2=null;this.$VideoChannelStoryFetcher3=true;this.$VideoChannelStoryFetcher5=[];this.$VideoChannelStoryFetcher6=[];this.$VideoChannelStoryFetcher9={};if(m){this.$VideoChannelStoryFetcher5=m.videoIDs;this.$VideoChannelStoryFetcher6=m.feedTrackingData;this.$VideoChannelStoryFetcher2=m.cursorInfo.cursor;this.$VideoChannelStoryFetcher3=m.cursorInfo.hasNextPage;var n=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);c('VideoChannelLogger').setOffset(n);this.$VideoChannelStoryFetcher9.start=n;this.$VideoChannelStoryFetcher9.end=n+1;}c('VideoChannelLogger').setPosition(0);this.$VideoChannelStoryFetcher11=l;this.$VideoChannelStoryFetcher13=[];this.$VideoChannelStoryFetcher14=[];}h.prototype.reset=function(i,j){'use strict';this.$VideoChannelStoryFetcher7=i;this.$VideoChannelStoryFetcher8=j;this.$VideoChannelStoryFetcher10=0;this.$VideoChannelStoryFetcher2=null;this.$VideoChannelStoryFetcher3=true;this.$VideoChannelStoryFetcher5=[];this.$VideoChannelStoryFetcher6=[];this.$VideoChannelStoryFetcher9={};this.$VideoChannelStoryFetcher13=[];this.$VideoChannelStoryFetcher14=[];};h.prototype.abandonRequest=function(){'use strict';this.$VideoChannelStoryFetcher1&&this.$VideoChannelStoryFetcher1.abandon();};h.prototype.hasNext=function(){'use strict';var i=this.$VideoChannelStoryFetcher5.length-this.$VideoChannelStoryFetcher9.end>0;return this.$VideoChannelStoryFetcher3||i;};h.prototype.$VideoChannelStoryFetcher15=function(event,i,j){'use strict';var k={};k[c('VideoChannelLoggerFields').EVENT]=event;k[c('VideoChannelLoggerFields').REQUEST_STATUS]=i;k[c('VideoChannelLoggerFields').PERF_TIME_MS]=Date.now()-j;c('VideoChannelLogger').log(k);};h.prototype.fetchFirstStory=function(i,j,k){'use strict';if(j===null)if(this.$VideoChannelStoryFetcher5.length!==0){var l=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);j=this.$VideoChannelStoryFetcher6[l];}var m=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',this.$VideoChannelStoryFetcher4).setStringVector('video_ids',[this.$VideoChannelStoryFetcher7]).setString('root_video_id',this.$VideoChannelStoryFetcher7).setBool('is_first_story',true).setBool('use_video_placeholder',i).setBool('setup_interactions',k).setString('channel_id',this.$VideoChannelStoryFetcher8).setString('ad_impression_token',this.$VideoChannelStoryFetcher11);if(j)m.setStringVector('feed_tracking_data',[JSON.stringify(j)]);var n=Date.now(),o=new (c('AsyncRequest'))(m.getURI()).setAllowCrossPageTransition(true).setHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').SUCCEEDED,n);this.$VideoChannelStoryFetcher16();}.bind(this)).setErrorHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').FAILED,n);this.$VideoChannelStoryFetcher16();}.bind(this)).setAbortHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').ABORTED,n);this.$VideoChannelStoryFetcher16();}.bind(this));this.$VideoChannelStoryFetcher1=o;this.$VideoChannelStoryFetcher10=Date.now();o.send();};h.prototype.getPreloadedData=function(){'use strict';return {stories:this.$VideoChannelStoryFetcher13,thumbnails:this.$VideoChannelStoryFetcher14};};h.prototype.$VideoChannelStoryFetcher17=function(i,j){'use strict';if(!this.$VideoChannelStoryFetcher8)return;var k=c('XVideoChannelViewAsyncController').getURIBuilder().setString('id',this.$VideoChannelStoryFetcher8).setEnum('caller',this.$VideoChannelStoryFetcher4).setString('original_video_id',this.$VideoChannelStoryFetcher7).setInt('story_count',i).setBool('is_watch_and_scroll',this.$VideoChannelStoryFetcher12);if(this.$VideoChannelStoryFetcher2)k.setString('cursor',this.$VideoChannelStoryFetcher2.toString());var l=Date.now(),m=k.getURI(),n=new (c('AsyncRequest'))(m).setAllowCrossPageTransition(true).setHandler(function(o){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').SUCCEEDED,l);this.$VideoChannelStoryFetcher2=o.getPayload().cursor;this.$VideoChannelStoryFetcher3=o.getPayload().hasNextPage;this.$VideoChannelStoryFetcher16();this.$VideoChannelStoryFetcher18(o,function(p,q){this.$VideoChannelStoryFetcher13=[].concat(this.$VideoChannelStoryFetcher13,p);this.$VideoChannelStoryFetcher14=[].concat(this.$VideoChannelStoryFetcher14,q);return j(p,q);}.bind(this));}.bind(this)).setErrorHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').FAILED,l);this.$VideoChannelStoryFetcher16();}.bind(this)).setAbortHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').ABORTED,l);this.$VideoChannelStoryFetcher16();}.bind(this));this.$VideoChannelStoryFetcher1=n;n.send();};h.prototype.$VideoChannelStoryFetcher19=function(i,j,k){var l=this;'use strict';var m=this.$VideoChannelStoryFetcher9.end,n=this.$VideoChannelStoryFetcher5.length-m,o=m+Math.min(n,i);if(n>0){(function(){var p=l.$VideoChannelStoryFetcher5.slice(m,o),q=l.$VideoChannelStoryFetcher6.slice(m,o).map(function(t){return JSON.stringify(t);}),r=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',l.$VideoChannelStoryFetcher4).setString('root_video_id',l.$VideoChannelStoryFetcher7).setStringVector('video_ids',p).setStringVector('feed_tracking_data',q).setBool('is_watch_and_scroll',l.$VideoChannelStoryFetcher12),s=Date.now();l.$VideoChannelStoryFetcher1=new (c('AsyncRequest'))(r.getURI()).setAllowCrossPageTransition(true).setErrorHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').FAILED,s);this.$VideoChannelStoryFetcher16();}.bind(l)).setAbortHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').ABORTED,s);this.$VideoChannelStoryFetcher16();}.bind(l)).setHandler(function(t){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').SUCCEEDED,s);this.$VideoChannelStoryFetcher9.end=o;this.$VideoChannelStoryFetcher16();this.$VideoChannelStoryFetcher18(t,function(u,v){this.$VideoChannelStoryFetcher13=[].concat(this.$VideoChannelStoryFetcher13,u);this.$VideoChannelStoryFetcher14=[].concat(this.$VideoChannelStoryFetcher14,v);return j(u,v);}.bind(this));}.bind(l));l.$VideoChannelStoryFetcher1.send();if(k)k(n);})();}else if(this.$VideoChannelStoryFetcher3){this.$VideoChannelStoryFetcher17(i,j);if(k)k(i);}};h.prototype.$VideoChannelStoryFetcher20=function(i,j,k){var l=this;'use strict';var m=this.$VideoChannelStoryFetcher9.start;if(m>0)(function(){var n=Math.max(m-i,0),o=l.$VideoChannelStoryFetcher5.slice(n,m),p=l.$VideoChannelStoryFetcher6.slice(n,m).map(function(s){return JSON.stringify(s);}),q=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',l.$VideoChannelStoryFetcher4).setString('root_video_id',l.$VideoChannelStoryFetcher7).setStringVector('video_ids',o).setStringVector('feed_tracking_data',p),r=Date.now();l.$VideoChannelStoryFetcher1=new (c('AsyncRequest'))(q.getURI()).setAllowCrossPageTransition(true).setErrorHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').FAILED,r);this.$VideoChannelStoryFetcher16();}.bind(l)).setAbortHandler(function(){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').ABORTED,r);this.$VideoChannelStoryFetcher16();}.bind(l)).setHandler(function(s){this.$VideoChannelStoryFetcher15(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').SUCCEEDED,r);this.$VideoChannelStoryFetcher9.start=n;this.$VideoChannelStoryFetcher16();this.$VideoChannelStoryFetcher18(s,j);}.bind(l));l.$VideoChannelStoryFetcher1.send();if(k)k(m-n);})();};h.prototype.fetchStories=function(i,j,k){'use strict';var l=c('VideoChannelViewVariables').defaultStoriesToLoad;if(this.$VideoChannelStoryFetcher1)return;if(i){this.$VideoChannelStoryFetcher19(l,j,k);}else this.$VideoChannelStoryFetcher20(l,j,k);};h.prototype.$VideoChannelStoryFetcher18=function(i,j){'use strict';var k=i.getPayload(),l=c('HTML').replaceJSONWrapper(k.stories).getNodes(),m=k.thumbnails.map(function(n){return c('HTML').replaceJSONWrapper(n).getRootNode();});j(l,m);};h.prototype.$VideoChannelStoryFetcher16=function(){'use strict';this.$VideoChannelStoryFetcher1=null;};h.prototype.setIsWatchAndScroll=function(i){'use strict';this.$VideoChannelStoryFetcher12=i;};f.exports=h;},null);
__d('VideoWatchAndScrollContainer.react',['csx','cx','CSS','DOM','DOMContainer.react','DOMDimensions','Event','Parent','React','ReactCSSTransitionGroup','Rect','SubscriptionsHandler','cancelAnimationFrame','getViewportDimensions','requestAnimationFrame','shallowCompare','throttle'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=300,n=530,o={NW:'nw',NE:'ne',SE:'se',SW:'sw'};j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(q,r){k.constructor.call(this,q,r);this.state=this.$VideoWatchAndScrollContainer1(this.props);}p.prototype.$VideoWatchAndScrollContainer1=function(q){var r=this.$VideoWatchAndScrollContainer2(),s=this.$VideoWatchAndScrollContainer3(this.props.initialPosition,r);return {channelVideoElements:[this.props.initialVideoElement],containerBoundingBox:r,dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,height:s.height,left:s.left,overlayShown:false,resizeDirection:null,top:s.top,width:s.width,videoIndex:0};};p.prototype.shouldComponentUpdate=function(q,r){return c('shallowCompare')(this,q,r);};p.prototype.componentDidUpdate=function(q,r){if(!r)return;if(!r.dragging&&this.state.dragging){this.documentSubscriptions=new (c('SubscriptionsHandler'))();this.documentSubscriptions.addSubscriptions(c('Event').listen(document,'mousemove',this.$VideoWatchAndScrollContainer4.bind(this)),c('Event').listen(document,'mouseup',this.$VideoWatchAndScrollContainer5.bind(this)));}else if(r.dragging&&!this.state.dragging)this.documentSubscriptions.release();var s=["._23if","._23ig"];this.state.channelVideoElements.forEach(function(t){s.forEach(function(u){var v=c('DOM').scry(t,u),w=v[0];if(w)c('CSS').hide(w);});});};p.prototype.componentDidMount=function(){this.resizeListener=c('Event').listen(window,'resize',c('throttle')(function(){var q=this.$VideoWatchAndScrollContainer2(),r=this.$VideoWatchAndScrollContainer3({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width},q);this.setState({containerBoundingBox:q,height:r.height,left:r.left,top:r.top,width:r.width});}.bind(this),100));};p.prototype.componentWillUnmount=function(){this.props.onInitialPositionUpdate({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width});if(this.documentSubscriptions)this.documentSubscriptions.release();if(this.resizeListener)this.resizeListener.remove();};p.prototype.$VideoWatchAndScrollContainer6=function(q,event){this.$VideoWatchAndScrollContainer7(event,q);};p.prototype.$VideoWatchAndScrollContainer8=function(event){this.$VideoWatchAndScrollContainer7(event,null);};p.prototype.$VideoWatchAndScrollContainer7=function(event,q){if(event.button!==0)return;if(c('Parent').bySelector(event.target,"._360f"))return;this.props.onGrab();this.setState({containerBoundingBox:this.$VideoWatchAndScrollContainer2(),dragging:true,draggingStartHeight:this.state.height,draggingStartLeft:this.state.left,draggingStartMousePositionX:event.screenX,draggingStartMousePositionY:event.screenY,draggingStartTop:this.state.top,draggingStartWidth:this.state.width,resizeDirection:q});event.preventDefault();};p.prototype.$VideoWatchAndScrollContainer2=function(){var q=0,r=c('DOM').scry(document.body,".fbChatSidebar");if(r.length===1)q=c('DOMDimensions').getElementDimensions(r[0]).width;var s=c('getViewportDimensions').withoutScrollbars(),t=new (c('Rect'))(43,s.width-q,s.height,0);return t;};p.prototype.$VideoWatchAndScrollContainer3=function(q,r){var s=new (c('Rect'))(q.top,q.left+q.width,q.top+q.height,q.left);s=s.boundWithin(r);return {height:s.h(),left:s.getLeft(),top:s.getTop(),width:s.w()};};p.prototype.$VideoWatchAndScrollContainer9=function(q,r,s){var t=q.top,u=r.getTop(),v=u-t;if(v>0){if(s===o.NE||s===o.NW)q.height-=v;q.top=u;}var w=q.left,x=r.getLeft(),y=x-w;if(y>0){if(s===o.NW||s===o.SW)q.width-=y;q.left=x;}var z=q.top+q.height,aa=r.getTop()+r.h(),ba=z-aa;if(ba>0)q.height=aa-q.top;var ca=q.left+q.width,da=r.getLeft()+r.w(),ea=ca-da;if(ea>0)q.width=da-q.left;};p.prototype.$VideoWatchAndScrollContainer10=function(q,r,s){if(q.width<m){if(s===o.NW||s===o.SW)q.left-=m-q.width;q.width=m;}if(q.height<m){if(s===o.NE||s===o.NW)q.top-=m-q.height;q.height=m;}};p.prototype.$VideoWatchAndScrollContainer11=function(q,r,s){if(q.width>n){if(s===o.NW||s===o.SW)q.left+=q.width-n;q.width=n;}if(q.height>n){if(s===o.NE||s===o.NW)q.top+=q.height-n;q.height=n;}};p.prototype.$VideoWatchAndScrollContainer12=function(q,r,s){var t=q.width/q.height,u=r.width/r.height;if(t>u){var v=q.height*u;if(s===o.NW||s===o.SW)q.left+=q.width-v;q.width=v;}else if(t<u){var w=q.width/u;if(s===o.NE||s===o.NW)q.top+=q.height-w;q.height=w;}};p.prototype.$VideoWatchAndScrollContainer13=function(q,r,s,t){this.$VideoWatchAndScrollContainer9(q,s,t);this.$VideoWatchAndScrollContainer10(q,r,t);this.$VideoWatchAndScrollContainer11(q,r,t);this.$VideoWatchAndScrollContainer12(q,r,t);return {height:q.height,left:q.left,top:q.top,width:q.width};};p.prototype.$VideoWatchAndScrollContainer4=function(event){c('cancelAnimationFrame')(this.dragUpdateRequestAnimationFrameID);this.dragUpdateRequestAnimationFrameID=c('requestAnimationFrame')(this.$VideoWatchAndScrollContainer14.bind(this,event));};p.prototype.$VideoWatchAndScrollContainer14=function(event){if(!this.state.dragging)return;var q=event.screenX-this.state.draggingStartMousePositionX,r=event.screenY-this.state.draggingStartMousePositionY,s=this.state.resizeDirection,t;if(!s){t=this.$VideoWatchAndScrollContainer3({height:this.state.draggingStartHeight,left:this.state.draggingStartLeft+q,top:this.state.draggingStartTop+r,width:this.state.draggingStartWidth},this.state.containerBoundingBox);this.setState({height:t.height,left:t.left,top:t.top,width:t.width});}else{var u=this.state.draggingStartHeight,v=this.state.draggingStartLeft,w=this.state.draggingStartTop,x=this.state.draggingStartWidth;if(s===o.NE||s===o.SE)x+=q;if(s===o.NW||s===o.SW){v+=q;x-=q;}if(s===o.SE||s===o.SW)u+=r;if(s===o.NE||s===o.NW){w+=r;u-=r;}t=this.$VideoWatchAndScrollContainer13({height:u,left:v,top:w,width:x},{height:this.state.draggingStartHeight,left:this.state.draggingStartLeft,top:this.state.draggingStartTop,width:this.state.draggingStartWidth},this.state.containerBoundingBox,s);this.setState({height:t.height,left:t.left,top:t.top,width:t.width});}event.preventDefault();};p.prototype.$VideoWatchAndScrollContainer5=function(event){c('cancelAnimationFrame')(this.dragUpdateRequestAnimationFrameID);this.props.onDrop();this.setState({dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,resizeDirection:null});event.preventDefault();};p.prototype.$VideoWatchAndScrollContainer15=function(q,r){if(q>this.state.channelVideoElements.length)return null;var s=this.state.channelVideoElements[q];if(!s)return null;return (c('React').createElement('div',{className:"_2yq3"+(r==='left'?' '+"_2yq4":'')+(r==='center'?' '+"_2yq5":'')+(r==='right'?' '+"_2yq6":''),key:s.id},c('React').createElement(c('DOMContainer.react'),null,s)));};p.prototype.render=function(){var q={height:Math.round(this.state.height)+'px',left:this.state.left+'px',top:this.state.top+'px',width:Math.round(this.state.width)+'px'};this.props.onInitialPositionUpdate({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width});var r=this.state.channelVideoElements,s=r[this.state.videoIndex];if(s)c('CSS').addClass(s,"_1kfp");return (c('React').createElement(c('ReactCSSTransitionGroup'),{transitionAppear:true,transitionAppearTimeout:500,transitionEnter:false,transitionLeave:false,transitionName:'fbWatchAndScroll-FadeIn'},c('React').createElement('div',{className:"_360g",style:q},c('React').createElement('div',{className:"_52u8",onMouseDown:this.$VideoWatchAndScrollContainer8.bind(this)},this.$VideoWatchAndScrollContainer15(this.state.videoIndex-1,'left'),this.$VideoWatchAndScrollContainer15(this.state.videoIndex,'center'),this.$VideoWatchAndScrollContainer15(this.state.videoIndex+1,'right')),c('React').createElement('div',{className:"_52ua",onMouseDown:this.$VideoWatchAndScrollContainer6.bind(this,o.NW)}),c('React').createElement('div',{className:"_52uc",onMouseDown:this.$VideoWatchAndScrollContainer6.bind(this,o.NE)}),c('React').createElement('div',{className:"_52ui",onMouseDown:this.$VideoWatchAndScrollContainer6.bind(this,o.SE)}),c('React').createElement('div',{className:"_52uj",onMouseDown:this.$VideoWatchAndScrollContainer6.bind(this,o.SW)}),c('React').createElement('div',{className:(this.state.overlayShown?"_518-":'')+(' '+"_518_")},this.state.videoIndex>0&&c('React').createElement('a',{alt:'Button to go to the previous video item',className:"_5190 _360f",onClick:function(){return this.props.onChannelNavigation(-1);}.bind(this)}),this.state.videoIndex<r.length-1&&c('React').createElement('a',{alt:'Button to go to the next video item',className:"_5199 _360f",onClick:function(){return this.props.onChannelNavigation(1);}.bind(this)})),c('React').createElement('ul',{className:"_2yq7"},r.map(function(t,u){if(u>this.state.videoIndex+1||u<this.state.videoIndex-1)c('CSS').removeClass(t,"_1kfp");if(u<=this.state.videoIndex+1)return null;return (c('React').createElement('li',{key:t.id},c('React').createElement(c('DOMContainer.react'),null,t)));}.bind(this))))));};p.propTypes={initialPosition:l.object.isRequired,onChannelNavigation:l.func.isRequired,onDrop:l.func.isRequired,onGrab:l.func.isRequired,onInitialPositionUpdate:l.func.isRequired,initialVideoElement:l.instanceOf(HTMLElement).isRequired};f.exports=p;},null);
__d('VideoWatchAndScrollNextPreview.react',['csx','cx','fbt','CenteredContainer.react','DOM','DOMContainer.react','LeftRight.react','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'VideoWatchAndScrollNextPreview',propTypes:{thumbnail:k.instanceOf(HTMLElement).isRequired,owner:k.string,viewCount:k.string,onNextPreviewClick:k.func.isRequired},render:function(){var m=c('DOM').find(this.props.thumbnail,"._38a3"),n=parseInt(m.style.height,10)<67;return (c('React').createElement(c('CenteredContainer.react'),{className:(!n?"_3-8y":'')+(n?' '+"_3-8w":'')},c('React').createElement('div',{className:"_4_d- clearfix"},c('React').createElement(c('LeftRight.react'),null,c('React').createElement('div',null,c('React').createElement(c('DOMContainer.react'),null,this.props.thumbnail)),c('React').createElement('div',{className:"_4_d_"+(n?' '+"_4e_h":'')},c('React').createElement('div',{className:"_4_e0 _4_e1"},j._("Next Up:")),c('React').createElement('div',{className:"_4_e0 _4_e2 _4_e1"},this.props.owner),c('React').createElement('div',{className:"_4_e0 _4_e1"},this.props.viewCount))),c('React').createElement('div',{className:"_4_e3",onClick:function(){return this.props.onNextPreviewClick();}.bind(this)}))));}});f.exports=l;},null);
__d('VideoWatchAndScrollController',['csx','cx','invariant','CSS','DOM','DOMDimensions','EventListener','Image.react','React','ReactDOM','SubscriptionsHandler','VideoAutoplayControllerX','VideoChainingCaller','VideoChannelEndScreen','VideoChannelStoryFetcher','VideoFrameBuffer','VideoPlayerExperiments','VideoPlayerLoggerEvent','VideoPlayerReason','VideoWatchAndScrollContainer.react','VideoWatchAndScrollNextPreview.react','cancelAnimationFrame','destroyOnUnload','getViewportDimensions','requestAnimationFrame','throttle'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=169,l=300,m=10,n=300,o=300,p=300,q=2,r=['beginPlayback','qualityChange'],s=null;function t(u,v,w,x){'use strict';this.$VideoWatchAndScrollController38=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController39=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController1=false;this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController3=null;this.$VideoWatchAndScrollController4=null;this.$VideoWatchAndScrollController5=false;this.$VideoWatchAndScrollController42=w;this.$VideoWatchAndScrollController43=x;this.$VideoWatchAndScrollController47=false;this.$VideoWatchAndScrollController37=false;this.$VideoWatchAndScrollController41=null;if(this.$VideoWatchAndScrollController43){this.$VideoWatchAndScrollController41=new (c('VideoChannelStoryFetcher'))(v,u,this.$VideoWatchAndScrollController42,null);this.$VideoWatchAndScrollController41.setIsWatchAndScroll(true);}this.$VideoWatchAndScrollController44=[];this.$VideoWatchAndScrollController46=0;this.$VideoWatchAndScrollController48=[];this.$VideoWatchAndScrollController6=k;this.$VideoWatchAndScrollController7=l;this.$VideoWatchAndScrollController10=window.document.getElementById('leftCol');this.$VideoWatchAndScrollController11=window.document.getElementById('pagelet_bluebar');this.$VideoWatchAndScrollController49();c('destroyOnUnload')(function(){this.$VideoWatchAndScrollController50();if(this.$VideoWatchAndScrollController5)this.$VideoWatchAndScrollController51();if(this.$VideoWatchAndScrollController38)this.$VideoWatchAndScrollController38.release();if(this.$VideoWatchAndScrollController39)this.$VideoWatchAndScrollController39.release();if(this===s)s=null;}.bind(this));this.$VideoWatchAndScrollController45=new (c('VideoChannelEndScreen'))(function(){this.$VideoWatchAndScrollController45.endCountdown(this.$VideoWatchAndScrollController16);if(this.$VideoWatchAndScrollController17)this.$VideoWatchAndScrollController17.play(c('VideoPlayerReason').USER);}.bind(this));}t.prototype.$VideoWatchAndScrollController52=function(u,v,w){'use strict';!u?j(0):void 0;!v.length?j(0):void 0;this.$VideoWatchAndScrollController47=false;this.$VideoWatchAndScrollController39=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController46=w;this.$VideoWatchAndScrollController41=u;u.setIsWatchAndScroll(true);this.$VideoWatchAndScrollController48=u.getPreloadedData().thumbnails||[];this.$VideoWatchAndScrollController44=v.slice(0);this.$VideoWatchAndScrollController44.forEach(function(y){this.$VideoWatchAndScrollController53(y);}.bind(this));var x=this.$VideoWatchAndScrollController44.shift();this.$VideoWatchAndScrollController1=true;this.$VideoWatchAndScrollController54(x,c('VideoPlayerReason').USER);};t.registerVideoController=function(u,v,w,x){'use strict';if(s==null)s=new t(u.getVideoChannelID(),u.getVideoID(),v,x);s.$VideoWatchAndScrollController38.addSubscriptions(u.addListener('enterWatchAndScroll',function(){if(s)s.$VideoWatchAndScrollController55(u);}),u.addListener('exitWatchAndScroll',function(){if(s)s.$VideoWatchAndScrollController56(u);}),u.addListener('WatchAndScroll/close',function(){if(s)s.$VideoWatchAndScrollController57();}),u.addListener('WatchAndScroll/overlayShown',function(){return s&&s.$VideoWatchAndScrollController58();}),u.addListener('WatchAndScroll/overlayHidden',function(){return s&&s.$VideoWatchAndScrollController59();}));var y=['beginPlayback','changeVolume','muteVideo','qualityChange','toggleFullscreen','unmuteVideo','VideoChannelController/enterChannel'];y.forEach(function(event){if(s)s.$VideoWatchAndScrollController38.addSubscriptions(u.addListener(event,function(aa){if(s)s.$VideoWatchAndScrollController60(u,w,event,aa);}));});if(w){var z=['pausePlayback','finishPlayback','muteVideo'];z.forEach(function(event){if(s)s.$VideoWatchAndScrollController38.addSubscriptions(u.addListener(event,function(){if(s)s.$VideoWatchAndScrollController61(u,event);}));});}};t.registerChannelVideoController=function(u){'use strict';if(!s)return;s.$VideoWatchAndScrollController53(u);s.$VideoWatchAndScrollController44.push(u);};t.getStoryFetcherData=function(){'use strict';return s&&{storyFetcher:s.$VideoWatchAndScrollController41,videoPlayerControllers:s.$VideoWatchAndScrollController44,channelVideoIndex:s.$VideoWatchAndScrollController46,rootVideoPlayerController:s.$VideoWatchAndScrollController18};};t.getVideoPlaceholder=function(){'use strict';if(!s)return null;return s.$VideoWatchAndScrollController20;};t.getReactContainer=function(){'use strict';if(!s)return null;return s.$VideoWatchAndScrollController15;};t.onEnterChannel=function(){'use strict';if(!s)return;s.$VideoWatchAndScrollController47=true;s.$VideoWatchAndScrollController41&&s.$VideoWatchAndScrollController41.abandonRequest();if(!s.$VideoWatchAndScrollController15)return;var u=["._23if","._23ig"];s.$VideoWatchAndScrollController15.state.channelVideoElements.forEach(function(v){u.forEach(function(w){var x=c('DOM').scry(v,w),y=x[0];if(y)c('CSS').show(y);});});};t.resetFromChannelView=function(u,v,w){'use strict';if(!s)return;s.$VideoWatchAndScrollController52(u,v,w);};t.prototype.$VideoWatchAndScrollController60=function(u,v,event,w){'use strict';if(this.$VideoWatchAndScrollController5){if(this.$VideoWatchAndScrollController17!==u&&(!c('VideoPlayerExperiments').autoplayWhenWNS||!r.includes(event)))this.$VideoWatchAndScrollController17.pause(c('VideoPlayerReason').USER);}else if(v)if(event==='toggleFullscreen'&&u.isFullscreen()||event==='VideoChannelController/enterChannel'){if(this.$VideoWatchAndScrollController26)this.$VideoWatchAndScrollController50();}else if((event!=='beginPlayback'||w&&w.reason===c('VideoPlayerReason').USER)&&u.isState('playing')&&!u.isMuted()&&!u.isFullscreen()&&!u.getIsInChannel())this.$VideoWatchAndScrollController62(u);};t.prototype.$VideoWatchAndScrollController61=function(u,event){'use strict';if(c('VideoPlayerExperiments').autoplayWhenWNS&&this.$VideoWatchAndScrollController17&&this.$VideoWatchAndScrollController17!==u)return;if(this.$VideoWatchAndScrollController12&&event==='pausePlayback'){this.$VideoWatchAndScrollController12=false;}else if(this.$VideoWatchAndScrollController13&&event==='muteVideo'){this.$VideoWatchAndScrollController13=false;}else if(!this.$VideoWatchAndScrollController22&&this.$VideoWatchAndScrollController26)this.$VideoWatchAndScrollController50();};t.prototype.$VideoWatchAndScrollController62=function(u){'use strict';var v=u.getVideoNode();if(!v.offsetParent)return;this.$VideoWatchAndScrollController26=u;this.$VideoWatchAndScrollController33=c('throttle')(this.$VideoWatchAndScrollController63.bind(this),100);window.addEventListener('resize',this.$VideoWatchAndScrollController33);this.$VideoWatchAndScrollController64(v);this.$VideoWatchAndScrollController65();};t.prototype.$VideoWatchAndScrollController63=function(){'use strict';if(this.$VideoWatchAndScrollController26){this.$VideoWatchAndScrollController64(this.$VideoWatchAndScrollController20||this.$VideoWatchAndScrollController26.getVideoNode());this.$VideoWatchAndScrollController34();}};t.prototype.$VideoWatchAndScrollController66=function(u){'use strict';var v={left:0,top:0};do{v.top+=u.offsetTop;v.left+=u.offsetLeft;}while(u=u.offsetParent);return v;};t.prototype.$VideoWatchAndScrollController64=function(u){'use strict';this.$VideoWatchAndScrollController29=this.$VideoWatchAndScrollController66(u);this.$VideoWatchAndScrollController35=u.scrollWidth;this.$VideoWatchAndScrollController36=u.scrollHeight;var v=Math.max(this.$VideoWatchAndScrollController35,this.$VideoWatchAndScrollController36);if(v<p){var w=p/v;this.$VideoWatchAndScrollController35*=w;this.$VideoWatchAndScrollController36*=w;}var x=c('getViewportDimensions').withoutScrollbars();if(this.$VideoWatchAndScrollController10){var y=this.$VideoWatchAndScrollController66(this.$VideoWatchAndScrollController10),z=window.getComputedStyle(this.$VideoWatchAndScrollController10),aa=parseInt(z.paddingTop,10);this.$VideoWatchAndScrollController28=y.top+aa;if(this.$VideoWatchAndScrollController35>=this.$VideoWatchAndScrollController36){var ba=p;}else ba=p*this.$VideoWatchAndScrollController35/this.$VideoWatchAndScrollController36;if(y.left<=this.$VideoWatchAndScrollController29.left){var ca=parseInt(z.paddingRight,10),da=y.left+this.$VideoWatchAndScrollController10.scrollWidth-ca;this.$VideoWatchAndScrollController24=Math.max(m,da-this.$VideoWatchAndScrollController35);var ea=Math.max(ba,da-this.$VideoWatchAndScrollController24);}else{var fa=parseInt(z.paddingLeft,10),ga=y.left+fa,ha=x.width-m;ea=Math.max(ba,Math.min(this.$VideoWatchAndScrollController35,ha-ga));this.$VideoWatchAndScrollController24=Math.min(ga,ha-ea);}}else{ea=l;this.$VideoWatchAndScrollController24=m;this.$VideoWatchAndScrollController28=m;if(this.$VideoWatchAndScrollController11)this.$VideoWatchAndScrollController28+=this.$VideoWatchAndScrollController11.scrollHeight;}this.$VideoWatchAndScrollController25=ea/this.$VideoWatchAndScrollController35;this.$VideoWatchAndScrollController23=Math.abs(this.$VideoWatchAndScrollController29.left-this.$VideoWatchAndScrollController24)/q;this.$VideoWatchAndScrollController27=this.$VideoWatchAndScrollController29.top-this.$VideoWatchAndScrollController28;};t.prototype.$VideoWatchAndScrollController65=function(){'use strict';if(this.$VideoWatchAndScrollController21||this.$VideoWatchAndScrollController26.isState('playing')&&!this.$VideoWatchAndScrollController26.isMuted()){this.$VideoWatchAndScrollController67(this.$VideoWatchAndScrollController68.bind(this));this.$VideoWatchAndScrollController68();}else this.$VideoWatchAndScrollController50();};t.prototype.$VideoWatchAndScrollController68=function(){'use strict';if(this.$VideoWatchAndScrollController22||!this.$VideoWatchAndScrollController26)return;var u=this.$VideoWatchAndScrollController27+this.$VideoWatchAndScrollController36/4;if(window.scrollY>u){this.$VideoWatchAndScrollController37=true;return;}if(window.scrollY>this.$VideoWatchAndScrollController27){if(this.$VideoWatchAndScrollController37)return;var v=this.$VideoWatchAndScrollController29.left-window.scrollX,w=this.$VideoWatchAndScrollController29.top-window.scrollY;this.$VideoWatchAndScrollController8={left:Math.max(v,0),top:Math.max(w,0),width:this.$VideoWatchAndScrollController35,height:this.$VideoWatchAndScrollController36};c('CSS').addClass(this.$VideoWatchAndScrollController69(),"_5h98");this.$VideoWatchAndScrollController22=this.$VideoWatchAndScrollController26.addListener('stateChange',this.$VideoWatchAndScrollController70.bind(this));this.$VideoWatchAndScrollController54(this.$VideoWatchAndScrollController26,c('VideoPlayerReason').AUTOPLAY);this.$VideoWatchAndScrollController67(this.$VideoWatchAndScrollController71.bind(this));this.$VideoWatchAndScrollController71();}else this.$VideoWatchAndScrollController37=false;};t.prototype.$VideoWatchAndScrollController71=function(){'use strict';if(window.scrollY<=this.$VideoWatchAndScrollController27){c('CSS').removeClass(this.$VideoWatchAndScrollController69(),"_5h98");var u=this.$VideoWatchAndScrollController26.isMuted(),v=this.$VideoWatchAndScrollController26.isState('playing')||this.$VideoWatchAndScrollController22||this.$VideoWatchAndScrollController21;if(v){this.$VideoWatchAndScrollController21=this.$VideoWatchAndScrollController26.addListener('stateChange',this.$VideoWatchAndScrollController72.bind(this));c('CSS').addClass(this.$VideoWatchAndScrollController26.getRootNode(),"_5h9g");var w=this.$VideoWatchAndScrollController26.getOption('VideoControls','areControlsVisible');if(!w&&!this.$VideoWatchAndScrollController32)this.$VideoWatchAndScrollController32=this.$VideoWatchAndScrollController26.getOption('VideoControls','acquireForceHideLock');}this.$VideoWatchAndScrollController51();if(v)this.$VideoWatchAndScrollController26.play(c('VideoPlayerReason').AUTOPLAY);if(!u)this.$VideoWatchAndScrollController26.unmute();this.$VideoWatchAndScrollController65();}else if(!this.$VideoWatchAndScrollController40)this.$VideoWatchAndScrollController40=c('requestAnimationFrame')(this.$VideoWatchAndScrollController73.bind(this));};t.prototype.$VideoWatchAndScrollController72=function(){'use strict';if(this.$VideoWatchAndScrollController21&&this.$VideoWatchAndScrollController26.isState('playing')&&!this.$VideoWatchAndScrollController12)this.$VideoWatchAndScrollController74();};t.prototype.$VideoWatchAndScrollController70=function(){'use strict';if(this.$VideoWatchAndScrollController22&&this.$VideoWatchAndScrollController26.isState('playing')&&!this.$VideoWatchAndScrollController12)this.$VideoWatchAndScrollController75();};t.prototype.$VideoWatchAndScrollController73=function(){'use strict';delete this.$VideoWatchAndScrollController40;var u=window.scrollY-this.$VideoWatchAndScrollController27,v=u>=this.$VideoWatchAndScrollController23,w=v?1:u/this.$VideoWatchAndScrollController23,x=this.$VideoWatchAndScrollController29.left+w*(this.$VideoWatchAndScrollController24-this.$VideoWatchAndScrollController29.left);x-=window.scrollX;var y=1-w*(1-this.$VideoWatchAndScrollController25),z=y*this.$VideoWatchAndScrollController36;this.$VideoWatchAndScrollController15.setState({left:Math.max(x,0),top:Math.max(this.$VideoWatchAndScrollController28,0),width:y*this.$VideoWatchAndScrollController35,height:z});if(v)this.$VideoWatchAndScrollController50();};t.prototype.$VideoWatchAndScrollController67=function(u){'use strict';window.removeEventListener('scroll',this.$VideoWatchAndScrollController34);this.$VideoWatchAndScrollController34=u||null;window.addEventListener('scroll',this.$VideoWatchAndScrollController34);c('cancelAnimationFrame')(this.$VideoWatchAndScrollController40);delete this.$VideoWatchAndScrollController40;};t.prototype.$VideoWatchAndScrollController50=function(){'use strict';window.removeEventListener('resize',this.$VideoWatchAndScrollController33);this.$VideoWatchAndScrollController67();if(this.$VideoWatchAndScrollController21)this.$VideoWatchAndScrollController74();if(this.$VideoWatchAndScrollController22){c('CSS').removeClass(this.$VideoWatchAndScrollController69(),"_5h98");this.$VideoWatchAndScrollController75();}delete this.$VideoWatchAndScrollController26;this.$VideoWatchAndScrollController49();this.$VideoWatchAndScrollController37=false;};t.prototype.$VideoWatchAndScrollController74=function(){'use strict';c('CSS').removeClass(this.$VideoWatchAndScrollController26.getRootNode(),"_5h9g");if(this.$VideoWatchAndScrollController32){this.$VideoWatchAndScrollController32.release();delete this.$VideoWatchAndScrollController32;}this.$VideoWatchAndScrollController21.remove();delete this.$VideoWatchAndScrollController21;};t.prototype.$VideoWatchAndScrollController75=function(){'use strict';this.$VideoWatchAndScrollController22.remove();delete this.$VideoWatchAndScrollController22;};t.prototype.$VideoWatchAndScrollController55=function(u){'use strict';this.$VideoWatchAndScrollController50();if(this.$VideoWatchAndScrollController5&&this.$VideoWatchAndScrollController17!==u){this.$VideoWatchAndScrollController30=u;this.$VideoWatchAndScrollController51();}else this.$VideoWatchAndScrollController54(u,c('VideoPlayerReason').USER);};t.prototype.$VideoWatchAndScrollController54=function(u,v){'use strict';if(!this.$VideoWatchAndScrollController1)!!this.$VideoWatchAndScrollController5?j(0):void 0;this.$VideoWatchAndScrollController18=u;this.$VideoWatchAndScrollController17=this.$VideoWatchAndScrollController46>0?this.$VideoWatchAndScrollController76(this.$VideoWatchAndScrollController46):u;this.$VideoWatchAndScrollController16=this.$VideoWatchAndScrollController17.getRootNode();var w=!this.$VideoWatchAndScrollController17.isMuted(),x=!this.$VideoWatchAndScrollController1||this.$VideoWatchAndScrollController17.isState('playing');if(!this.$VideoWatchAndScrollController1){var y=u.getVideoInfo();if(y&&y.isLiveStream&&this.$VideoWatchAndScrollController17.isPlayerVersion('silvercity')){this.$VideoWatchAndScrollController6=o;this.$VideoWatchAndScrollController7=n;this.$VideoWatchAndScrollController49();}this.$VideoWatchAndScrollController9={videoRootNode:this.$VideoWatchAndScrollController16.parentNode,dimensions:c('DOMDimensions').getElementDimensions(this.$VideoWatchAndScrollController16)};this.$VideoWatchAndScrollController20=this.$VideoWatchAndScrollController77(this.$VideoWatchAndScrollController9.dimensions,this.$VideoWatchAndScrollController17.getVideoNode());c('DOM').insertAfter(this.$VideoWatchAndScrollController16,this.$VideoWatchAndScrollController20);this.$VideoWatchAndScrollController14=c('EventListener').listen(this.$VideoWatchAndScrollController16.parentNode,'click',function(){this.$VideoWatchAndScrollController50();this.$VideoWatchAndScrollController51();}.bind(this));this.$VideoWatchAndScrollController12=true;this.$VideoWatchAndScrollController17.pause(c('VideoPlayerReason').USER);if(this.$VideoWatchAndScrollController17.isPlayerVersion('silvercity'))this.$VideoWatchAndScrollController17.detachRootNode();this.$VideoWatchAndScrollController17.setDimensions(this.$VideoWatchAndScrollController7,this.$VideoWatchAndScrollController6);this.$VideoWatchAndScrollController5=true;this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController78();this.$VideoWatchAndScrollController19=this.$VideoWatchAndScrollController79(this.$VideoWatchAndScrollController17);}else{this.$VideoWatchAndScrollController12=true;this.$VideoWatchAndScrollController17.pause(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController17.setDimensions(this.$VideoWatchAndScrollController15.state.width||this.$VideoWatchAndScrollController7,this.$VideoWatchAndScrollController15.state.height||this.$VideoWatchAndScrollController6);}x&&this.$VideoWatchAndScrollController17.play(v);w&&this.$VideoWatchAndScrollController17.unmute();this.$VideoWatchAndScrollController17.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED,{player_format:'watch_scroll'});var z=this.$VideoWatchAndScrollController41;if(!this.$VideoWatchAndScrollController1&&z){z.reset(u.getVideoID(),u.getVideoChannelID());this.$VideoWatchAndScrollController80();this.$VideoWatchAndScrollController53(this.$VideoWatchAndScrollController17);}};t.prototype.$VideoWatchAndScrollController53=function(u){'use strict';this.$VideoWatchAndScrollController39.addSubscriptions(u.addListener('finishPlayback',function(){var v=this.$VideoWatchAndScrollController15.state.width<430;this.$VideoWatchAndScrollController45.showEndScreen(this.$VideoWatchAndScrollController16,this.$VideoWatchAndScrollController44.length>this.$VideoWatchAndScrollController46,function(){return this.$VideoWatchAndScrollController81();}.bind(this),v?'small':'medium');this.$VideoWatchAndScrollController82(v);this.$VideoWatchAndScrollController83();}.bind(this)),u.addListener('VideoChannelController/enterChannel',function(){this.$VideoWatchAndScrollController39.release();}.bind(this)),u.addListener('WatchAndScroll/close',function(){this.$VideoWatchAndScrollController57();}.bind(this)),u.addListener('WatchAndScroll/overlayShown',function(){return this.$VideoWatchAndScrollController58();}.bind(this)),u.addListener('WatchAndScroll/overlayHidden',function(){return this.$VideoWatchAndScrollController59();}.bind(this)));};t.prototype.$VideoWatchAndScrollController81=function(){'use strict';if(this.$VideoWatchAndScrollController17.isState('finished'))this.$VideoWatchAndScrollController45.endCountdown(this.$VideoWatchAndScrollController16);if(this.$VideoWatchAndScrollController44.length>this.$VideoWatchAndScrollController46){this.$VideoWatchAndScrollController46++;this.$VideoWatchAndScrollController84();}};t.prototype.$VideoWatchAndScrollController83=function(){'use strict';var u=this.$VideoWatchAndScrollController45.getContainer(),v=c('DOM').scry(u,"._n2_"),w=v[0];if(!w){w=c('DOM').create('div',{'class':"_n2_ _360f"});c('ReactDOM').render(c('React').createElement(c('Image.react'),{src:'/images/video/player/watch_and_scroll/close-button.png',alt:'close watch and scroll',onClick:function(){return this.$VideoWatchAndScrollController57();}.bind(this)}),w);u.appendChild(w);}};t.prototype.$VideoWatchAndScrollController82=function(u){'use strict';var v=this.$VideoWatchAndScrollController45.getContainer(),w=c('DOM').scry(v,"._-i9"),x=w[0];if(!x){x=c('DOM').create('div',{'class':"_-i9"});v.appendChild(x);}c('DOM').empty(x);if(this.$VideoWatchAndScrollController46>=this.$VideoWatchAndScrollController48.length)return;var y=this.$VideoWatchAndScrollController48[this.$VideoWatchAndScrollController46],z=c('DOM').scry(y,"._38a5"),aa=z[0],ba=c('DOM').scry(y,"._2z1"),ca=ba[0],da=c('DOM').scry(y,"._38a3"),ea=da[0];if(!aa||!ea)return;var fa=this.$VideoWatchAndScrollController15.state.height/2-(u?20:40)-20;if(fa>70)fa=70;var ga=fa*1.7778;c('DOM').setAttributes(y,{style:{width:ga+'px'}});c('DOM').setAttributes(ea,{style:{width:ga+'px',height:fa+'px'}});c('ReactDOM').render(c('React').createElement(c('VideoWatchAndScrollNextPreview.react'),{thumbnail:y,owner:aa.textContent,viewCount:ca&&ca.textContent,onNextPreviewClick:function(){return this.$VideoWatchAndScrollController81();}.bind(this)}),x);};t.prototype.$VideoWatchAndScrollController80=function(){'use strict';if(!this.$VideoWatchAndScrollController41)return;this.$VideoWatchAndScrollController41.fetchStories(true,function(u,v){var w=this.$VideoWatchAndScrollController15.state.channelVideoElements.concat(u);this.$VideoWatchAndScrollController15.setState({channelVideoElements:w});this.$VideoWatchAndScrollController48=this.$VideoWatchAndScrollController48.concat(v);}.bind(this));};t.prototype.$VideoWatchAndScrollController76=function(u){'use strict';var v=this.$VideoWatchAndScrollController15.state.channelVideoElements,w=[this.$VideoWatchAndScrollController18].concat(this.$VideoWatchAndScrollController44),x=null;w.forEach(function(y){if(v[u].contains(y.getRootNode()))x=y;});!x?j(0):void 0;return x;};t.prototype.$VideoWatchAndScrollController84=function(){'use strict';if(this.$VideoWatchAndScrollController16)this.$VideoWatchAndScrollController45.endCountdown(this.$VideoWatchAndScrollController16);if(this.$VideoWatchAndScrollController17.isState('playing'))this.$VideoWatchAndScrollController17.pause(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController17=this.$VideoWatchAndScrollController76(this.$VideoWatchAndScrollController46);this.$VideoWatchAndScrollController16=this.$VideoWatchAndScrollController17.getRootNode();this.$VideoWatchAndScrollController15.setState({videoIndex:this.$VideoWatchAndScrollController46});this.$VideoWatchAndScrollController17.play(c('VideoPlayerReason').AUTOPLAY);if(this.$VideoWatchAndScrollController44.length<=this.$VideoWatchAndScrollController46)this.$VideoWatchAndScrollController80();};t.prototype.$VideoWatchAndScrollController49=function(){'use strict';var u=c('getViewportDimensions').withoutScrollbars();this.$VideoWatchAndScrollController8={height:0+this.$VideoWatchAndScrollController6,left:m,top:u.height-this.$VideoWatchAndScrollController6-m,width:0+this.$VideoWatchAndScrollController7};};t.prototype.$VideoWatchAndScrollController79=function(u){'use strict';if(u)return u.addListener('stateChange',function(){if(!c('VideoPlayerExperiments').autoplayWhenWNS&&(u.isState('playing')||this.$VideoWatchAndScrollController22)){c('VideoAutoplayControllerX').setShouldAutoplay(false);}else c('VideoAutoplayControllerX').setShouldAutoplay(true);}.bind(this));};t.prototype.$VideoWatchAndScrollController77=function(u,v){'use strict';var w=c('DOM').create('canvas',{className:"_308d"});w.height=u.height;w.width=u.width;if(w.getContext&&w.getContext('2d'))if(v instanceof window.HTMLVideoElement){var x=new (c('VideoFrameBuffer'))(w,v);x.updateFrameBuffer();}return w;};t.prototype.$VideoWatchAndScrollController57=function(){'use strict';if(this.$VideoWatchAndScrollController26)this.$VideoWatchAndScrollController50();this.$VideoWatchAndScrollController51();};t.prototype.$VideoWatchAndScrollController56=function(u){'use strict';!this.$VideoWatchAndScrollController5?j(0):void 0;if(this.$VideoWatchAndScrollController44.length<=this.$VideoWatchAndScrollController46)!(u===this.$VideoWatchAndScrollController17)?j(0):void 0;this.$VideoWatchAndScrollController46=0;this.$VideoWatchAndScrollController1=false;var v=this.$VideoWatchAndScrollController17.getVideoInfo();this.$VideoWatchAndScrollController12=true;this.$VideoWatchAndScrollController17.pause(c('VideoPlayerReason').USER);if(this.$VideoWatchAndScrollController17.isPlayerVersion('silvercity'))this.$VideoWatchAndScrollController17.detachRootNode();c('ReactDOM').unmountComponentAtNode(this.$VideoWatchAndScrollController69());c('DOM').remove(this.$VideoWatchAndScrollController20);delete this.$VideoWatchAndScrollController20;this.$VideoWatchAndScrollController14.remove();this.$VideoWatchAndScrollController19.remove();this.$VideoWatchAndScrollController39.release();this.$VideoWatchAndScrollController39=new (c('SubscriptionsHandler'))();if(this.$VideoWatchAndScrollController16)this.$VideoWatchAndScrollController45.endCountdown(this.$VideoWatchAndScrollController16);this.$VideoWatchAndScrollController17=this.$VideoWatchAndScrollController18;this.$VideoWatchAndScrollController17.setDimensions(this.$VideoWatchAndScrollController9.dimensions.width,this.$VideoWatchAndScrollController9.dimensions.height);this.$VideoWatchAndScrollController16=this.$VideoWatchAndScrollController18.getRootNode();c('DOM').prependContent(this.$VideoWatchAndScrollController9.videoRootNode,this.$VideoWatchAndScrollController16);this.$VideoWatchAndScrollController17.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED,{player_format:'inline'});if(v&&v.isLiveStream){this.$VideoWatchAndScrollController13=true;this.$VideoWatchAndScrollController17.play(c('VideoPlayerReason').USER);}var w=this.$VideoWatchAndScrollController41;w&&w.reset(this.$VideoWatchAndScrollController17.getVideoID(),this.$VideoWatchAndScrollController17.getVideoChannelID());this.$VideoWatchAndScrollController9={};this.$VideoWatchAndScrollController17=null;this.$VideoWatchAndScrollController18=null;this.$VideoWatchAndScrollController5=false;this.$VideoWatchAndScrollController44=[];this.$VideoWatchAndScrollController48=[];c('VideoAutoplayControllerX').setShouldAutoplay(true);this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController3=null;if(this.$VideoWatchAndScrollController30){this.$VideoWatchAndScrollController54(this.$VideoWatchAndScrollController30,c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController30=null;}w&&w.abandonRequest();this.$VideoWatchAndScrollController37=false;};t.prototype.$VideoWatchAndScrollController78=function(){'use strict';return c('ReactDOM').render(c('React').createElement(c('VideoWatchAndScrollContainer.react'),{onChannelNavigation:this.$VideoWatchAndScrollController85.bind(this),onDrop:this.$VideoWatchAndScrollController86.bind(this),onGrab:this.$VideoWatchAndScrollController87.bind(this),onInitialPositionUpdate:this.$VideoWatchAndScrollController88.bind(this),initialPosition:this.$VideoWatchAndScrollController8,initialVideoElement:this.$VideoWatchAndScrollController16}),this.$VideoWatchAndScrollController69());};t.prototype.$VideoWatchAndScrollController58=function(){'use strict';if(!this.$VideoWatchAndScrollController17||!this.$VideoWatchAndScrollController15||this.$VideoWatchAndScrollController47)return;this.$VideoWatchAndScrollController15.setState({overlayShown:true});};t.prototype.$VideoWatchAndScrollController59=function(){'use strict';if(!this.$VideoWatchAndScrollController17||!this.$VideoWatchAndScrollController15||this.$VideoWatchAndScrollController47)return;this.$VideoWatchAndScrollController15.setState({overlayShown:false});};t.prototype.$VideoWatchAndScrollController51=function(){'use strict';if(this.$VideoWatchAndScrollController18){if(this.$VideoWatchAndScrollController18===this.$VideoWatchAndScrollController17){this.$VideoWatchAndScrollController18.emit('exitWatchAndScroll');return;}this.$VideoWatchAndScrollController15.setState({channelVideoElements:[]},function(){this.$VideoWatchAndScrollController17=this.$VideoWatchAndScrollController18;this.$VideoWatchAndScrollController16=this.$VideoWatchAndScrollController17.getRootNode();this.$VideoWatchAndScrollController18.emit('exitWatchAndScroll');}.bind(this));}};t.prototype.$VideoWatchAndScrollController85=function(u){'use strict';this.$VideoWatchAndScrollController46+=u;this.$VideoWatchAndScrollController84();};t.prototype.$VideoWatchAndScrollController87=function(){'use strict';if(this.$VideoWatchAndScrollController26)this.$VideoWatchAndScrollController50();this.$VideoWatchAndScrollController31=this.$VideoWatchAndScrollController17.isState('playing');this.$VideoWatchAndScrollController17.pause(c('VideoPlayerReason').USER);};t.prototype.$VideoWatchAndScrollController86=function(){'use strict';if(this.$VideoWatchAndScrollController31)this.$VideoWatchAndScrollController17.play(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController31=null;};t.prototype.$VideoWatchAndScrollController88=function(u){'use strict';this.$VideoWatchAndScrollController8=u;this.$VideoWatchAndScrollController17.setDimensions(u.width,u.height);};t.prototype.$VideoWatchAndScrollController89=function(){'use strict';var u=c('DOM').create('div');c('DOM').appendContent(document.body,u);return u;};t.prototype.$VideoWatchAndScrollController69=function(){'use strict';if(!this.$VideoWatchAndScrollController2)this.$VideoWatchAndScrollController2=this.$VideoWatchAndScrollController89();return this.$VideoWatchAndScrollController2;};f.exports=t;},null);