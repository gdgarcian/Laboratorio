/*!CK:3542107100!*//*1450071095,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["U+keT"]); }

__d('BaseUnitCarousel',['DOM','tidyEvent','Animation','Ease','Locale','csx','Event'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=39,p=3;function q(r){'use strict';this.config=r;this.positionProperty=l.isRTL()?'margin-right':'margin-left';var s=r.elements;this.loggedItems={};this.itemWidth=r.item_width;this.visibleCount=r.visible_count;this.visibleIndex=0;this.slideCount=r.slide_count?r.slide_count:p;this.slideAdjust=r.slide_adjust?r.slide_adjust:o;this.carousel=s.node;this.circularCarousel=r.circular_carousel;this.startOffset=r.start_offset;this.position=this.startOffset;this.grid=s.grid;if(this.grid.childElementCount<=2*this.slideCount)this.circularCarousel=false;if(this.circularCarousel){for(var t=0;t<this.slideCount;t++)this.grid.insertBefore(this.grid.lastChild,this.grid.firstChild);this.$BaseUnitCarousel1(this.slideCount);}this.grid.style[this.positionProperty]=this.position+'px';this.grid.style.width=this.itemWidth*this.visibleCount+'px';this.serviceID=s.service_id;this.location=s.location;this.pager=s.pager;this.enableAutoScrolling=r.enable_auto_scrolling;this.enableLargePager=r.enable_large_pager;this.prevPager=s.prev_pager;this.nextPager=s.next_pager;if(this.enableLargePager){i([n.listen(this.nextPager,'click',this.slideLeft.bind(this)),n.listen(this.prevPager,'click',this.slideRight.bind(this))]);}else i([this.pager.subscribe('next',this.slideLeft.bind(this)),this.pager.subscribe('prev',this.slideRight.bind(this))]);this.logImpressions();this.tryLoadMore();this.$BaseUnitCarousel2();}q.prototype.$BaseUnitCarousel1=function(r){'use strict';this.position-=r*this.itemWidth;this.grid.style[this.positionProperty]=this.position+'px';this.visibleIndex+=r;};q.prototype.canSlideLeft=function(){'use strict';return this.visibleIndex+this.visibleCount<this.grid.childElementCount;};q.prototype.canSlideRight=function(){'use strict';return this.visibleIndex>=1;};q.prototype.onXout=function(r,s){'use strict';if(!s)return;if(this.grid.childElementCount===0){h.remove(this.carousel);return;}if(this.grid.childElementCount<=2*this.slideCount&&this.circularCarousel){this.circularCarousel=false;this.position+=this.startOffset;this.grid.style[this.positionProperty]=this.position+'px';}if(this.grid.childElementCount>=this.visibleCount){var t=this.visibleIndex+this.visibleCount,u=this.grid.childElementCount-t;if(u<0)this.slide(-u);}this.$BaseUnitCarousel2();this.logImpressions();this.tryLoadMore();};q.prototype.slide=function(r){'use strict';this.toggleXouts(this.visibleIndex,this.visibleIndex+this.visibleCount,true);var s=this.visibleIndex+r,t=0;if(!this.circularCarousel){if((this.enableAutoScrolling||this.enableLargePager)&&this.visibleIndex===0&&r>0)t=-this.slideAdjust;if(s<=0){s=0;if(this.enableAutoScrolling||this.enableLargePager)t=this.slideAdjust;}}if(s+this.visibleCount>=this.grid.childElementCount)s=this.grid.childElementCount-this.visibleCount;r=s-this.visibleIndex;if(s===this.visibleIndex)return;this.position-=r*this.itemWidth+t;this.visibleIndex=s;var u=Math.abs(r*this.itemWidth);if(this.enableLargePager)this.hidePagerButton();var v=false;if(r>0)v=true;new j(this.grid).to(this.positionProperty,this.position).duration(u).ease(k.sineOut).ondone(this.onSlideDone.bind(this,v)).go();};q.prototype.onSlideDone=function(r){'use strict';if(r||this.circularCarousel)this.logImpressions();if(!this.circularCarousel&&r)this.tryLoadMore();this.$BaseUnitCarousel2();};q.prototype.slideRight=function(){'use strict';if(this.circularCarousel){for(var r=0;r<this.slideCount;r++)this.grid.insertBefore(this.grid.lastChild,this.grid.firstChild);this.$BaseUnitCarousel1(this.slideCount);}this.slide(-this.slideCount);};q.prototype.slideLeft=function(){'use strict';if(this.circularCarousel){for(var r=0;r<this.slideCount;r++)this.grid.appendChild(this.grid.firstChild);this.$BaseUnitCarousel1(-this.slideCount);}this.slide(this.slideCount);};q.prototype.onDone=function(r){'use strict';this.hasReq=false;if(r&&r.payload&&r.payload.items){var s=r.payload.items;if(s){var t=h.find(this.grid,"._34bp");h.insertBefore(t,s);this.$BaseUnitCarousel2();this.logImpressions();this.tryLoadMore();}}};q.prototype.onError=function(){'use strict';this.hasReq=false;};q.prototype.toggleXouts=function(r,s,t){'use strict';};q.prototype.logImpressions=function(){'use strict';};q.prototype.tryLoadMore=function(){'use strict';};q.prototype.hidePagerButton=function(){'use strict';};q.prototype.$BaseUnitCarousel2=function(){'use strict';this.toggleXouts(this.visibleIndex,this.visibleIndex+this.visibleCount-1,false);if(this.enableAutoScrolling)this.updateAutoSlideListener();if(this.enableLargePager){this.updateLargePager();return;}if(this.grid.childElementCount<this.visibleCount){this.pager.setNextEnabled(false);this.pager.setPrevEnabled(false);return;}this.pager.setNextEnabled(this.canSlideLeft());this.pager.setPrevEnabled(this.canSlideRight());};f.exports=q;},null);
__d("XFeedEgoImpressionLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ego\/feed\/logging\/impression\/",{ego_id:{type:"Int",required:true},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true}});},null);
__d("XFeedEgoLoadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ego\/feed\/load\/",{loading_id:{type:"String",required:true},ids:{type:"IntVector",required:true},service_id:{type:"String",required:true},replace_data:{type:"String",defaultValue:""},location:{type:"String",defaultValue:""},group_size:{type:"Int",defaultValue:1},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true}});},null);
__d('EgoUnitCarousel',['DOM','XFeedEgoImpressionLoggingController','AsyncRequest','Arbiter','XFeedEgoLoadController','csx','BaseUnitCarousel'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,n);p=o&&o.prototype;function q(r){'use strict';p.constructor.call(this,r);k.subscribe('x-out-ego-suggestions',this.onXout.bind(this));}q.prototype.tryLoadMore=function(){'use strict';if(this.hasReq)return;var r=this.grid.childElementCount-this.visibleIndex-this.visibleCount-1;if(r>7)return;var s=h.scry(this.grid,"._34bp")[0];if(!s)return;var t=s.id,u=[],v=this.grid.childNodes,w=v.length-1,x,y;for(var z=0;z<w;++z){var aa=JSON.parse(v[z].getAttribute('data-ft'));if(aa.ego_id)u.push(aa.ego_id);if(aa.qid&&!x)x=aa.qid;if(aa.mf_story_key&&!y)y=aa.mf_story_key;}var ba=l.getURIBuilder().setString('service_id',this.serviceID).setString('location',this.location).setString('loading_id',t).setIntVector('ids',u).setInt('qid',x).setInt('mf_story_key',y).getURI();new j().setURI(ba).setHandler(this.onDone.bind(this)).setErrorHandler(this.onError.bind(this)).send();this.hasReq=true;};q.prototype.logImpressions=function(){'use strict';var r=this.grid.children,s=r.length,t=this.visibleIndex+Math.min(this.visibleCount,s)-1;if(t===s-1)--t;for(var u=this.visibleIndex;u<=t;++u)this.$EgoUnitCarousel1(r[u]);};q.prototype.$EgoUnitCarousel1=function(r){'use strict';var s=JSON.parse(r.getAttribute('data-ft'));if(!s)return;var t=s.ego_id;if(!t)return;if(this.loggedItems[t])return;var u=i.getURIBuilder().setInt('ego_id',t).setInt('qid',s.qid).setInt('mf_story_key',s.mf_story_key).getURI();new j().setURI(u).send();this.loggedItems[t]=true;};f.exports=q;},null);
__d("XEgoHideLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ego\/feed\/logging\/xout\/",{ego_id:{type:"Int",required:true},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true},service_id:{type:"String",required:true}});},null);
__d('PymkXout',['Event','DOM','CSS','Arbiter','XEgoHideLoggingController','AsyncSignal'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={init:function(o,p,q){h.listen(p,'click',(function(event){this._logForItem(o);if(q==='pymk_jewel'||q==='pymk_jewel_first_page'){j.hide(o);}else i.remove(o);k.inform('pymk-x-out');var r=event.getTarget().getAttribute('data-pymk-id');if(r)k.inform('x-out-ego-suggestions',{id:r});}).bind(this));},_logForItem:function(o){var p=JSON.parse(o.getAttribute('data-ft'));if(!p)return;if(!p.ego_id)return;var q=l.getURIBuilder().setInt('ego_id',p.ego_id).setInt('qid',p.qid).setInt('mf_story_key',p.mf_story_key).setString('service_id','PYMK').getURI();new m(q,{}).send();}};f.exports=n;},null);
__d('FbFeedAttachmentEgoHScroll',['CSS','DOM','Event','csx','debounce','cx','EgoUnitCarousel'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,n);p=o&&o.prototype;q.prototype.updateAutoSlideListener=function(){'use strict';this.$FbFeedAttachmentEgoHScroll1();if(this.canSlideLeft())this.$FbFeedAttachmentEgoHScroll2('left',this.visibleIndex+this.visibleCount);if(this.canSlideRight())this.$FbFeedAttachmentEgoHScroll2('right',this.visibleIndex-1);};q.prototype.updateLargePager=function(){'use strict';h.removeClass(this.carousel,"_vxr");this.$FbFeedAttachmentEgoHScroll3(true);this.$FbFeedAttachmentEgoHScroll3(false);h.conditionClass(this.carousel,"_vxs",this.canSlideLeft()&&this.canSlideRight());};q.prototype.hidePagerButton=function(){'use strict';h.addClass(this.carousel,"_vxr");};q.prototype.$FbFeedAttachmentEgoHScroll3=function(r){'use strict';var s=r?"_vxt":"_vxu",t=r?"_vxv":"_vxw";if(r?this.canSlideRight():this.canSlideLeft()){h.removeClass(this.carousel,t);h.removeClass(this.carousel,s);}else{h.addClass(this.carousel,t);setTimeout((function(){h.addClass(this.carousel,s);}).bind(this),500);}};q.prototype.$FbFeedAttachmentEgoHScroll1=function(){'use strict';if(this.$FbFeedAttachmentEgoHScroll4)this.$FbFeedAttachmentEgoHScroll4.remove();this.$FbFeedAttachmentEgoHScroll4=null;if(this.$FbFeedAttachmentEgoHScroll5)this.$FbFeedAttachmentEgoHScroll5.remove();this.$FbFeedAttachmentEgoHScroll5=null;if(this.$FbFeedAttachmentEgoHScroll6)this.$FbFeedAttachmentEgoHScroll6.remove();this.$FbFeedAttachmentEgoHScroll6=null;if(this.$FbFeedAttachmentEgoHScroll7)this.$FbFeedAttachmentEgoHScroll7.remove();this.$FbFeedAttachmentEgoHScroll7=null;};q.prototype.$FbFeedAttachmentEgoHScroll2=function(r,s){'use strict';if(isNaN(s)||r!=='left'&&r!=='right')return;if(r==='left'){var t=l(this.slideLeft.bind(this),1000,this);this.$FbFeedAttachmentEgoHScroll4=j.listen(this.grid.children[s],'mouseover',t);this.$FbFeedAttachmentEgoHScroll6=j.listen(this.grid.children[s],'mouseout',function(){t.reset();});}else{var u=l(this.slideRight.bind(this),1000,this);this.$FbFeedAttachmentEgoHScroll5=j.listen(this.grid.children[s],'mouseover',u);this.$FbFeedAttachmentEgoHScroll7=j.listen(this.grid.children[s],'mouseout',function(){u.reset();});}};q.prototype.toggleXouts=function(r,s,t){'use strict';var u=Math.min(r,s),v=Math.max(r,s),w=this.grid.children;u=Math.max(u,0);v=Math.min(v,w.length-1);var x;for(var y=u;y<=v;++y){x=w[y];var z=i.scry(x,"._397t")[0];if(z)if(t){h.hide(z);}else h.show(z);}};function q(){'use strict';o.apply(this,arguments);}f.exports=q;},null);