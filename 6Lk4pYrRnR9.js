/*!CK:3312080649!*//*1453756546,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["NOjfy"]); }

__d('VideoUploadLeaveConfirmationDialog.react',['React','ReactLayeredComponentMixin','XUIDialog.react','XUIDialogTitle.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogButton.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=h.PropTypes,q=h.createClass({displayName:'VideoUploadLeaveConfirmationDialog',mixins:[i],propTypes:{onContinue:p.func,onCancel:p.func},renderLayers:function(){return {dialog:h.createElement(j,{shown:true,layerHideOnBlur:false,width:700},h.createElement(k,null,o._("\u00bfDescartar publicaci\u00f3n?")),h.createElement(l,null,o._("Si sales ahora, la publicaci\u00f3n se descartar\u00e1. Para guardar la publicaci\u00f3n, elige una de las opciones del bot\u00f3n \"Publicar\".")),h.createElement(m,null,h.createElement(n,{label:o._("Volver a la publicaci\u00f3n"),onClick:this.props.onContinue}),h.createElement(n,{use:'confirm',action:'cancel',label:o._("Descartar"),onClick:this.props.onCancel})))};},render:function(){return h.createElement('div',null);}});f.exports=q;},null);
__d('VideoPermalinkText.react',['React','URI','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,h.Component);l=k&&k.prototype;m.prototype.$VideoPermalinkText1=function(){'use strict';return new i('/video.php').addQueryData('v',this.props.videoID).getQualifiedURI().toString();};m.prototype.render=function(){'use strict';return (h.createElement('div',{className:"_9_1"},this.$VideoPermalinkText1()));};function m(){'use strict';k.apply(this,arguments);}f.exports=m;},null);
__d('VideoUploadProcessingDialog.react',['ActorURI','React','ReactLayeredComponentMixin','VideoEditSource','VideoLibraryButton.react','VideoPermalinkText.react','XUIDialog.react','XUIDialogTitle.react','XUIDialogBody.react','XUIDialogFooter.react','XUIDialogCloseButton.react','XUIDialogButton.react','XVideoEditController','XVideoEditDialogController','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=i.PropTypes,x=i.createClass({displayName:'VideoUploadProcessingDialog',mixins:[j],propTypes:{onClose:w.func,shouldShowNewEditDialog:w.bool,isReferenceVideo:w.bool,shouldShowVideoLibrary:w.bool},getInitialState:function(){return {dialogShown:true};},_onToggle:function(y){this.setState({dialogShown:y});if(!y&&this.props.onClose)this.props.onClose();},_onEditVideoButtonClick:function(){this.setState({dialogShown:false});},componentWillReceiveProps:function(y){if(y.show)this.setState({dialogShown:true});},_getProcessingText:function(){if(this.props.isReferenceVideo){return v._("Your reference video is now processing. We will send you a notification when it's ready and monitored.");}else if(this.props.isSecretVideo){return (i.createElement('div',null,v._("Your secret video is now processing. We will notify you when it is it ready to view at the following location:"),i.createElement(m,{videoID:this.props.videoID})));}else return v._("Tu video se est\u00e1 procesando. Te enviaremos una notificaci\u00f3n cuando est\u00e9 listo para verse.");},_getTitle:function(){return this.props.isSecretVideo?v._("Processing Secret Video"):v._("Procesando video");},renderLayers:function(){var y,z=v._("Editar video"),aa;if(this.props.isReferenceVideo){aa=null;}else if(this.props.shouldShowNewEditDialog&&this.props.pageID){y=u.getURIBuilder().setInt('video_id',this.props.videoID).setEnum('source',k.PROCESSING_DIALOG).getURI();y=h.create(y,this.props.pageID);aa=i.createElement(s,{action:'confirm',label:z,href:y,onClick:this._onEditVideoButtonClick,rel:'dialog'});}else{y=t.getURIBuilder().setInt('v',this.props.videoID).setEnum('source',k.PROCESSING_DIALOG).getURI();aa=i.createElement(s,{action:'confirm',label:z,href:y,onClick:this._onEditVideoButtonClick,target:'_blank'});}var ba=null;if(this.props.shouldShowVideoLibrary)ba=i.createElement(l,{pageID:this.props.pageID,size:'medium'});return {dialog:i.createElement(n,{shown:this.state.dialogShown,width:400,onToggle:this._onToggle},i.createElement(o,null,this._getTitle()),i.createElement(p,null,this._getProcessingText()),i.createElement(q,{leftContent:ba},i.createElement(r,null),aa))};},render:function(){return i.createElement('span',null);}});f.exports=x;},null);
__d('ComposerXVideoUploadDialog.react',['Arbiter','DOMContainer.react','Image.react','React','ReactLayeredComponentMixin','SubscriptionsHandler','VideoUploadProcessingDialog.react','XUICloseButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogTitle.react','VideoUploadLeaveConfirmationDialog.react','OptimisticVideoPostUtils','cx','ix','fbt','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();var y=k.PropTypes,z=770,aa=489,ba=k.createClass({displayName:'ComposerXVideoUploadDialog',mixins:[l],_subscriptionsHandler:null,propTypes:{composer:y.object.isRequired,composerID:y.string.isRequired,canShowOptimisticPost:y.bool,showProcessingDialog:y.bool,onCancel:y.func,onComplete:y.func,onDone:y.func,compactMode:y.bool,isReferenceVideo:y.bool},getDefaultProps:function(){return {canShowOptimisticPost:false,showProcessingDialog:true,compactMode:false,isReferenceVideo:false};},getInitialState:function(){return {stage:'editing',videoID:null,showLeaveConfirmationDialog:false,showThrobber:false,shouldShowNewEditDialog:false,pageID:null,isSecretVideo:false,shouldShowVideoLibrary:false};},componentDidMount:function(){var ca=new m();this._subscriptionsHandler=ca;ca.addSubscriptions(h.subscribe('videoUpload/started',(function(da){this.setState({stage:'editing',videoID:null});}).bind(this)),h.subscribe('videoUpload/complete',(function(da,ea){if(this.props.onComplete)this.props.onComplete(ea.videoID);var fa=this.props.showProcessingDialog&&(!this.props.canShowOptimisticPost||!t.shouldShowOptimisticPost(ea));this.setState({stage:'finished',videoID:ea.videoID,shouldShowVideoUploadProcessingDialog:fa,shouldShowNewEditDialog:!!ea.shouldShowNewEditDialog,pageID:ea.pageID,isSecretVideo:ea.isSecret,shouldShowVideoLibrary:!!ea.shouldShowVideoLibrary});}).bind(this)),h.subscribe('videoUpload/showThrobber',(function(da,ea){if(this.props.composerID===ea.composerID)this.setState({showThrobber:true});}).bind(this)),h.subscribe('videoUpload/hideThrobber',(function(da,ea){if(this.props.composerID===ea.composerID)this.setState({showThrobber:false});}).bind(this)));},componentWillUnmount:function(){if(this._subscriptionsHandler)this._subscriptionsHandler.release();},onCancelPostingClick:function(){this.setState({showLeaveConfirmationDialog:false});if(this.props&&this.props.onCancel)this.props.onCancel();},onContinuePostingClick:function(){this.setState({showLeaveConfirmationDialog:false});},onComposerDialogClose:function(){this.setState({showLeaveConfirmationDialog:true});},onDone:function(){if(this.props&&this.props.onDone){var ca=this.props.onDone;x((function(){return ca({videoID:this.state.videoID});}).bind(this));}},renderLayers:function(){if(this.state.stage=='finished'){if(!this.state.shouldShowVideoUploadProcessingDialog){this.onDone();return {};}return {dialog:k.createElement(n,{videoID:this.state.videoID,onClose:this.onDone,show:true,shouldShowNewEditDialog:this.state.shouldShowNewEditDialog,pageID:this.state.pageID,isReferenceVideo:this.props.isReferenceVideo,isSecretVideo:this.state.isSecretVideo,shouldShowVideoLibrary:this.state.shouldShowVideoLibrary})};}else{var ca;if(this.props.isReferenceVideo){ca=w._("Agregar video de referencia");}else ca=w._("Subir video");return {dialog:k.createElement(p,{shown:true,layerHideOnBlur:false,width:this.props.compactMode?aa:z,fixedTopPosition:100},k.createElement(r,{showCloseButton:false},ca,k.createElement('div',{className:"_51-u"},this.renderThrobber(),k.createElement(o,{onClick:this.onComposerDialogClose,className:"_51-t"}))),k.createElement(q,{useCustomPadding:true},k.createElement(i,null,this.props.composer)))};}},renderThrobber:function(){return (k.createElement(j,{className:"_2z4p"+(this.state.showThrobber?' '+"_2z4q":''),src:v('/images/loaders/indicator_blue_small.gif')}));},render:function(){var ca;if(this.state.showLeaveConfirmationDialog)ca=k.createElement(s,{onContinue:this.onContinuePostingClick,onCancel:this.onCancelPostingClick});return (k.createElement('div',null,ca));}});f.exports=ba;},null);
__d("XComposerXVideoUploadDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composerx\/video\/dialog\/",{target_id:{type:"Int",required:true},source_id:{type:"String",required:true},entry_point:{type:"Enum",required:true,enumType:1},is_reference_video:{type:"Bool",defaultValue:false}});},null);
__d('ComposerXVideoUploadDialogController',['ActorURI','Arbiter','AsyncDialog','AsyncRequest','ComposerEntryPointRef','ComposerXVideoUploadDialog.react','DOM','React','ReactDOM','URI','XComposerXVideoUploadDialogController','goURI','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u={};function v(aa){return u[aa];}function w(aa){u[aa.getID()]=aa;}function x(aa){return aa in u;}var y=l.TIMELINE;function z(aa,ba,ca,da,ea,fa,ga){'use strict';this.$ComposerXVideoUploadDialogController1=aa;this.$ComposerXVideoUploadDialogController2=ba;this.$ComposerXVideoUploadDialogController3=ca;this.$ComposerXVideoUploadDialogController4=da;this.$ComposerXVideoUploadDialogController5=ea;this.$ComposerXVideoUploadDialogController6=fa;this.$ComposerXVideoUploadDialogController7=ga;this.$ComposerXVideoUploadDialogController8=z.$ComposerXVideoUploadDialogController9(this.$ComposerXVideoUploadDialogController1,this.$ComposerXVideoUploadDialogController3,this.$ComposerXVideoUploadDialogController6);this.$ComposerXVideoUploadDialogController10=false;this.$ComposerXVideoUploadDialogController11=n.create('span');n.appendContent(document.body,this.$ComposerXVideoUploadDialogController11);this.$ComposerXVideoUploadDialogController12();}z.prototype.getID=function(){'use strict';return this.$ComposerXVideoUploadDialogController8;};z.prototype.setFileInput=function(aa){'use strict';this.$ComposerXVideoUploadDialogController2=aa;};z.prototype.$ComposerXVideoUploadDialogController13=function(aa){'use strict';this.$ComposerXVideoUploadDialogController14=aa;if(this.$ComposerXVideoUploadDialogController15)this.show();};z.prototype.$ComposerXVideoUploadDialogController12=function(){'use strict';var aa=r.getURIBuilder().setInt('target_id',this.$ComposerXVideoUploadDialogController1).setString('source_id',this.$ComposerXVideoUploadDialogController8).setEnum('entry_point',this.$ComposerXVideoUploadDialogController3).setBool('is_reference_video',this.$ComposerXVideoUploadDialogController7).getURI();aa=h.create(aa,this.$ComposerXVideoUploadDialogController1);j.send(new k(aa));};z.prototype.$ComposerXVideoUploadDialogController16=function(){'use strict';p.render(o.createElement(m,{canShowOptimisticPost:this.$ComposerXVideoUploadDialogController5,composer:this.$ComposerXVideoUploadDialogController14,composerID:this.$ComposerXVideoUploadDialogController8,isReferenceVideo:this.$ComposerXVideoUploadDialogController7,showProcessingDialog:!this.$ComposerXVideoUploadDialogController4,onCancel:this.$ComposerXVideoUploadDialogController17.bind(this),onDone:this.$ComposerXVideoUploadDialogController18.bind(this)}),this.$ComposerXVideoUploadDialogController11);this.$ComposerXVideoUploadDialogController10=true;};z.prototype.show=function(){'use strict';if(this.$ComposerXVideoUploadDialogController14){this.$ComposerXVideoUploadDialogController15=false;i.inform('ComposerXFilesStore/filesAdded/'+this.$ComposerXVideoUploadDialogController8+'/videoupload',{fileInput:this.$ComposerXVideoUploadDialogController2},i.BEHAVIOR_PERSISTENT);this.$ComposerXVideoUploadDialogController16();}else this.$ComposerXVideoUploadDialogController15=true;};z.prototype.$ComposerXVideoUploadDialogController17=function(){'use strict';i.inform('videoUpload/cancel',{composerID:this.$ComposerXVideoUploadDialogController8});this.hide();};z.prototype.$ComposerXVideoUploadDialogController18=function(aa){'use strict';this.hide();if(this.$ComposerXVideoUploadDialogController4)s(new q('/'+aa.videoID),true);};z.prototype.hide=function(){'use strict';p.unmountComponentAtNode(this.$ComposerXVideoUploadDialogController11);this.$ComposerXVideoUploadDialogController10=false;};z.$ComposerXVideoUploadDialogController9=function(aa,ba,ca){'use strict';if(ca){return ca;}else return ba+'_'+aa;};z.showDialog=function(aa){'use strict';aa.composerEntryPointRef=aa.composerEntryPointRef||y;var ba=z.$ComposerXVideoUploadDialogController9(aa.targetID,aa.composerEntryPointRef,aa.originalComposerID);if(!x(ba)){w(new z(aa.targetID,aa.fileInput,aa.composerEntryPointRef,aa.redirectToPermalinkOnPost||false,aa.canShowOptimisticPost||false,aa.originalComposerID||'',aa.isReferenceVideoUpload||false));}else v(ba).setFileInput(aa.fileInput);v(ba).show();};z.setVideoComposer=function(aa,ba){'use strict';if(u[aa])u[aa].$ComposerXVideoUploadDialogController13(ba);};f.exports=z;},null);
__d('VideoComposerUploadFileInput',['ComposerXVideoUploadDialogController'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k,l,m){'use strict';j.subscribe('change',function(n,event){var o=false,p=false;if(m){o=m.redirectToPermalinkOnPost;p=m.canShowOptimisticPost;}h.showDialog({targetID:k,fileInput:j,composerEntryPointRef:l,redirectToPermalinkOnPost:o,canShowOptimisticPost:p});});}f.exports=i;},null);