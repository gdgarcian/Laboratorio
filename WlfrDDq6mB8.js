/*!CK:4293742915!*//*1458221673,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["pXgWX"]); }

__d('ReactShareDialog.react',['cx','fbt','ReactComposerContextMixin','ShareDialogAudience.react','ReactShareDialogComposer.react','ShareDialogDataSources','ShareDialogTitle.react','ShareNowCounter','ShareNowCounterEvent','SharerType','AccessibleLayer','CurrentUser','DialogExpansionAtWidth','LayerFadeOnHide','LayerHideOnEscape','React','TooltipLink.react','XUIDialog.react','XUIDialogBody.react','XUIDialogCloseButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUISpinner.react','emptyFunction','getOwnObjectValues'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ReactShareDialog',mixins:[c('ReactComposerContextMixin')],propTypes:{experiments:j.shape({subtleWarning:j.bool}),appId:j.string,attachment:j.object,causalElement:j.instanceOf(HTMLElement),customModules:j.shape({groups:j.arrayOf(j.func)}),dataSources:j.instanceOf(c('ShareDialogDataSources')),loggingConfig:j.shape({targetType:j.string,ref:j.string,composerVersion:j.string.isRequired}).isRequired,messageTags:j.array,messageTargets:j.array,onCancel:j.func.isRequired,onChangeAudienceTargets:j.func.isRequired,onClearAudienceTargets:j.func.isRequired,onPost:j.func.isRequired,postId:j.string.isRequired,privacySelector:j.any.isRequired,publicityWarning:j.object,sharerType:j.oneOf(c('getOwnObjectValues')(c('SharerType'))),shareType:j.string,showDoingNUX:j.bool,status:j.shape({message:j.oneOfType([j.string,j.object]),title:j.oneOfType([j.string,j.object]),type:j.string.isRequired}).isRequired,taggersConfig:j.object.isRequired,useCheckinBranding:j.bool,userId:j.string.isRequired,via:j.object},getDefaultProps:function(){return {onCancel:c('emptyFunction'),onPost:c('emptyFunction'),onChangeAudienceTargets:c('emptyFunction'),onClearAudienceTargets:c('emptyFunction'),sharerType:c('SharerType').ALL_MODES,status:{type:'composing'}};},componentWillMount:function(){if(this.props.sharerType===c('SharerType').MESSAGE_ONLY){c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').OPEN_MESSAGE_DIALOG);}else c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').OPEN_DIALOG);},_getMessage:function(){var l=null;if(this.props.status.type==='error'){l=this.props.status.message||i._("Esta publicaci\u00f3n no se puede compartir en este momento. Vuelve a intentarlo m\u00e1s tarde.");}else if(this.props.status.type==='success')l=this.props.status.message||i._("Se public\u00f3 tu contenido compartido.");if(l){var m=typeof l!=='string'&&l.__html?c('React').createElement('span',{dangerouslySetInnerHTML:l}):l;return c('React').createElement(c('XUIDialogBody.react'),null,m);}return null;},_getOverlay:function(){var l=c('React').createElement('noscript',null);if(this.props.status.type==='posting')l=c('React').createElement('div',{className:"_51jk"},c('React').createElement(c('XUISpinner.react'),{size:'large',className:"_51jl"}));return l;},_getFooter:function(){if(this.props.status.type!=='error'||this.props.renderInline){return c('React').createElement('noscript',null);}else return (c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCloseButton.react'),{use:'confirm'})));},_getTitle:function(){if(!this.props.status.title||this.props.renderInline){return c('React').createElement('noscript',null);}else{var l=this.props.status.title,m=typeof l!=='string'&&l.__html?c('React').createElement('span',{dangerouslySetInnerHTML:l}):l;return (c('React').createElement(c('XUIDialogTitle.react'),null,m));}},render:function(){var l=c('CurrentUser').isEmployee()?c('React').createElement(c('TooltipLink.react'),{className:"_2jxp uiHelpLink",href:'/groups/761337780581506/',tooltip:'Provide feedback on the React Share Composer (fb-only).',target:'_blank'}):null,m=this._getMessage()||[c('React').createElement(c('ShareDialogTitle.react'),{key:'title',activeAudience:this.props.activeAudience,dataSources:this.props.dataSources,onAudienceSelect:this.props.onTargetSelect,onClose:this.props.onCancel,renderInline:this.props.renderInline,sharerType:this.props.sharerType,status:this.props.status},l),c('React').createElement(c('ShareDialogAudience.react'),{activeAudience:this.props.activeAudience,customModules:this.props.customModules,dataSources:this.props.dataSources,defaultPageTargetID:this.props.defaultPageTargetID,key:'audience',messageTargets:this.props.messageTargets,onChange:this.props.onChangeAudienceTargets,onClear:this.props.onClearAudienceTargets,userId:this.props.userId}),c('React').createElement(c('ReactShareDialogComposer.react'),babelHelpers['extends']({key:'composer'},this.props))];return (c('React').createElement(c('XUIDialog.react'),{behaviors:{AccessibleLayer:c('AccessibleLayer'),DialogExpansion:c('DialogExpansionAtWidth'),LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')},causalElementRef:function(){return this.props.causalElement;}.bind(this),className:"_51jd",layerHideOnBlur:false,modal:true,shown:this.props.shown,width:496},this._getTitle(),c('React').createElement('div',{ref:'dialog'},m),this._getOverlay(),this._getFooter()));}});f.exports=k;},null);
__d('ReactShareDialogContainer.react',['ReactComposerContextMixin','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerAudienceStore','ReactComposerShareNowActions','ReactComposerStatusStore','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerTopicFeedsTaggerStore','ComposerXSessionIDs','FBID','MercuryIDs','MercuryThreads','ReactShareDialogComposerActions','ReactShareDialogComposerStore','ShareDialogAudienceTypes','ReactShareDialog.react','ShareNowCounter','ShareNowCounterEvent','SharerType','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('MercuryThreads').get(),i=c('React').createClass({displayName:'ReactShareDialogContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactShareDialogComposerStore'))],statics:{beforeCalculateInitialState:function(j,k){var l=k.defaultAudience?k.defaultAudience:c('ShareDialogAudienceTypes').OWN;if(k.sharerType===c('SharerType').MESSAGE_ONLY){l=c('ShareDialogAudienceTypes').MESSAGE;}else if(k.sharerType===c('SharerType').PAGE_ONLY)l=c('ShareDialogAudienceTypes').PAGE;c('ReactShareDialogComposerActions').setTarget(j,l);c('ReactShareDialogComposerActions').setTargetInfo(j,{userId:k.userId});},calculateState:function(j,k){var l=c('ReactShareDialogComposerStore').getTargetInfo(j),m=l.audienceTargets,n=l.userId;return {activeAudience:c('ReactShareDialogComposerStore').getTarget(j),audienceTargets:m,userId:n};}},getInitialState:function(){return {shown:true};},componentWillReceiveProps:function(j){if(j.status.type==='success'&&this.state.shown)setTimeout(function(){return this.setState({shown:false});}.bind(this),2500);},componentDidMount:function(){c('ComposerXSessionIDs').resetSessionID(this.props.contextConfig.composerID);},render:function(){return (c('React').createElement(c('ReactShareDialog.react'),babelHelpers['extends']({},this.props,this.state,{onCancel:this._onCancel,onChangeAudienceTargets:this._onChangeAudienceTargets,onClearAudienceTargets:this._onClearAudienceTargets,onPost:this._onPost,onTargetSelect:this._onTargetSelect})));},_getStatefulResponse:function(){var j=this.props.contextConfig.composerID,k=c('ReactComposerTaggerStore').getTaggersData(j),l=c('ReactComposerAudienceStore').getAudience(j),m=c('ReactComposerStatusStore').getMessage(j),n=c('ReactShareDialogComposerStore').getTarget(j),o=c('ReactShareDialogComposerStore').getTargetInfo(j),p=c('ReactShareDialogComposerStore').getTargetedPrivacyData(j),q=c('ReactShareDialogComposerStore').getAttribution(j),r=o.audienceTargets?o.audienceTargets:[],s=0;if(r.length===1){var t=c('FBID').isUser(r[0])?c('MercuryIDs').getThreadIDFromUserID(r[0]):c('MercuryIDs').getThreadIDFromThreadFBID(r[0]),u=h.getThreadMetaNow(t);s=u?u.ephemeral_ttl_mode:0;}var v=k[c('ReactComposerTaggerType').PEOPLE],w=k[c('ReactComposerTaggerType').LOCATION],x=k[c('ReactComposerTaggerType').ACTIVITY],y=v.map(function(fa){return fa.getUniqueID();}),z=null,aa=null;if(x.object){var ba=x.object.getUniqueID(),ca=x.object.getTitle();if(!ba||ba===ca){aa=ca;}else z=ba;}var da=c('ReactShareDialogComposerStore').getShareDialogType(j),ea=c('ReactShareDialogComposerStore').getShareToGroupsAsPage(j);return {actorId:o.userId,appId:this.props.appId,attributionId:q?q.id:null,audienceTargets:r,audienceType:n,composerSessionID:c('ComposerXSessionIDs').getSessionID(j),ephemeralTTLMode:s,internalExtra:this.props.internalExtra,internalPreviewImageID:this.props.internalPreviewImageID,isForcedReshareOfPost:da,message:m,messageTags:this.props.messageTags,ownerId:this.props.ownerId,postId:this.props.postId,privacy:l,sharedAdId:this.props.sharedAdId,shareToGroupAsPage:ea,shareType:this.props.shareType,source:'osbach',taggedActionIconId:x.actionIconID,taggedActionId:x.action?x.action.getUniqueID():null,taggedFeedTopics:c('ReactComposerTopicFeedsTaggerStore').getTaggedTopics(j).toArray(),taggedObjectId:z,taggedObjectStr:aa,taggedPeople:y,taggedPlace:w&&w.place?w.place.getUniqueID():null,targetedPrivacyData:p,url:this.props.url};},_onTargetSelect:function(j){c('ReactShareDialogComposerActions').setTarget(this.context.composerID,j);c('ReactShareDialogComposerActions').setTargetInfo(this.context.composerID,{audienceTargets:null,userId:this.props.userId});},_onCancel:function(){c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').SHARE_CANCEL);c('ReactComposerShareNowActions').cancelShare(this.context.composerID);this.setState({shown:false});this.props.onCancel&&this.props.onCancel(this._getStatefulResponse());},_onChangeAudienceTargets:function(j){if(j.length===0)return;var k=j[0],l=this.state.activeAudience===c('ShareDialogAudienceTypes').PAGE?{audienceTargets:[k.pageId],userId:k.actorId}:{audienceTargets:j,userId:this.props.userId};c('ReactShareDialogComposerActions').setTargetInfo(this.context.composerID,l);},_onClearAudienceTargets:function(){c('ReactShareDialogComposerActions').setTargetInfo(this.context.composerID,{audienceTargets:null,userId:this.props.userId});},_onPost:function(){this.props.onPost(this._getStatefulResponse());}});f.exports=i;},null);
__d('ReactShareDialogRoot.react',['ReactComposerContextConfig','ReactComposerContextProviderMixin','ReactShareDialogContainer.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactShareDialogRoot',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextProviderMixin')],propTypes:{contextConfig:c('ReactComposerContextConfig').isRequired},render:function(){return c('React').createElement(c('ReactShareDialogContainer.react'),this.props);}});f.exports=h;},null);
__d('ShareDialogOsbachController',['ActorURI','AsyncRequest','AsyncResponse','ReactComposerActions','ComposerEntryPointRef','DOM','OnlyMeSharerSaveNux.react','React','ReactDOM','ShareDialogAudienceTypes','ShareDialogDataSources','ReactShareDialogRoot.react','ShareNowCounter','ShareNowCounterEvent','XShareDialogSubmitController','destroyOnUnload','getActiveElement','uniqueID'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h,i,j,k,l,m,n;function o(){s({type:'posting'});}function p(u){c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').SHARE_POST_SUCCESS);s({message:u.payload.message,shareType:u.payload.audience,showOnlyMeSharerSaveNux:u.payload.showOnlyMeSharerSaveNux,type:'success'});}function q(u){c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').SHARE_POST_ERROR);c('AsyncResponse').defaultErrorHandler(u);s({type:'composing'});}function r(u){if(u.error)s({type:'composing'});}function s(u){if(u.showOnlyMeSharerSaveNux&&u.shareType&&k&&l&&m){c('ReactDOM').render(c('React').createElement(c('OnlyMeSharerSaveNux.react'),{caretId:k,storyContainerId:l,collectionId:m,objectId:n,shareType:u.shareType}),i);}else c('ReactDOM').render(c('React').createElement(c('ReactShareDialogRoot.react'),babelHelpers['extends']({},h,{contextConfig:{actorID:h.userId,composerID:j,composerType:c('ComposerEntryPointRef').FEED_STORY,gks:h.gks,targetID:h.userId},shown:true,onPost:function(v){t.onPost(v,o,p,q,r);},status:u})),i);}var t={getPropsFromAsyncResponse:function(u){var v=u.sources,w=babelHelpers.objectWithoutProperties(u,['sources']),x=v.person,y=v.personTag,z=v.personWall,aa=v.group,event=v.event,ba=v.page,ca=v.mentions,da=v.place,ea=v.action,fa=v.object,ga=new (c('ShareDialogDataSources'))().addSource(c('ShareDialogDataSources').TYPES.ACTION,ea).addSource(c('ShareDialogDataSources').TYPES.EVENT,event).addSource(c('ShareDialogDataSources').TYPES.GROUP,aa).addSource(c('ShareDialogDataSources').TYPES.MENTIONS,ca).addSource(c('ShareDialogDataSources').TYPES.MESSAGE,x).addSource(c('ShareDialogDataSources').TYPES.OBJECT,fa).addSource(c('ShareDialogDataSources').TYPES.PAGE,ba).addSource(c('ShareDialogDataSources').TYPES.PERSON,y).addSource(c('ShareDialogDataSources').TYPES.PERSON_WALL,z).addSource(c('ShareDialogDataSources').TYPES.PLACE,da);return babelHelpers['extends']({dataSources:ga},w);},onPost:function(u,v,w,x,y){c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').SHARE_POST);if(u.audienceType===c('ShareDialogAudienceTypes').OWN){c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').SHARE_POST_OWN);}else if(u.audienceType===c('ShareDialogAudienceTypes').PERSON){c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').SHARE_POST_PERSON);}else if(u.audienceType===c('ShareDialogAudienceTypes').PAGE){c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').SHARE_POST_PAGE);}else if(u.audienceType===c('ShareDialogAudienceTypes').GROUP){c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').SHARE_POST_GROUP);}else if(u.audienceType===c('ShareDialogAudienceTypes').MESSAGE)c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').SHARE_POST_MESSAGE);v&&v();var z=c('XShareDialogSubmitController').getURIBuilder().setInt('app_id',u.appId).setInt('attribution',u.attributionId).setString('audience_type',u.audienceType).setIntVector('audience_targets',u.audienceTargets).setString('composer_session_id',u.composerSessionID).setInt('ephemeral_ttl_mode',u.ephemeralTTLMode).setStringToStringMap('internalextra',u.internalExtra||h&&h.internalExtra).setInt('internal_preview_image_id',u.internalPreviewImageID).setBool('is_forced_reshare_of_post',u.isForcedReshareOfPost).setString('message',u.message).setStringVector('messaging_tags',u.messageTags).setInt('owner_id',u.ownerId).setInt('post_id',u.postId).setString('privacy',u.privacy).setBool('share_to_group_as_page',!!u.shareToGroupAsPage).setInt('share_type',u.shareType).setInt('shared_ad_id',u.sharedAdId).setString('source',u.source).setInt('tagged_action',u.taggedActionId).setInt('tagged_object',u.taggedObjectId).setString('tagged_object_str',u.taggedObjectStr).setInt('tagged_action_icon',u.taggedActionIconId).setIntVector('tagged_people',u.taggedPeople).setInt('tagged_place',u.taggedPlace).setStringVector('tagged_feed_topics',u.taggedFeedTopics).setHackType('targeted_privacy_data',u.targetedPrivacyData).setString('url',u.url).getURI();z=c('ActorURI').create(z,u.actorId);new (c('AsyncRequest'))().setURI(z).setMethod('POST').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(){c('ReactComposerActions').postSucceeded(j);for(var aa=arguments.length,ba=Array(aa),ca=0;ca<aa;ca++)ba[ca]=arguments[ca];w.apply(null,ba);}).setErrorHandler(x).setFinallyHandler(y).send();},setup:function(u,v,w,x,y,z){u.causalElement=c('getActiveElement')();h=t.getPropsFromAsyncResponse(u);i=v;j=c('uniqueID')();k=w;l=x;m=y;n=z;s({type:'composing'});c('destroyOnUnload')(function(){c('ReactDOM').unmountComponentAtNode(i);c('DOM').remove(i);});}};f.exports=t;},null);