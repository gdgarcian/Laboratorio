/*!CK:1316385822!*//*1458531474,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["B3+zY"]); }

__d('ChatTabComposer.react',['csx','cx','fbt','BootloadedComponent.react','ChatConfig','ChatReactInput','CSS','JSResource','MercuryConfig','P2PSendMoneyContainerBootloader.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('ChatReactInput').module,l=c('React').PropTypes,m=77,n=c('React').createClass({displayName:'ChatTabComposer',_fileUploader:null,_photoUploader:null,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{initializeThingsWithInputFn:l.func,inputKeyDown:l.func,onBlur:l.func,onEmojiSelect:l.func,onEscape:l.func,onFocus:l.func,onTab:l.func,openFlyoutFn:l.func,p2pProps:l.object,participantIDs:l.arrayOf(l.string),photoUploaderProps:l.object,placeHolder:l.string,resizeFn:l.func,uploadPhotoFn:l.func,showP2P:l.bool,stickerButtonProps:l.object},getInitialState:function(){return {inputHeight:0};},render:function(){return (c('React').createElement('div',{className:"_1d4_",onClick:this._handleClick},this._renderInput(),c('React').createElement('div',{className:"_552n"},this._renderIcons())));},resetInput:function(){this.refs.input.resetState();},uploadURL:function(o){if(!this._fileUploader)return;this._fileUploader.uploadURL(o);},isUploading:function(){return !!(this._fileUploader&&this._fileUploader.isUploading()||this._photoUploader&&this._photoUploader.isUploading());},getInput:function(){return this.refs.input;},_renderInput:function(){var o={};if(this.state.inputHeight)o.minHeight=this.state.inputHeight;return (c('React').createElement('div',{className:"_552h",style:o},c('React').createElement(k,{initializeThingsWithInputFn:this.props.initializeThingsWithInputFn,inputKeyDown:this.props.inputKeyDown,onBlur:this.props.onBlur,onEscape:this.props.onEscape,onFocus:this.props.onFocus,onTab:this.props.onTab,openFlyoutFn:this.props.openFlyoutFn,ref:'input',resizeFn:function(p){p=Math.min(p,m);this.setState({inputHeight:p});this.props.resizeFn&&this.props.resizeFn(p);}.bind(this),uploadPhotoFn:function(p){this._photoUploader&&this._photoUploader.uploadFiles([p]);}.bind(this),placeholder:this.props.placeholder})));},_renderIcons:function(){return [this._renderPhotoUploader(),this._renderStickerButton(),this._renderContentSearchButton(),this._renderEmojiButton(),this._renderP2PButton(),this._renderFileUploader(),this._renderLikeButton()];},_renderPhotoUploader:function(){var o=this.props.photoUploaderProps||{};return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('ChatPhotoUploader.react'),bootloadPlaceholder:c('React').createElement('span',{className:o.className},c('React').createElement('a',{className:o.linkClassName})),key:'photos',onMount:function(p){return this._photoUploader=p;}.bind(this)},o)));},_renderFileUploader:function(){var o=this.props.fileUploaderProps||{};return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('ChatPhotoUploader.react'),bootloadPlaceholder:c('React').createElement('span',{className:o.className},c('React').createElement('a',{className:o.linkClassName})),key:'files',onMount:function(p){return this._fileUploader=p;}.bind(this)},o)));},_renderStickerButton:function(){var o=this.props.stickerButtonProps||{};o.onStickerSelect=this.props.onStickerSelect;return (c('React').createElement('div',{className:"_6gd",key:'stickers'},c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('ChatStickerButton.react'),bootloadPlaceholder:c('React').createElement('span',{className:o.className})},o))));},_renderContentSearchButton:function(){if(!c('ChatConfig').get('chat_content_search'))return null;var o={className:"_6gb _6gs",getQuery:function(){return this.refs.input.getValue();}.bind(this),onSelect:function(p,q){if(p.platformFBID.toString()!==c('MercuryConfig').MessengerAppID){this.uploadURL({attribution_app_id:p.platformFBID,errorDialogParams:{body:j._("Hubo un problema al enviar este GIF. Elige otro y vuelve a intentarlo."),title:j._("No se pudo enviar el GIF")},external_image_url:p.source.url,preview_url:p.media.preview?p.media.preview.url:p.media.thumbnail.url,source:p.source});}else this.props.onStickerSelect&&this.props.onStickerSelect(p.resultID.toString);}.bind(this)};return (c('React').createElement('div',{className:"_6gd",key:'contentsearch'},c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('ChatContentSearchButton.react'),bootloadPlaceholder:c('React').createElement('span',{className:o.className})},o))));},_renderEmojiButton:function(){if(!c('ChatConfig').get('www_messenger_emoji_picker'))return null;var o={className:"_6gb _3oxr",onSelect:function(p){this.props.onEmojiSelect&&this.props.onEmojiSelect(p);}.bind(this)};return (c('React').createElement('div',{className:"_6gd",key:'emojipicker'},c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadLoader:c('JSResource')('ChatEmojiButton.react'),bootloadPlaceholder:c('React').createElement('span',{className:o.className})},o))));},_renderLikeButton:function(){if(!c('ChatConfig').get('hotlike'))return null;var o=c('MercuryConfig').CustomColorChatTabGK?this.props.thread&&this.props.thread.custom_color:null,p=(!o?"_6h1":'')+(' '+"_6gb");return (c('React').createElement('div',{className:"_6gd _5ep3",key:'like'},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('a',{className:p}),bootloadLoader:c('JSResource')('MessengerHotLikeButton.react'),className:p,customColor:o,customLike:this.props.thread&&this.props.thread.custom_like_icon,sendSticker:this.props.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID})));},_renderP2PButton:function(){if(!this.props.p2pProps)return null;var o=this.props.p2pProps;o.threadID=this.props.threadID;if(this.props.participantIDs&&this.props.participantIDs.length)o.participantIDs=this.props.participantIDs;return (c('React').createElement('div',{className:"_6gd",key:'p2p'},c('React').createElement(c('P2PSendMoneyContainerBootloader.react'),o)));},_handleClick:function(o){if(c('CSS').matchesSelector(o.target,"._1d4_")||c('CSS').matchesSelector(o.target,"._552h")||c('CSS').matchesSelector(o.target,"._552n"))this.refs.input.focus();}});f.exports=n;},null);