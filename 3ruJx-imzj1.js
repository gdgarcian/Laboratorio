/*!CK:4145556585!*//*1456767147,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["GMQG5"]); }

__d('ShareDialogInput.react',['cx','fbt','DOM','React','ReactDOM','ShareDialogDataSources','ShareDialogAudienceTypes','MentionsInput.react','XUITypeaheadView.react','DraftEntity','EditorState','createEditorStateWithEntities','getMentionsTextForContentState','getMentionsInputDecorator','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ShareDialogInput',propTypes:{activeAudience:function(l){if(!c('ShareDialogAudienceTypes').isValid(l.activeAudience))return new Error('The active audience is invalid.');},dataSources:j.instanceOf(c('ShareDialogDataSources')),legacyInput:j.any,initInputText:j.string,initInputRanges:j.array,placeholderText:j.string},getInitialState:function(){return {editorState:this.createEditorState(),dataSource:this.props.dataSources.getSource(c('ShareDialogDataSources').TYPES.MENTIONS)};},createEditorState:function(){var l=this.props.initInputText,m=this.props.initInputRanges;if(l)return c('createEditorStateWithEntities')({text:l,ranges:m,decorator:c('getMentionsInputDecorator')(),entityCreationFn:function(n){return c('DraftEntity').create('MENTION','IMMUTABLE',{id:n.id,isWeak:n.weakreference});}});return c('EditorState').createEmpty(c('getMentionsInputDecorator')());},componentWillReceiveProps:function(l){if(l.activeAudience===c('ShareDialogAudienceTypes').MESSAGE){this.setState({dataSource:null});}else this.setState({dataSource:this.props.dataSources.getSource(c('ShareDialogDataSources').TYPES.MENTIONS)});},componentDidMount:function(){if(this.props.legacyInput){var l=c('ReactDOM').findDOMNode(this.refs.inputContainer);c('DOM').setContent(l,this.props.legacyInput);}},onChange:function(l){this.setState({editorState:l});},onBlur:function(){var l=this.state.editorState.getCurrentContent(),m=c('getMentionsTextForContentState')(l);if(this.props.onBlur)this.props.onBlur(m);},render:function(){var l=this.props.placeholderText||i._("Haz un comentario...");if(this.props.legacyInput){return c('React').createElement('div',{ref:'inputContainer'});}else return (c('React').createElement(c('MentionsInput.react'),{mentionsSource:this.state.dataSource,className:c('joinClasses')(this.props.className,"_3s-5"),editorState:this.state.editorState,typeaheadView:c('XUITypeaheadView.react'),placeholder:l,selectOnTab:false,spellCheck:true,onBlur:this.onBlur,onChange:this.onChange}));}});f.exports=k;},null);
__d('ShareDialogTaggerTypes',['getObjectValues'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={NONE:'none',PEOPLE:'people',PLACE:'place',DOING:'doing',FEELING:'feeling'},i=c('getObjectValues')(h);f.exports=h;f.exports.ALL=i;f.exports.isValid=function(j){return i.some(function(k){return k===j;});};},null);
__d('DialogExpansionAtWidth',['DialogExpansion'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('DialogExpansion'));i=h&&h.prototype;j.prototype._getWidth=function(){'use strict';return this._dialog.getWidth();};function j(){'use strict';h.apply(this,arguments);}f.exports=j;},null);
__d('ShareDialogTaggerButtons.react',['cx','fbt','React','ShareDialogDataSources','ShareDialogTaggerTypes','TooltipLink.react','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ShareDialogTaggerButtons',propTypes:{activeTagger:function(l){if(!c('ShareDialogTaggerTypes').isValid(l.activeTagger))return new Error('The active tagger is invalid.');},dataSources:j.instanceOf(c('ShareDialogDataSources')),hasPeople:j.bool,hasPlace:j.bool,hasDoing:j.bool,onTaggerClick:j.func},getDefaultProps:function(){return {activeTagger:c('ShareDialogTaggerTypes').NONE,onTaggerClick:c('emptyFunction')};},getInitialState:function(){return {activeTagger:this.props.activeTagger,dataSources:this.props.dataSources};},componentWillReceiveProps:function(l){this.setState({activeTagger:l.activeTagger,dataSources:l.dataSources});},_taggerClick:function(l){var m=l;if(this.state.activeTagger===l)m=c('ShareDialogTaggerTypes').NONE;this.setState({activeTagger:m});this.props.onTaggerClick(m);},_onPeopleTaggerClick:function(){this._taggerClick(c('ShareDialogTaggerTypes').PEOPLE);},_onPlaceTaggerClick:function(){this._taggerClick(c('ShareDialogTaggerTypes').PLACE);},_onOpenGraphTaggerClick:function(){this._taggerClick(c('ShareDialogTaggerTypes').DOING);},render:function(){var l=this.state.dataSources,m=null,n=null,o=null,p=null;if(!l)return null;var q=i._("Agrega lo que est\u00e1s haciendo o c\u00f3mo te sientes");if(l.getSource(c('ShareDialogDataSources').TYPES.PERSON))m=c('React').createElement(c('TooltipLink.react'),{onClick:this._onPeopleTaggerClick,tooltip:i._("Etiqueta personas en tu publicaci\u00f3n"),className:"_2pjs"+(' '+"_jku")+(this.props.hasPeople?' '+"_jkv":'')+(this.state.activeTagger===c('ShareDialogTaggerTypes').PEOPLE?' '+"_jkw":'')},c('React').createElement('span',{className:"_jkx"},i._("Etiquetar personas")));if(l.getSource(c('ShareDialogDataSources').TYPES.PLACE))n=c('React').createElement(c('TooltipLink.react'),{onClick:this._onPlaceTaggerClick,tooltip:i._("Agrega una ubicaci\u00f3n a tu publicaci\u00f3n"),className:"_2pjs"+(' '+"_jky")+(this.props.hasPlace?' '+"_jkv":'')+(this.state.activeTagger===c('ShareDialogTaggerTypes').PLACE?' '+"_jkw":'')},c('React').createElement('span',{className:"_jkx"},i._("Etiqueta una ubicaci\u00f3n")));if(l.getSource(c('ShareDialogDataSources').TYPES.ACTION)&&l.getSource(c('ShareDialogDataSources').TYPES.OBJECT))o=c('React').createElement(c('TooltipLink.react'),{ref:'doingButton',onClick:this._onOpenGraphTaggerClick,tooltip:q,className:"_2pjs"+(' '+"_34fh")+(this.props.hasDoing?' '+"_jkv":'')+(this.state.activeTagger===c('ShareDialogTaggerTypes').DOING?' '+"_jkw":'')},c('React').createElement('span',{className:"_jkx"},q));if(!m&&!n&&!o)return null;return (c('React').createElement('div',{className:"_5fj8"},m,n,o));}});f.exports=k;},null);
__d('ShareDialogFooter.react',['cx','fbt','ix','DOM','LeftRight.react','React','ReactDOM','ShareDialogAudience.react','ShareDialogDataSources','ShareDialogStatusTypes','ShareDialogTaggerButtons.react','ShareDialogTaggerTypes','ShareNowCounter','ShareNowCounterEvent','SharerType','PrivacySelector','XUIDialogFooter.react','XUIDialogCancelButton.react','XUIDialogCloseButton.react','XUIDialogButton.react','XUIButton.react','emptyFunction','Image.react','InlineBlock.react','Tooltip'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('ShareDialogAudience.react').TYPES,l=c('React').PropTypes,m=c('React').createClass({displayName:'ShareDialogFooter',propTypes:{activeAudience:function(n){if(!k.isValid(n.activeAudience))return new Error('The active audience is invalid.');},activeTagger:function(n){if(!c('ShareDialogTaggerTypes').isValid(n.activeTagger))return new Error('The active tagger is invalid.');},status:l.shape({type:l.string.isRequired,title:l.oneOfType([l.string,l.object]),message:l.oneOfType([l.string,l.object])}).isRequired,audienceTargets:l.array,dataSources:l.instanceOf(c('ShareDialogDataSources')),experiments:l.shape({postRetry:l.bool}),hasDoing:l.bool,hasPeople:l.bool,hasPlace:l.bool,onCancel:l.func,onPost:l.func,onRetry:l.func,onPrivacyChange:l.func,onTaggerClick:l.func,privacySelector:l.any,showDoingNUX:l.bool,renderInline:l.bool},getDefaultProps:function(){return {experiments:{postRetry:false},onCancel:c('emptyFunction'),onPost:c('emptyFunction'),onRetry:c('emptyFunction'),onTaggerClick:c('emptyFunction'),status:{type:c('ShareDialogStatusTypes').COMPOSING},renderInline:false};},_layerHack:function(){if(this.refs&&this.refs.privacySelector){c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.privacySelector),this.props.privacySelector);}else setTimeout(this._layerHack,100);},componentDidMount:function(){if(this.props.activeAudience===k.OWN)this._layerHack();},componentWillReceiveProps:function(n){if(this.props.activeAudience!==n.activeAudience&&n.activeAudience===k.OWN)this._layerHack();if(this.props.status.type===c('ShareDialogStatusTypes').ERROR&&n.status.type===c('ShareDialogStatusTypes').COMPOSING)this._layerHack();},componentDidUpdate:function(n,o){if(this.props.activeAudience===k.OWN)this._layerHack();},getPrivacyValue:function(){var n=c('PrivacySelector').getAdamaSelectorInstance(this.props.privacySelector);if(n){var o=n.getPostParam();if(!o)c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').NO_PRIVACY_VALUE_ADAMA);return o;}var p=c('DOM').scry(this.props.privacySelector,'select option[selected="1"]').pop();if(p&&p.value){return p.value;}else c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').NO_PRIVACY_VALUE);return null;},render:function(){if(this.props.status.type===c('ShareDialogStatusTypes').SUCCESS){return this.props.status.title?c('React').createElement(c('XUIDialogFooter.react'),{className:"_8js"},c('React').createElement('div',{className:"_4-88"},c('React').createElement(c('XUIDialogCloseButton.react'),{use:'confirm'}))):c('React').createElement('noscript',null);}else if(this.props.status.type===c('ShareDialogStatusTypes').ERROR){var n=c('React').createElement('noscript',null);if(this.props.experiments.postRetry)n=c('React').createElement(c('XUIDialogButton.react'),{label:i._("Reintentar"),onClick:this.props.onRetry});return this.props.renderInline?c('React').createElement('noscript',null):c('React').createElement(c('XUIDialogFooter.react'),{className:"_8js"},c('React').createElement('div',{className:"_4-88"},n,c('React').createElement(c('XUIDialogCloseButton.react'),{use:'confirm'})));}var o=this.props.status.type===c('ShareDialogStatusTypes').POSTING,p=this.props.activeAudience,q=this.props.sharerType,r;if(p===k.OWN&&q!==c('SharerType').PAGE_VIEWER)r=c('React').createElement('div',{ref:'privacySelector',className:"_8ju"});var s;if(p==k.GROUP&&q!==c('SharerType').PAGE_VIEWER){var t=i._("People who can see posts in the group");s=c('React').createElement(c('InlineBlock.react'),babelHelpers['extends']({className:"_43k3"},c('Tooltip').propsFor(t)),c('React').createElement(c('Image.react'),{src:j('/images/litestand/audience/group.png')}));}var u;if(!o)u=c('React').createElement('div',null,r,s);var v;if(o){v=p===k.MESSAGE?i._("Enviando"):i._("Publicando");}else v=p===k.MESSAGE?i._("Enviar"):i._("Publicar");var w=p!==k.OWN&&!this.props.audienceTargets,x=p===k.OWN||p===k.PERSON||p===k.PAGE?c('React').createElement(c('ShareDialogTaggerButtons.react'),{activeTagger:this.props.activeTagger,hasPeople:this.props.hasPeople,hasPlace:this.props.hasPlace,hasDoing:this.props.hasDoing,onTaggerClick:this.props.onTaggerClick,dataSources:this.props.dataSources,showDoingNUX:this.props.showDoingNUX}):c('React').createElement('noscript',null);if(this.props.renderInline){return (c('React').createElement('div',{className:"_8js"},c('React').createElement(c('LeftRight.react'),null,o?c('React').createElement('noscript',null):x,c('React').createElement(c('LeftRight.react'),null,u,c('React').createElement('div',{className:"_4-88"},c('React').createElement(c('XUIButton.react'),{label:v,disabled:o||w,type:'button',use:'confirm',onClick:this.props.onPost}))))));}else return (c('React').createElement(c('XUIDialogFooter.react'),{className:"_8js",leftContent:o?c('React').createElement('noscript',null):x},c('React').createElement(c('LeftRight.react'),null,u,c('React').createElement('div',{className:"_4-88"},c('React').createElement(c('XUIDialogCancelButton.react'),{disabled:o,action:'cancel',onClick:this.props.onCancel}),c('React').createElement(c('XUIDialogButton.react'),{label:v,disabled:o||w,use:'confirm',onClick:this.props.onPost})))));}});f.exports=m;},null);
__d('ShareDialogMetricMixin',['BanzaiScuba','ReactDOM','Vector'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i=null,j=null,k={_logHeights:function(event,l,m,n){var o=c('Vector').getViewportDimensions(),p=new (c('BanzaiScuba'))('osric_dimensions');p.addNormal('fbid',l);p.addNormal('event',event);p.addInteger('viewport_height',o.y);p.addInteger('screen_height',window.screen.height);if(m&&c('ReactDOM').findDOMNode(m)){var q=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(m));p.addInteger('dialog_height',q.y);}if(n&&c('ReactDOM').findDOMNode(n)){var r=c('Vector').getElementDimensions(c('ReactDOM').findDOMNode(n));p.addInteger('attachment_height',r.y);}p.post();},logLoadHeights:function(){this._logHeights('load',this.props.postId,this.refs.dialog,this.refs.attachment);},logPostHeights:function(){this._logHeights('post',this.props.postId,this.refs.dialog,this.refs.attachment);},logCancelHeights:function(){this._logHeights('cancel',this.props.postId,this.refs.dialog,this.refs.attachment);}};f.exports=k;},null);
__d('ShareDialogTitle.react',['cx','fbt','ShareDialogAudienceSelector.react','ShareDialogAudienceText.react','ShareDialogAudienceTypes','ShareDialogDataSources','ShareDialogStatusTypes','SharerType','React','LeftRight.react','XUICloseButton.react','XUIDialogTitle.react','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('ShareDialogDataSources').TYPES,k=c('React').PropTypes,l=c('React').createClass({displayName:'ShareDialogTitle',propTypes:{activeAudience:function(m){if(!c('ShareDialogAudienceTypes').isValid(m.activeAudience))return new Error('The active audience is invalid.');},status:k.shape({type:k.string.isRequired,title:k.oneOfType([k.string,k.object]),message:k.oneOfType([k.string,k.object])}).isRequired,dataSources:k.instanceOf(c('ShareDialogDataSources')),onAudienceSelect:k.func,onClose:k.func,renderInline:k.bool},getDefaultProps:function(){return {onAudienceSelect:c('emptyFunction'),onClose:c('emptyFunction'),status:{type:'composing'},renderInline:false};},render:function(){var m=this.props.dataSources,n=this.props.activeAudience,o=[];switch(this.props.sharerType){case c('SharerType').MESSAGE_ONLY:o.push(c('ShareDialogAudienceTypes').MESSAGE);break;case c('SharerType').PAGE_ONLY:o.push(c('ShareDialogAudienceTypes').PAGE);break;case c('SharerType').OWN_ONLY:case c('SharerType').PAGE_VIEWER:o.push(c('ShareDialogAudienceTypes').OWN);break;default:o.push(c('ShareDialogAudienceTypes').OWN);if(m.getSource(j.PERSON_WALL))o.push(c('ShareDialogAudienceTypes').PERSON);if(m.getSource(j.GROUP))o.push(c('ShareDialogAudienceTypes').GROUP);if(m.getSource(j.EVENT))o.push(c('ShareDialogAudienceTypes').EVENT);if(m.getSource(j.PAGE))o.push(c('ShareDialogAudienceTypes').PAGE);if(m.getSource(j.MESSAGE))o.push(c('ShareDialogAudienceTypes').MESSAGE);}var p;if(this.props.status.type===c('ShareDialogStatusTypes').COMPOSING){p=c('React').createElement('div',{className:"_1jlx"},c('React').createElement(c('ShareDialogAudienceSelector.react'),{allowedAudiences:o,activeAudience:n,onAudienceSelect:this.props.onAudienceSelect}));}else if(this.props.status.type===c('ShareDialogStatusTypes').POSTING){p=c('React').createElement(c('ShareDialogAudienceText.react'),{className:"_4zt0",audience:n});}else if(this.props.status.type===c('ShareDialogStatusTypes').ERROR){p=c('React').createElement('span',{className:"_4zt0"},this.props.status.title||i._("Lamentamos las molestias."));}else if(this.props.status.type===c('ShareDialogStatusTypes').SUCCESS)p=this.props.status.title?c('React').createElement('span',{className:"_4zt0"},this.props.status.title):null;if(!p)return c('React').createElement('noscript',null);var q=c('React').createElement(c('XUICloseButton.react'),{className:"_51-t _3chm",label:i._("Cerrar"),onClick:this.props.onClose});if(this.props.renderInline){return (c('React').createElement(c('LeftRight.react'),{className:"_5t22"},p,q));}else return (c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false,className:"_5t22"},p,this.props.children,q));}});f.exports=l;},null);
__d('ShareDialog.react',['cx','fbt','Arbiter','BootloadedComponent.react','DialogExpansionAtWidth','DOM','FBID','immutable','Input','JSResource','LayerAutoFocus','LayerFadeOnHide','MercuryIDs','MercuryThreads','React','ReactDOM','ShareDialogAttachment.react','ShareDialogAttribution.react','ShareDialogAudience.react','ShareDialogAudienceHeader.react','ShareDialogDataSources','ShareDialogFooter.react','ShareDialogInput.react','ShareDialogMetricMixin','ShareDialogStaticTitle.react','ShareDialogStatusTypes','ShareDialogTaggerTypes','ShareDialogTagSummary.react','ShareDialogTitle.react','ShareDialogWarningNotice.react','ShareNowCounter','ShareNowCounterEvent','SharerType','XUIDialog.react','XUIDialogBody.react','XUINotice.react','XUISpinner.react','containsNode','emptyFunction'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('MercuryThreads').get(),k=c('ShareDialogAudience.react').TYPES,l=c('React').PropTypes,m=400,n=c('React').createClass({displayName:'ShareDialog',mixins:[c('ShareDialogMetricMixin')],propTypes:{postId:l.string.isRequired,shareType:l.string,privacySelector:l.any.isRequired,status:l.shape({type:l.string.isRequired,title:l.oneOfType([l.string,l.object]),message:l.oneOfType([l.string,l.object])}).isRequired,experiments:l.shape({attachmentExpand:l.bool,enableVerbPrefetching:l.bool,postRetry:l.bool,staticHeader:l.bool,subtleWarning:l.bool}),userId:l.string.isRequired,appId:l.string,attachment:l.object,dataSources:l.instanceOf(c('ShareDialogDataSources')),legacyInput:l.any,messageTags:l.array,messageTargets:l.array,onCancel:l.func,onPost:l.func,ownerId:l.string,publicityWarning:l.object,sharerType:l.oneOf([c('SharerType').ALL_MODES,c('SharerType').MESSAGE_ONLY,c('SharerType').PAGE_ONLY,c('SharerType').PAGE_VIEWER]),showDoingNUX:l.bool,title:l.string,via:l.object,renderInline:l.bool,useCheckinBranding:l.bool,defaultAudienceType:l.oneOf(Object.keys(k).map(function(o){return k[o];})),initInputText:l.string,initInputRanges:l.array,placeholderText:l.string},getDefaultProps:function(){return {onCancel:c('emptyFunction'),onPost:c('emptyFunction'),sharerType:c('SharerType').ALL_MODES,shown:false,status:{type:c('ShareDialogStatusTypes').COMPOSING},experiments:{attachmentExpand:false,postRetry:false,staticHeader:false},renderInline:false,defaultAudienceType:k.OWN};},getInitialState:function(){var o=this.props.defaultAudienceType;if(this.props.sharerType===c('SharerType').MESSAGE_ONLY){o=k.MESSAGE;}else if(this.props.sharerType===c('SharerType').PAGE_ONLY)o=k.PAGE;return {activeAudience:o,activeTagger:c('ShareDialogTaggerTypes').NONE,action:null,actorId:this.props.userId,audienceTargets:null,isPosting:false,message:'',object:null,people:[],place:null,shareType:this.props.shareType,status:this.props.status,via:this.props.via};},componentWillMount:function(){if(this.props.sharerType===c('SharerType').MESSAGE_ONLY){c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').OPEN_MESSAGE_DIALOG);}else c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').OPEN_DIALOG);this._updateNubOffset(this.props.shareLinkNode);this.setState({shown:true});if(this.props.experiments.gkEnableVerbPrefetching){var o=c('ShareDialogDataSources').getSource(c('ShareDialogDataSources').ACTION);if(o){o.bootstrapData.is_prefetching=true;o.bootstrap();o.bootstrapData.is_prefetching=false;}}},componentWillReceiveProps:function(o){this._updateNubOffset(o.shareLinkNode);if(!o.dataSources.getSource(c('ShareDialogDataSources').TYPES.PERSON))this.setState({people:[]});if(!o.dataSources.getSource(c('ShareDialogDataSources').TYPES.PLACE))this.setState({place:null});if(!o.dataSources.getSource(c('ShareDialogDataSources').TYPES.ACTION)||!o.dataSources.getSource(c('ShareDialogDataSources').TYPES.OBJECT))this.setState({action:null,object:null});this.setState({shown:o.shown,overflowing:this.refs.attachment&&this.props.experiments.attachmentExpand?c('ReactDOM').findDOMNode(this.refs.attachment).clientHeight>m:false,activeTagger:c('ShareDialogTaggerTypes').NONE,status:o.status});},componentDidMount:function(){this.reflowSubscription=c('Arbiter').subscribe('inlineShare/reflow',function(){this._updateNubOffset(this.props.shareLinkNode);}.bind(this));this.ogSubscription=c('Arbiter').subscribe('composer/ogCustomIconSelected',function(event,p){if(p.triggerElement&&!c('containsNode')(c('ReactDOM').findDOMNode(this.refs.shareBody),p.triggerElement))return;this.setState({actionIconId:p.icon_id});}.bind(this));var o=false;if(this.props.attachment&&this.refs.attachment){c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.attachment),this.props.attachment);if(this.props.experiments.attachmentExpand)o=c('ReactDOM').findDOMNode(this.refs.attachment).clientHeight>m;}this.setState({loaded:true,overflowing:o});this.logLoadHeights();},componentWillUnmount:function(){if(this.reflowSubscription)this.reflowSubscription.unsubscribe();if(this.ogSubscription)this.ogSubscription.unsubscribe();},componentDidUpdate:function(o,p){if(this.props.attachment&&this.refs.attachment)c('DOM').setContent(c('ReactDOM').findDOMNode(this.refs.attachment),this.props.attachment);this.refs.xuidialog&&this.refs.xuidialog.layer.updatePosition();},_onTaggerClick:function(o){this.setState({activeTagger:o});},_onSelectPeople:function(o){this.setState({people:o});},_onSelectPlace:function(o){this.setState({place:o,activeTagger:c('ShareDialogTaggerTypes').NONE});},_onSelectAction:function(o){this.setState({action:o});},_onSelectObject:function(o){var p={object:o,activeTagger:c('ShareDialogTaggerTypes').NONE};if(o==null)p.actionIconId=null;this.setState(p);},_onRemoveAttribution:function(){this.setState({via:null});},_onAudienceSelect:function(o){if(o===k.GROUP||o===k.MESSAGE){this.setState({activeAudience:o,activeTagger:c('ShareDialogTaggerTypes').NONE,audienceTargets:null,actorId:this.props.userId,people:[],place:null,action:null,object:null});}else this.setState({activeAudience:o,audienceTargets:null,actorId:this.props.userId});},_onChangeAudienceTargets:function(o){if(this.state.activeAudience===k.PAGE){this.setState({audienceTargets:[o[0].pageId],actorId:o[0].actorId});}else this.setState({audienceTargets:o,actorId:this.props.userId});},_onClearAudienceTargets:function(){this.setState({audienceTargets:null});},_onBlur:function(o){this.setState({message:o});},_onExpand:function(){this.setState({expanded:true});},_onCollapse:function(){this.setState({expanded:false});},_getStatefulResponse:function(){var o=this.state,p=o.people.map(function(ca){return ca.getUniqueID();}),q=null,r=null;if(o.object){var s=o.object.getUniqueID(),t=o.object.getTitle();if(!s||s===t){r=t;}else q=s;}var u=o.message;if(this.props.legacyInput){var v=c('ReactDOM').findDOMNode(this.refs.dialogInput),w=c('DOM').find(v,'.mentionsHidden');u=c('Input').getValue(w);}var x=o.audienceTargets?o.audienceTargets:[],y=0;if(x.length===1){var z=c('FBID').isUser(x[0])?c('MercuryIDs').getThreadIDFromUserID(x[0]):c('MercuryIDs').getThreadIDFromThreadFBID(x[0]),aa=j.getThreadMetaNow(z);y=aa?aa.ephemeral_ttl_mode:0;}var ba={appId:this.props.appId,sharedAdId:this.props.sharedAdId,actorId:this.state.actorId,ownerId:this.props.ownerId,postId:this.props.postId,shareType:this.props.shareType,message:u,audienceType:o.activeAudience,audienceTargets:x,ephemeralTTLMode:y,taggedPeople:p,taggedPlace:o.place?o.place.getUniqueID():null,taggedActionId:o.action?o.action.getUniqueID():null,taggedActionIconId:this.state.actionIconId,taggedObjectId:q,taggedObjectStr:r,attributionId:this.state.via?this.state.via.id:null,messageTags:this.props.messageTags,internalExtra:this.props.internalExtra,internalPreviewImageID:this.props.internalPreviewImageID,source:this.props.renderInline?'osric-inline':'osric'};if(this.state.activeAudience===k.OWN&&this.props.sharerType!==c('SharerType').PAGE_VIEWER)if(this.refs.footer){ba.privacy=this.refs.footer.getPrivacyValue();}else c('ShareNowCounter').logEvent(c('ShareNowCounterEvent').NO_FOOTER_REF);return ba;},_onCancel:function(){this.setState({shown:false});this.props.onCancel(this._getStatefulResponse());if(this.props.logHeight)this.logCancelHeights();},_onPost:function(){this.props.onPost(this._getStatefulResponse());this.setState({isPosting:true});if(this.props.logHeight)this.logPostHeights();},_onRetry:function(){this.setState({isPosting:false,status:{type:c('ShareDialogStatusTypes').COMPOSING,title:null,message:null}});},_getMessage:function(){var o=null;if(this.state.status.type===c('ShareDialogStatusTypes').ERROR){o=this.state.status.message||i._("Esta publicaci\u00f3n no se puede compartir en este momento. Vuelve a intentarlo m\u00e1s tarde.");}else if(this.state.status.type===c('ShareDialogStatusTypes').SUCCESS)o=this.state.status.message||i._("Se public\u00f3 tu contenido compartido.");if(o){if(this.state.status.type===c('ShareDialogStatusTypes').SUCCESS&&!this.state.status.title)setTimeout(function(){this.setState({shown:false});}.bind(this),2500);if(o.__html)return c('React').createElement('span',{dangerouslySetInnerHTML:o});return c('React').createElement('span',null,o);}return null;},_getWarning:function(){var o=c('React').createElement('noscript',null);if(this.props.publicityWarning)if(this.props.experiments&&this.props.experiments.subtleWarning){o=c('React').createElement(c('ShareDialogWarningNotice.react'),{warning:this.props.publicityWarning});}else o=c('React').createElement(c('XUINotice.react'),{className:"_2nt0",size:'small'},c('React').createElement('span',{dangerouslySetInnerHTML:this.props.publicityWarning}));return o;},_getAttribution:function(){var o=c('React').createElement('noscript',null);if(this.state.via&&this.state.via.name&&this.state.activeAudience!==k.MESSAGE)o=c('React').createElement(c('ShareDialogAttribution.react'),{onRemove:this._onRemoveAttribution,name:this.props.via.name});return o;},_getOverlay:function(){var o=c('React').createElement('noscript',null);if(this.state.status.type===c('ShareDialogStatusTypes').POSTING)o=c('React').createElement('div',{className:"_51jk"},c('React').createElement(c('XUISpinner.react'),{size:'large',className:"_51jl"}));return o;},_getAttachment:function(){var o=c('React').createElement('noscript',null);if(!this.props.renderInline)o=c('React').createElement(c('ShareDialogAttachment.react'),{onCollapse:this._onCollapse,overflowing:this.state.overflowing,onExpand:this._onExpand},c('React').createElement('article',{ref:'attachment',className:"_51jo"}));return o;},render:function(){var o;if(this.props.experiments.staticHeader){o=c('React').createElement(c('ShareDialogStaticTitle.react'),{onClose:this._onCancel,renderInline:this.props.renderInline,title:this.props.title});}else o=c('React').createElement(c('ShareDialogTitle.react'),{activeAudience:this.state.activeAudience,dataSources:this.props.dataSources,onAudienceSelect:this._onAudienceSelect,onClose:this._onCancel,sharerType:this.props.sharerType,status:this.state.status,renderInline:this.props.renderInline});var p=c('React').createElement(c('ShareDialogFooter.react'),{activeAudience:this.state.activeAudience,activeTagger:this.state.activeTagger,audienceTargets:this.state.audienceTargets,dataSources:this.props.dataSources,experiments:this.props.experiments,hasDoing:this.state.action!==null&&this.state.object!==null,hasPeople:this.state.people.length>0,hasPlace:this.state.place!==null,onCancel:this._onCancel,onPost:this._onPost,onRetry:this._onRetry,onTaggerClick:this._onTaggerClick,privacySelector:this.props.privacySelector,ref:'footer',status:this.state.status,sharerType:this.props.sharerType,showDoingNUX:this.props.showDoingNUX,renderInline:this.props.renderInline});if(this.props.renderInline){return (c('React').createElement('li',{className:"_2nt1"},c('React').createElement('div',{className:"_2phu",style:{left:this.state.nubOffset}}),o,this._getInlineBody(),p));}else return (c('React').createElement(c('XUIDialog.react'),{ref:'xuidialog',shown:this.state.shown,width:496,behaviors:{DialogExpansion:c('DialogExpansionAtWidth'),LayerFadeOnHide:c('LayerFadeOnHide'),LayerAutoFocus:c('LayerAutoFocus')},layerHideOnBlur:false,modal:this.state.status.type!==c('ShareDialogStatusTypes').SUCCESS,className:"_51jd"},c('React').createElement('div',{ref:'dialog'},o,this._getDialogBody(),p)));},_updateNubOffset:function(o){if(!o)return 0;var p=12,q=o.offsetLeft,r=o.offsetWidth/2,s=8,t=Math.round(p+q+r-s);this.setState({nubOffset:t});},_getInlineBody:function(){var o=this._getMessage();if(o)return (c('React').createElement('div',{className:"_2pid _2pin",ref:'message'},o));return (c('React').createElement('div',{className:"_2nt2"},this._getBodyContent()));},_getDialogBody:function(){var o=this._getMessage();if(o)return (c('React').createElement(c('XUIDialogBody.react'),{ref:'message'},o));return (c('React').createElement(c('XUIDialogBody.react'),{className:"_51jm"},this._getBodyContent()));},_getBodyContent:function(){var o=this._getWarning(),p=this._getAttribution(),q=this._getOverlay(),r=this._getAttachment(),s;if(this.props.experiments.staticHeader)s=c('React').createElement(c('ShareDialogAudienceHeader.react'),{activeAudience:this.state.activeAudience,dataSources:this.props.dataSources,onAudienceSelect:this._onAudienceSelect});return (c('React').createElement('div',{ref:'shareBody'},s,c('React').createElement(c('ShareDialogAudience.react'),{userId:this.props.userId,activeAudience:this.state.activeAudience,messageTargets:this.props.messageTargets,dataSources:this.props.dataSources,onChange:this._onChangeAudienceTargets,onClear:this._onClearAudienceTargets}),c('React').createElement(c('ShareDialogInput.react'),{activeAudience:this.state.activeAudience,className:"_2nt3 autofocus",dataSources:this.props.dataSources,initialValue:this.state.message,legacyInput:this.props.legacyInput,ref:'dialogInput',onBlur:this._onBlur,initInputText:this.props.initInputText,initInputRanges:this.props.initInputRanges,placeholderText:this.props.placeholderText}),c('React').createElement(c('ShareDialogTagSummary.react'),{onIconChange:this._onIconChange,taggerData:c('immutable').Map({action:this.state.action,actionIconID:this.state.actionIconId,object:this.state.object,people:this.state.people,place:this.state.place})}),p,r,o,c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ShareDialogTagger.react'),bootloadPlaceholder:c('React').createElement('span',null),activeTagger:this.state.activeTagger,dataSources:this.props.dataSources,experiments:this.props.experiments,initialPeople:this.state.people,initialPlace:this.state.place,initialAction:this.state.action,initialObject:this.state.object,onSelectPeople:this._onSelectPeople,onSelectPlace:this._onSelectPlace,onSelectAction:this._onSelectAction,onSelectObject:this._onSelectObject,userId:this.props.userId,useCheckinBranding:this.props.useCheckinBranding}),q));}});f.exports=n;},null);
__d('ShareDialogPeopleTagger.react',['cx','fbt','emptyFunction','React','Grid.react','XUITokenizer.react','ShareDialogTaggerPresenter'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('Grid.react').GridItem,k=c('React').PropTypes,l=c('React').createClass({displayName:'ShareDialogPeopleTagger',propTypes:{userId:k.string.isRequired,dataSource:k.object,initialPeople:k.array,onSelect:k.func},getDefaultProps:function(){return {onSelect:c('emptyFunction'),initialPeople:[]};},getInitialState:function(){return {people:this.props.initialPeople};},componentWillReceiveProps:function(m){if(m.initialPeople&&this.props.initialPeople!==m.initialPeople)this.setState({people:m.initialPeople});},_onAdd:function(m){var n=this.state.people,o=m.getUniqueID(),p=n.some(function(q){return q.getUniqueID()===o;});if(p){return;}else{n.push(m);this.setState({people:n});}this.props.onSelect(n);},_onRemove:function(m){var n=this.state.people,o=n.indexOf(m);if(o==-1)return;n.splice(o,1);this.setState({people:n});this.props.onSelect(n);},render:function(){var m={};m[this.props.userId]=true;return (c('React').createElement(c('Grid.react'),{cols:2,className:"_o2h _2rlv"},c('React').createElement(j,{className:"_27tc",key:'prefix'},i._("Con")),c('React').createElement(j,{className:"_2mzr",key:'suffix'},c('React').createElement(c('XUITokenizer.react'),{presenter:c('ShareDialogTaggerPresenter'),focusedOnInit:true,excludedEntries:m,entries:this.state.people,className:"_2qvi _2qvj",placeholder:i._("\u00bfCon qui\u00e9n est\u00e1s?"),searchSource:this.props.dataSource,onAddEntryAttempt:this._onAdd,onRemoveEntryAttempt:this._onRemove}))));}});f.exports=l;},null);
__d('ShareDialogPlaceTagger.react',['cx','fbt','emptyFunction','React','Grid.react','XUITypeahead.react','ShareDialogTaggerPresenter'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('Grid.react').GridItem,k=c('React').PropTypes,l=c('React').createClass({displayName:'ShareDialogPlaceTagger',propTypes:{dataSource:k.object,initialPlace:k.object,onSelect:k.func,useCheckinBranding:k.bool},getDefaultProps:function(){return {onSelect:c('emptyFunction')};},getInitialState:function(){return {place:this.props.initialPlace,query:this.props.initialPlace?this.props.initialPlace.getTitle():''};},componentWillReceiveProps:function(m){if(m.initialPlace&&this.props.initialPlace!==m.initialPlace)this.setState({place:m.initialPlace});},_onChange:function(event){this.setState({query:event.target.value});},_onSelect:function(m){this.setState({place:m,query:m.getTitle()});this.props.onSelect(m);},_onClear:function(){this.setState({place:null,query:null});this.props.onSelect(null);},render:function(){return (c('React').createElement(c('Grid.react'),{cols:2,className:"_5d39 _2rlv _3iti"},c('React').createElement(j,{className:"_27tc",key:'prefix'},i._("En")),c('React').createElement(j,{className:"_2mzr",key:'suffix'},c('React').createElement(c('XUITypeahead.react'),{presenter:c('ShareDialogTaggerPresenter'),clearable:true,focusedOnInit:true,showEntriesOnFocus:true,selectedEntry:this.state.place,placeholder:this.props.useCheckinBranding?i._("\u00bfD\u00f3nde fue esto?"):i._("\u00bfD\u00f3nde est\u00e1s?"),className:"_2qvi _2qvk",queryString:this.state.query,searchSource:this.props.dataSource,highlightOnSelect:true,onSelectAttempt:this._onSelect,onClear:this._onClear,onChange:this._onChange,tallInput:true}))));}});f.exports=l;},null);
__d('ShareDialogTagger.react',['React','ShareDialogDataSources','ShareDialogTaggerTypes','ShareDialogPeopleTagger.react','ShareDialogPlaceTagger.react','ShareDialogActionTagger.react','ShareDialogObjectTagger.react','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'ShareDialogTagger',propTypes:{activeTagger:function(j){if(!c('ShareDialogTaggerTypes').isValid(j.activeTagger))return new Error('The active tagger is invalid.');},dataSources:h.instanceOf(c('ShareDialogDataSources')),experiments:h.shape({enableVerbPrefetching:h.bool}),userId:h.string.isRequired,initialPeople:h.array,initialPlace:h.object,initialAction:h.object,initialObject:h.object,onSelectPeople:h.func,onSelectPlace:h.func,onSelectAction:h.func,onSelectObject:h.func,useCheckinBranding:h.bool},getDefaultProps:function(){return {activeTagger:c('ShareDialogTaggerTypes').NONE,initialPeople:[],onClearAction:c('emptyFunction'),onSelectPeople:c('emptyFunction'),onSelectPlace:c('emptyFunction'),onSelectAction:c('emptyFunction'),onSelectObject:c('emptyFunction')};},getInitialState:function(){return {people:this.props.initialPeople,place:this.props.initialPlace,action:this.props.initialAction,object:this.props.initialObject};},componentDidUpdate:function(){if(this.refs.objectTagger)this.refs.objectTagger.focusInput();},componentWillReceiveProps:function(j){this.setState({people:j.initialPeople,place:j.initialPlace,action:j.initialAction,object:j.initialObject});},_onSelectPeople:function(j){this.setState({people:j});this.props.onSelectPeople(j);},_onSelectPlace:function(j){this.setState({place:j});this.props.onSelectPlace(j);},_onClearAction:function(){this.setState({action:null});},_onSelectAction:function(j){this.setState({action:j});this.props.onSelectAction(j);},_onSelectObject:function(j){this.setState({object:j});this.props.onSelectObject(j);},render:function(){var j=this.props.dataSources;if(this.props.activeTagger===c('ShareDialogTaggerTypes').PEOPLE){var k=j.getSource(c('ShareDialogDataSources').TYPES.PERSON);if(!k)return c('React').createElement('noscript',null);return (c('React').createElement(c('ShareDialogPeopleTagger.react'),{userId:this.props.userId,dataSource:k,initialPeople:this.state.people,onSelect:this._onSelectPeople}));}else if(this.props.activeTagger===c('ShareDialogTaggerTypes').PLACE){var l=j.getSource(c('ShareDialogDataSources').TYPES.PLACE);if(!l)return c('React').createElement('noscript',null);return (c('React').createElement(c('ShareDialogPlaceTagger.react'),{dataSource:l,initialPlace:this.state.place,onSelect:this._onSelectPlace,useCheckinBranding:this.props.useCheckinBranding}));}else if(this.props.activeTagger===c('ShareDialogTaggerTypes').DOING){var m=j.getSource(c('ShareDialogDataSources').TYPES.ACTION),n=j.getSource(c('ShareDialogDataSources').TYPES.OBJECT);if(!m||!n)return c('React').createElement('noscript',null);return (c('React').createElement('div',null,this.state.action?c('React').createElement('noscript',null):c('React').createElement(c('ShareDialogActionTagger.react'),{dataSource:m,experiments:this.props.experiments,action:this.state.action,onSelect:this._onSelectAction}),this.state.action?c('React').createElement(c('ShareDialogObjectTagger.react'),{ref:'objectTagger',action:this.state.action,dataSource:n,object:this.state.object,onClearAction:this._onClearAction,onSelect:this._onSelectObject,userId:this.props.userId}):c('React').createElement('noscript',null)));}return c('React').createElement('noscript',null);}});f.exports=i;},null);